(()=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=Array(e);o<e;o++)n[o]=t[o];return n}function _regeneratorRuntime(){"use strict";function define(t,e,o){return Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[e]}function wrap(t,e,o,n){var a=e&&e.prototype instanceof Generator?e:Generator,l=Object.create(a.prototype),r=new Context(n||[]);return i(l,"_invoke",{value:makeInvokeMethod(t,o,r)}),l}function tryCatch(t,e,o){try{return{type:"normal",arg:t.call(e,o)}}catch(t){return{type:"throw",arg:t}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(o,i,a,l){var r,s,c=tryCatch(t[o],t,i);if("throw"!==c.type)return(s=(r=c.arg).value)&&"object"==_typeof(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){invoke("next",t,a,l)}),(function(t){invoke("throw",t,a,l)})):e.resolve(s).then((function(t){r.value=t,a(r)}),(function(t){return invoke("throw",t,a,l)}));l(c.arg)}var o;i(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,o){invoke(t,n,e,o)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,o,n){var i=c;return function(a,l){var r,s,f;if(i===p)throw Error("Generator is already running");if(i===d){if("throw"===a)throw l;return{value:t,done:!0}}for(n.method=a,n.arg=l;;){if((r=n.delegate)&&(s=maybeInvokeDelegate(r,n))){if(s===h)continue;return s}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===c)throw i=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);if(i=p,"normal"===(f=tryCatch(e,o,n)).type){if(i=n.done?d:u,f.arg===h)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(i=d,n.method="throw",n.arg=f.arg)}}}function maybeInvokeDelegate(e,o){var n,i,a=o.method,l=e.iterator[a];return l===t?(o.delegate=null,"throw"===a&&e.iterator.return&&(o.method="return",o.arg=t,maybeInvokeDelegate(e,o),"throw"===o.method)||"return"!==a&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+a+"' method")),h):"throw"===(n=tryCatch(l,e.iterator,o.arg)).type?(o.method="throw",o.arg=n.arg,o.delegate=null,h):(i=n.arg)?i.done?(o[e.resultName]=i.value,o.next=e.nextLoc,"return"!==o.method&&(o.method="next",o.arg=t),o.delegate=null,h):i:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,h)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){var o,i,a;if(e||""===e){if(o=e[l])return o.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return i=-1,(a=function next(){for(;++i<e.length;)if(n.call(e,i))return next.value=e[i],next.done=!1,next;return next.value=t,next.done=!0,next}).next=a}throw new TypeError(_typeof(e)+" is not iterable")}var t,e,o,n,i,a,l,r,s,c,u,p,d,h,f,y,m,_;_regeneratorRuntime=function _regeneratorRuntime(){return e},e={},o=Object.prototype,n=o.hasOwnProperty,i=Object.defineProperty||function(t,e,o){t[e]=o.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",r=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";try{define({},"")}catch(t){define=function define(t,e,o){return t[e]=o}}return e.wrap=wrap,c="suspendedStart",u="suspendedYield",p="executing",d="completed",h={},define(f={},l,(function(){return this})),(m=(y=Object.getPrototypeOf)&&y(y(values([]))))&&m!==o&&n.call(m,l)&&(f=m),_=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(f),GeneratorFunction.prototype=GeneratorFunctionPrototype,i(_,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),i(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,s,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,r,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,o,n,i,a){void 0===a&&(a=Promise);var l=new AsyncIterator(wrap(t,o,n,i),a);return e.isGeneratorFunction(o)?l:l.next().then((function(t){return t.done?t.value:l.next()}))},defineIteratorMethods(_),define(_,s,"Generator"),define(_,l,(function(){return this})),define(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e,o=Object(t),n=[];for(e in o)n.push(e);return n.reverse(),function next(){for(;n.length;){var t=n.pop();if(t in o)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){function handle(n,i){return l.type="throw",l.arg=e,o.next=n,i&&(o.method="next",o.arg=t),!!i}var o,i,a,l,r,s;if(this.done)throw e;for(o=this,i=this.tryEntries.length-1;i>=0;--i){if(a=this.tryEntries[i],l=a.completion,"root"===a.tryLoc)return handle("end");if(a.tryLoc<=this.prev)if(r=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc"),r&&s){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0);if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}else if(r){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}}},abrupt:function abrupt(t,e){var o,i,a,l;for(o=this.tryEntries.length-1;o>=0;--o)if((i=this.tryEntries[o]).tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){a=i;break}return a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null),(l=a?a.completion:{}).type=t,l.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(l)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function finish(t){var e,o;for(e=this.tryEntries.length-1;e>=0;--e)if((o=this.tryEntries[e]).finallyLoc===t)return this.complete(o.completion,o.afterLoc),resetTryEntry(o),h},catch:function _catch(t){var e,o,n,i;for(e=this.tryEntries.length-1;e>=0;--e)if((o=this.tryEntries[e]).tryLoc===t)return"throw"===(n=o.completion).type&&(i=n.arg,resetTryEntry(o)),i;throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,o,n){return this.delegate={iterator:values(e),resultName:o,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}function asyncGeneratorStep(t,e,o,n,i,a,l){try{var r=t[a](l),s=r.value}catch(t){return void o(t)}r.done?e(s):Promise.resolve(s).then(n,i)}function _asyncToGenerator(t){return function(){var e=this,o=arguments;return new Promise((function(n,i){function _next(t){asyncGeneratorStep(a,n,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(a,n,i,_next,_throw,"throw",t)}var a=t.apply(e,o);_next(void 0)}))}}!function(t,e,o){"use strict";function progressProjectDetails(){var e,o,n,i,a,l;if(window.location.href.indexOf("admin/projects/view")>-1){if(!(e=t(".project-overview-left").find(".panel-body")).length)return;o=PolyCommon.extractProjectIdByUrl(window.location.href),n="".concat(PolyCommon.siteUrl(!0),"/admin/projects/project/").concat(o),i='<span class="poly-cursor"><a href="'.concat(n,'"><i class="fa-regular fa-pen-to-square poly-icon"></i></a></span>'),a='<div class="poly-block-project-edit poly-absolute poly-right-0 poly-top-0">'.concat(i,"</div>"),l='<div class="poly-block-project-edit poly-absolute poly-right-0 poly-bottom-0">'.concat(i,"</div>"),e.append("".concat(a).concat(l))}}function getDataItemsFiltersByTable(e,o){var n=[];return e.find("thead th").each((function(e){var o=t(this).text().trim(),i={idx:e+1+"",id:"poly-col-"+e,active:"true",text:o};n.push(i)})),o&&n.forEach((function(t,e){o[e]&&(t.active=o[e].active||"true")})),n}function dataTableFiltersByUser(){var e,o,i,a,l,r;(d=d||t("table"))&&d.length>0&&(e=poly_utilities_settings.tab?"-"+poly_utilities_settings.tab.slug:"",o=poly_utilities_settings.segments[1]?"-"+poly_utilities_settings.segments[1]:"",i=poly_utilities_settings.segments[2]?"-"+poly_utilities_settings.segments[2]:"",a=poly_utilities_settings.segments[3]?"-"+poly_utilities_settings.segments[3]:"",o&&i&&(l="u".concat(poly_utilities_settings.uid).concat(o).concat(i).concat(e).concat(a),r=PolyCommon.getValueByKey(poly_utilities_settings.data_filters,l),d.each((function(e,o){var i=t(o),a=getDataItemsFiltersByTable(i,r);i.on("init.dt",(function(o,r,s){var c,u,p,d,h,f,y,m,_,v="poly-table-".concat(e);if(i.addClass(v),c="",a)for(u=0;u<a.length;u++)d="true"==(p=a[u]).active?"checked":"",i.DataTable().column(u).visible("true"==p.active),c+='<div class="poly-item-filter"> <label class="poly-label"> <input type="checkbox" class="poly-checkbox poly-checkbox-'+u+'" value="'+u+'" '+d+" > <span>"+p.text+"</span> </label> </div>";poly_utilities_settings.is_data_table_filters_column&&"true"!=poly_utilities_settings.is_data_table_filters_column||0===n.find(".poly-utilities-filter.poly-filter-".concat(e)).length&&i.before('<div class="poly-utilities-filter hidden-xs poly-filter-'.concat(e,'">').concat(c,"</div>")),poly_utilities_settings.is_button_data_table_filters_column&&"true"!=poly_utilities_settings.is_button_data_table_filters_column||0===n.find(".poly-button-tools.poly-tools-".concat(e)).length&&(h='<button class="btn btn-default btn-sm poly-button-tools poly-tools-'.concat(e,'"><a class="fa-solid fa-list fa-fw"></a></button>'),i.parents(".dataTables_wrapper").find(".dt-buttons").append(h)),t(".poly-button-tools").on("click",(function(){var e,o='<div class="poly-utilities-filter-modal">'.concat(c,"</div>"),n=poly_utilities_settings.modals.find((function(t){return"table_filter"in t})).table_filter;Swal.fire({customClass:{container:"poly-utilities-table-filter-modal-content"},title:"<strong>".concat(null!==(e=n&&n.header)&&void 0!==e?e:"","</strong>"),html:o,showConfirmButton:!1,showCloseButton:!0,allowOutsideClick:!1,focusConfirm:!1,didOpen:function didOpen(){var e,o,n;for(e=0;e<a.length;e++)n="true"==(o=a[e]).active?"checked":"",t(".poly-utilities-filter-modal .poly-checkbox-"+e).prop("checked",n)}})})),t("body").off("change",".poly-checkbox").on("change",".poly-checkbox",(function(){var e,o=parseInt(t(this).val()),n=t(this).prop("checked");t(".poly-checkbox-"+o).prop("checked",n),a[o].active=t(this).prop("checked")?"true":"false",i.DataTable().column(o).visible(t(this).prop("checked")),e={key:l,value:a},t.post(admin_url+"poly_utilities/save_data_filters",{data:e}).done((function(t){try{var e;if(t)t.code}catch(t){}}))})),(f=t('input[type="search"]')).length&&(y="",0===n.find(".btn-copy-search-keywords").length&&(h='<button data-clipboard-text="'.concat(y,'" data-toggle="tooltip" data-original-title="Copy link" class="poly-copy-default btn btn-default btn-sm btn-copy-search-keywords"><a class="fa-regular fa-copy"></a></button>'),n.find(".dataTables_filter .input-group").append(h)),m=PolyUrlHelper.getValueByUrlParamName("s"),f.val(m),_=n.find(".btn-copy-search-keywords"),f.on("input",(function(){m=t(this).val(),y=""!==m?PolyUrlHelper.updateOrAddUrlParam("s",m):PolyUrlHelper.removeUrlParam("s"),_.attr("data-clipboard-text",y)})),setTimeout((function(){""!==m&&-1!=i.find('input[type="search"]').length&&PolyDataTable.searchKeywords(i.DataTable(),[m])}),300))}))}))))}function initPinQuickAccessMenu(e){var o;t(e).children("li").each((function(e,o){var n,i,a,l;0!=e&&((n=t(o).find("li")).length>0?n.each((function(e,o){var n,i,a;"none"!==t(o).css("display")&&void 0===t(o).data("type")&&(n=o.innerText.trim(),i=t(o).find("a").attr("href"),a='data-title="'.concat(n,'" data-link="').concat(i,'"'),o.innerHTML=o.innerHTML+"<span ".concat(a,' class="poly-quick-pin poly-quick-access-menu-pin-sub"><i class="fa-solid fa-thumbtack pull-right ico-pin"></i></span>'))})):void 0===t(o).data("type")&&(i=o.innerText.trim(),a=t(o).find("a").attr("href"),l='data-title="'.concat(i,'" data-link="').concat(a,'"'),o.innerHTML=o.innerHTML+"<span ".concat(l,' class="poly-quick-pin poly-quick-access-menu-pin"><i class="fa-solid fa-thumbtack pull-right ico-pin"></i></span>')),t(".poly-quick-pin").off("click").on("click",_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var e,o,n,i,a;return _regeneratorRuntime().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:return e=t(this).data("title"),o=t(this).data("link"),n=poly_utilities_settings.modals.find((function(t){return"quick_access_menu"in t})).quick_access_menu,l.next=5,Swal.fire({title:n.header,customClass:{popup:"poly-utilities-access-menu-pin-modal-content"},html:'\n                  <div class="row">\n                    <div clas="form-group">\n                        <div class="col-md-12">\n                            <label></label><input id="poly-title" class="form-control" value="'.concat(e,'">\n                        </div>\n                    </div>\n                    <div clas="form-group">\n                        <div class="form-group col-md-12">\n                            <label></label><input id="poly-link" class="form-control" value="').concat(o,'">\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        ').concat(PolyCommon.select("Rels","poly_utilities_pin_rel",poly_utilities_settings.rels,"nofollow","form-group col-md-6"),"\n                        ").concat(PolyCommon.select("Target","poly_utilities_pin_target",poly_utilities_settings.targets,"_self","form-group col-md-6"),'\n                    </div>\n                    <div class="form-group">\n                        ').concat(PolyCommon.select("Hotkeys","poly_utilities_pin_hotkey_alphabet",poly_utilities_settings.alphabet,"N","col-md-6"),"\n                        ").concat(PolyCommon.select("","poly_utilities_pin_hotkey_number",poly_utilities_settings.numbers,"8","col-md-6"),"\n                    </div>\n                </div>"),focusConfirm:!1,allowOutsideClick:!1,showCancelButton:!0,showCloseButton:!0,confirmButtonColor:n.confirm_color,cancelButtonColor:n.cancel_color,confirmButtonText:n.confirm,cancelButtonText:n.cancel,preConfirm:function preConfirm(){var e=t("#poly-title").val(),o=t("#poly-link").val();return e&&o?{icon:" fa-solid fa-link",title:e,link:o,shortcut_key:"".concat(t("#poly_utilities_pin_hotkey_alphabet").val(),"+").concat(t("#poly_utilities_pin_hotkey_number").val()),target:t("#poly_utilities_pin_target").val(),rel:t("#poly_utilities_pin_rel").val()}:(Swal.showValidationMessage("".concat(n.validation_message)),!1)}});case 5:i=l.sent,(a=i.value)&&t.post(admin_url+"poly_utilities/save_quick_access",a).done((function(t){var e=t;e.title="Alert",e.showCloseButton=!0,PolyPopup.popup(e,!0)}));case 8:case"end":return l.stop()}}),_callee,this)})))))}))}var n,i,a,l,r,s,c,u,p,d,h;PolyOperationFunctions.BeforeAdminInit(),"undefined"!=typeof PolyHandleRequest&&void 0!==window.csrfData&&PolyHandleRequest.ajaxSetup(),n=t("body"),poly_utilities_settings.widgets&&PolyWidgets.Widgets("admin"),"true"==poly_utilities_settings.is_sticky&&PolyOperationFunctions.StickyBar(),PolyHandleEvents.InputFriendly([".poly-resource-name"]),"true"===poly_utilities_settings.is_operation_functions&&(i=function initOperationAjaxComplete(){PolyHandleRequest.ajaxComplete(r,s),PolyHandleRequest.ajaxComplete(a,u)},a=function processElementsContacts(e){var o=t(e).map((function(){var e;if(t(this).attr("href").trim())return t(this)})).get();t.each(o,(function(t,e){var o,n=e.prop("outerHTML");-1===n.indexOf("poly-access")&&(e.addClass("poly-access"),o=e.prop("href").trim(),l(e,o))}))},l=function processLoginAsClient(t,e){var o,n,i,a=PolyCommon.getLastNumberFromUrl(e);null!=a&&(o=t.prop("outerHTML"),n="".concat(admin_url,"clients/login_as_client/").concat(a),i='<span class="poly-block-client">'.concat(o,"&nbsp;").concat(PolyOperationFunctions.AHref(n,"clients fa-solid fa-user-lock fa-fw","Login"),"</span>"),t.replaceWith(i))},r=function processElementsCopyContent(e,o){var n=t(e).map((function(){var e;if(t(this).attr("href").replace(o,"").trim())return t(this)})).get();t.each(n,(function(t,e){var o,n=e.prop("outerHTML");-1===n.indexOf("poly-access")&&(e.addClass("poly-access"),n=e.prop("outerHTML"),o='<span class="poly-block">'.concat(n,"&nbsp;").concat(PolyOperationFunctions.Copy(e.prop("innerHTML"),"fa-regular fa-copy"),"</span>"),e.replaceWith(o))})),t(".poly-copy, .poly-copy-default").each((function(){var e=new ClipboardJS(this);t(this).off("click").on("click",(function(t){t.preventDefault()})),e.on("success",(function(t){PolyMessage.displayNotification("success","Copied!"),t.clearSelection()})).on("error",(function(t){PolyMessage.displayNotification("error","Error")}))}))},s=[['table a[href^="mailto:"]',"mailto:"],['table a[href^="tel:"]',"tel:"]],u=[[".project-overview-customer ".concat(c='a[href*="clients/client/"')],["table ".concat(c,'][href*="?contactid"]')],["table#projects.table-projects ".concat(c,"]")]],i(),t(".panel-table-full").on("click change keydown","table, button, select, input[type!=checkbox]",(function(t){i()}))),PolyCustomMenu.InitQuickAccessMenu(poly_quick_access_menu),setTimeout((function(){var e,o,n,i,a,l,r,s,c;if("true"===poly_utilities_settings.is_table_of_content&&(e=t("#description_ifr")[0])){for(o=e.contentDocument||e.contentWindow.document,n=t(".mce-toolbar-grp"),i=t("#description_ifr").offset().top-(n.length&&n.height()?n.height():0),a=[],l=o.documentElement.innerHTML.match(/<h\d[^>]*>.*?<\/h\d>/g),r=1;r<=5;r++)(s=t(o).find("h"+r)).length>0&&(a=a.concat(s.get()));c=a.map((function(e){var o=t(e),n=o.offset().top+i,a=o.prop("tagName").toLowerCase();return{head:a,offset:n,title:o.text()}})),l&&l.length>0?l.forEach((function(e){var o,n,i=t(e),a=c.find((function(t){return t.title===i.text()}));a&&(o=a.offset,n=a.head,t(".poly-table-of-content").append('<li class="item '.concat("h"+n,'" data-offset="').concat(o,'">').concat(i.text(),"</li>")))})):t(".poly-table").remove()}}),500),p=function setupStickyTable(e){e.forEach((function(e){function updateTableOfContentPosition(){var e=t(window).scrollTop(),o=Math.max(0,(t(window).height()-i.outerHeight())/2-e)||0,n="true"==poly_utilities_settings.is_sticky?poly_utilities_settings.topbar_height:0,a=o+n;i.css({top:"".concat(e<poly_utilities_settings.topbar_height?poly_utilities_settings.topbar_height:a,"px")}),t(".poly-table-of-content").css({"padding-bottom":"".concat(e<poly_utilities_settings.topbar_height?poly_utilities_settings.topbar_height:0,"px")}),t(".poly-table .header").css({top:i.css("top")})}var o=t(e),n=o.find(".panel-body"),i=t('<div class="poly-table"><div class="header">'.concat(poly_utilities_settings.table_of_content_header,'</div><ul class="poly-table-of-content"></ul></div>')).appendTo(n);t(window).scroll(updateTableOfContentPosition),updateTableOfContentPosition()}))},"true"==poly_utilities_settings.is_table_of_content&&(p(["#article-form","#project_form"]),t(document).on("click",".poly-table-of-content .item",(function(){var e=parseInt(t(this).data("offset"));t("html, body").animate({scrollTop:e},800)}))),setTimeout((function(){var e,o=document.getElementById("description_ifr");o&&o.contentDocument.addEventListener("keydown",(function(t){!t.ctrlKey||"s"!==t.key&&"S"!==t.key||PolyHandleEvents.handleCtrlS(t)})),(e=document.getElementById("content_ifr"))&&e.contentDocument.addEventListener("keydown",(function(t){!t.ctrlKey||"s"!==t.key&&"S"!==t.key||PolyHandleEvents.handleCtrlS(t)})),e||o||t(document).keydown((function(t){!t.ctrlKey||"s"!==t.key&&"S"!==t.key||PolyHandleEvents.handleCtrlS(t)}))}),300),progressProjectDetails(),d=t("table"),PolyCommon.countStringOccurrences(window.location.href,"/admin/modules")||dataTableFiltersByUser(),t(document).on("init.dt",(function(e,o,n){function initModulesStatus(t,e,o){var n="";!e&&o?n="activate":e&&!o&&(n="deactivate"),PolyDataTable.dataByKeywords(t,[n])}var i,a,l,r,s,c,u,p,d,h,f;PolyCommon.countStringOccurrences(window.location.href,"/admin/modules")&&(i=function ajax_poly_utitlies_modules_actions(e,o){t.post(admin_url+"poly_utilities/ajax_modules_activate",{data:{modules:o,action:e}}).done((function(t){try{var e;if(t)200===t.code&&window.location.reload()}catch(t){PolyMessage.displayNotification("error","Error")}}))},r=(l=(a=t("table").DataTable()).rows().nodes()).count(),s=0,c='<div class="poly-utilities-modules-action-block"><select class="poly-utilities-modules-action form-control input-sm">'+'<option value="">'.concat(poly_utilities_settings.lang.module_action_select_text,"</option>")+'<option value="activate">'.concat(poly_utilities_settings.lang.module_action_activate,"</option>")+'<option value="deactivate">'.concat(poly_utilities_settings.lang.module_action_deactivate,"</option>")+"</select>"+'<button class="poly-utilities-apply-action btn btn-default buttons-collection btn-sm">'.concat(poly_utilities_settings.lang.module_action_apply,"</button>")+"</div>",t("table thead tr").prepend('<th><input type="checkbox" id="chkPolyUtilitiesCheckAll"></th>'),l.each((function(e){var o=t(e).html();t(e).prepend('<td><input type="checkbox" class="chkPolyUtilitiesModulesItems"></td>'),PolyCommon.countStringOccurrences(o,"modules/activate")&&s++})),p=s,d='<div class="poly-utilities-modules">\n    <div class="poly-item-filter"><label class="poly-label"> <input type="checkbox" class="poly-checkbox-module poly-modules-activate" value="deactivate" data-check-helper="info" checked> <span>Activate ('.concat(u=r-s,')</span></label></div>\n    <div class="poly-item-filter"><label class="poly-label"> <input type="checkbox" class="poly-checkbox-module poly-modules-deactivate" value="activate" data-check-helper="" checked> <span>Deactivate (').concat(p,")</span></label></div></div>"),t(".app.admin.modules table").before('<div class="poly-utilities-filter relative">'.concat(d).concat(c,"</div>")),t(".app.admin.modules table").after('<div class="poly-utilities-filter relative">'.concat(d).concat(c,"</div>")),t(document).on("change",".poly-utilities-modules-action",(function(){var e=t(this).val();t(".poly-utilities-modules-action").val(e)})),t("#chkPolyUtilitiesCheckAll").on("change",(function(){var e=t(this).is(":checked");t(".chkPolyUtilitiesModulesItems").prop("checked",e)})),t("table tbody").on("change",".chkPolyUtilitiesModulesItems",(function(){var e=t(".chkPolyUtilitiesModulesItems").length===t(".chkPolyUtilitiesModulesItems:checked").length;t("#chkPolyUtilitiesCheckAll").prop("checked",e)})),t(document).on("click",".poly-utilities-apply-action",(function(){var e,o=t(this).closest(".poly-utilities-modules-action-block").find(".poly-utilities-modules-action").val(),n={showConfirmButton:!0,showCloseButton:!0,showIcon:!0};return o?(e=[],t(".chkPolyUtilitiesModulesItems:checked").each((function(){var o,n=t(this).closest("tr").find("a").first().attr("href");n&&(o=PolyUrlHelper.getLastPathSegment(n))&&e.push(o)})),0===e.length?(n.message="No modules selected",void PolyPopup.popup(n,!0)):void i(o,e)):(n.message="Please select an action.",void PolyPopup.popup(n,!0))})),h="true"===localStorage.getItem("proActivated"),f="true"===localStorage.getItem("proDeactivated"),t(".poly-modules-activate").prop("checked",h),t(".poly-modules-deactivate").prop("checked",f),initModulesStatus(a,h,f),t(document).on("change",".poly-checkbox-module",(function(){var e=t(this).closest(".poly-utilities-filter"),o=e.find(".poly-modules-activate").prop("checked"),n=e.find(".poly-modules-deactivate").prop("checked");t(".poly-modules-activate").prop("checked",o),t(".poly-modules-deactivate").prop("checked",n),localStorage.setItem("proActivated",o),localStorage.setItem("proDeactivated",n),initModulesStatus(a,o,n)})))})),"true"===poly_utilities_settings.is_quick_access_menu_icons&&(initPinQuickAccessMenu("#side-menu"),initPinQuickAccessMenu("#setup-menu")),window.addEventListener("DOMContentLoaded",(function(){function OperationFunctionsTodo(){function poly_utilities_handle_delete_project_discussion(e){requestGetJSON("projects/delete_discussion/"+e).done((function(e){alert_float(e.alert_type,e.message),t(".table-project-discussions").DataTable().ajax.reload(null,!1)}))}function poly_utilities_handle_delete_lead_note(e,o,n){requestGetJSON("leads/delete_note/"+o+"/"+n).done((function(o){!0!==o.success&&"true"!=o.success||(t(e).parents(".lead-note").remove(),_lead_init_data(o,o.id))})).fail((function(t){alert_float("danger",t.responseText)}))}t("body").off("click","._delete").on("click","._delete",(function(e){var o=this;e.preventDefault(),e.stopPropagation(),t(this).hasClass("_delete")&&(e.preventDefault(),PolyHandleEvents.confirmDelete().then((function(e){var n=t(o).attr("href");return t(o).is("a")&&n&&e&&(window.location.href=n),e})))})),t('[onclick*="delete_project_discussion"]').each((function(){var e=PolyCommon.extractNumber(t(this).attr("onclick"));t(this).removeAttr("onclick"),t(this).attr("data-poly-handle","replace"),t(this).off("click").on("click",(function(t){poly_utilities_settings.popup_delete.showConfirmButton=!0,poly_utilities_settings.popup_delete.showCancelButton=!0,PolyHandleEvents.doConfirm(t,poly_utilities_handle_delete_project_discussion,[e],poly_utilities_settings.popup_delete)}))})),t('.lead-note [onclick*="delete_lead_note"]').each((function(){var e=PolyCommon.extractNumbersToArray(t(this).attr("onclick"));t(this).removeAttr("onclick"),t(this).attr("data-poly-handle","replace"),t(this).off("click").on("click",(function(t){return poly_utilities_settings.popup_delete.showConfirmButton=!0,poly_utilities_settings.popup_delete.showCancelButton=!0,PolyHandleEvents.doConfirm(t,poly_utilities_handle_delete_lead_note,[this].concat(_toConsumableArray(e)),poly_utilities_settings.popup_delete),!1}))})),"true"===poly_utilities_settings.is_note_confirm_delete&&t('.todo-body [onclick*="delete_todo_item"], .todo-panel [onclick*="delete_todo_item"]').each((function(){var e=PolyCommon.extractNumber(t(this).attr("onclick"));t(this).removeAttr("onclick"),t(this).closest(".media-body").attr("data-id",e),t(this).attr("data-poly-handle","replace"),t(this).off("click").on("click",(function(o){poly_utilities_settings.popup_delete.showConfirmButton=!0,poly_utilities_settings.popup_delete.showCancelButton=!0,PolyHandleEvents.doConfirm(o,delete_todo_item,[t(this),e],poly_utilities_settings.popup_delete)}))})),t('.todo-body [onclick*="edit_todo_item"], .todo-panel [onclick*="edit_todo_item"]').each((function(){var e=PolyCommon.extractNumber(t(this).attr("onclick"));t(this).removeAttr("onclick"),t(this).closest(".media-body").attr("data-id",e),t(this).attr("data-poly-handle","replace"),t(this).off("click").on("click",(function(t){t.stopPropagation(),edit_todo_item(e)}))})),t(".todo-description").each((function(e,o){var n=t(o);n.addClass("cursor poly-todo-description"),n.off("click").on("click",(function(e){var o,i,a,l={},r=n.closest(".media-body").data("id");l.code=200,l.showIcon=!1,l.showCloseButton=!0,l.showConfirmButton=!1,l.showCancelButton=!1,l.cssContent="text-left",o=n.html(),(i=t("<div>").html(o)).find("a[data-poly-handle]").remove(),a=i.html(),l.message="".concat(a,'<div class="poly-tool-actions poly-cursor pull-right tw-text-sm"><i data-id="').concat(r,'" class="edit fa-regular fa-pen-to-square">&nbsp;</i>&nbsp;<i data-id="').concat(r,'" class="delete fa fa-trash">&nbsp;</i></div>'),PolyPopup.popup(l),t(".poly-tool-actions .delete").off("click").on("click",(function(e){e.stopPropagation();var o=t(this).data("id");t(this).attr("data-poly-handle","replace"),poly_utilities_settings.popup_delete.showConfirmButton=!0,poly_utilities_settings.popup_delete.showCancelButton=!0,PolyHandleEvents.doConfirm(e,delete_todo_item,[t(this),o],poly_utilities_settings.popup_delete,!0)})),t(".poly-tool-actions .edit").off("click").on("click",(function(e){e.stopPropagation();var o=t(this).data("id");t(this).attr("data-poly-handle","replace"),edit_todo_item(o)}))}))}))}var e,o,n,i,a,l,r,s,c,u,p;t("body").hasClass("page-small")||"true"!==poly_utilities_settings.is_toggle_sidebar_menu||is_mobile()||(e=function cleanPolyIconTempClasses(e){e.find("a").each((function(){var e=t(this).find("i.poly-icon-temp");e.length>0&&e.each((function(){t(this).attr("class","menu-icon")}))}))},o=function addDefaultIconToMenuItems(e,o){e.find("a").each((function(){var e,n=t(this).find("i").filter((function(){return"menu-icon"===t(this).attr("class").trim()}));n.length>0?n.addClass("".concat(o)):0===(e=t(this).find("i").filter((function(){return"menu-icon"!==t(this).attr("class").trim()}))).length&&t(this).prepend('<i class="menu-icon '.concat(o,'"></i>'))}))},n=function handleAnimation(e){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t(e).find("a > span.menu-text").each((function(){var e,n;o?t(this).attr("style")&&t(this).attr("style").includes("animation")&&(e=t(this).css("animation"),t(this).attr("data-animation",e),t(this).css("animation","")):(n=t(this).attr("data-animation"))&&(t(this).css("animation",n),t(this).removeAttr("data-animation"))}))},i=function polySidebarCollapsed(i){var a,l,r,s,c,u,p,d,h;!0===i?(t("body").removeClass("hide-sidebar").addClass("show-sidebar"),t("body").removeClass("poly-hide-sidebar").addClass("poly-show-sidebar"),0!==(l=(a=t(".poly-show-sidebar #menu")).find("#logo img.img-responsive")).length&&l.addClass("fadeIn"),n(".poly-show-sidebar",!1),0!==(r=a.find("img.favicon-collapsed")).length&&r.removeClass("fadeIn"),s=a.find('[class*="menu-item-"]'),e(s)):(t("body").removeClass("show-sidebar").addClass("hide-sidebar"),t("body").removeClass("poly-show-sidebar").addClass("poly-hide-sidebar"),poly_utilities_settings.favicon_path&&(n(".poly-hide-sidebar"),u="poly-icon-temp fa-solid fa-link fa-fw",p=(c=t(".poly-hide-sidebar #menu")).find('[class*="menu-item-"]'),o(p,u),0!==(d=c.find("#logo img.img-responsive")).length&&d.removeClass("fadeIn"),0===(h=c.find(".favicon-collapsed")).length&&(d.before('<img class="favicon-collapsed" src="'.concat(poly_utilities_settings.favicon_path,'"/>')),h=c.find(".favicon-collapsed")),h.addClass("fadeIn"))),localStorage.setItem("polySidebarCollapsed",!0===i?"poly-show-sidebar":"poly-hide-sidebar")},localStorage.getItem("polySidebarCollapsed")&&setTimeout((function(){i("poly-show-sidebar"===localStorage.getItem("polySidebarCollapsed"))}),100),t(".pinned_project a").each((function(){var e=t(this).html();t(this).hasClass("wrapper-menu-text")||t(this).html('<i class="fa fa-file"></i><span class="wrapper-menu-text">'+e+"</span>")})),t(".hide-menu").removeClass("hide-menu").addClass("poly-toggle-menu"),t(".poly-toggle-menu").on("click",(function(e){e.preventDefault(),t("body").hasClass("poly-hide-sidebar")?i(!0):i(!1),setup_menu.hasClass("display-block")&&t(".close-customizer").click()}))),(a=t("ul#setup-menu li:first").clone()).addClass("poly-setup-menu-item-close"),t("ul#setup-menu").append(a),PolyOperationFunctions.ScrollToTop([".open-customizer",".close-customizer"]),t(".pinned_project .progress-bar.no-percent-text").each((function(e,o){var n=t(o).data("percent"),i=String(n||"0");i=i.replace(/\.00/g,""),t(o).parent().after('<span class="poly-project-percent-mini">'.concat(i,"%</span>"))})),"true"===poly_utilities_settings.is_active_logout_buttons&&(l=t("li.header-user-profile").attr("title"),r='<a href="'.concat(admin_url,'/profile">').concat(l,"</a>"),0!=(s=t(".icon.header-user-profile").find("img")).lenght&&((c=s.clone()).removeClass("tw-mt-2.5 tw-ring-1 tw-ring-offset-2 tw-ring-primary-500 tw-mx-1"),c.addClass("poly-item-profile__a--img"),u='<div class="poly-item-profile"><a class="poly-item-profile__a" href="'.concat(admin_url,'/profile">').concat(c[0].outerHTML,"</a><span>").concat(r,'</span><span class="poly-profile-ico-logout"><i class="fa fa-power-off pull-right" data-toggle="tooltip" data-title="Logout" data-placement="right" onclick="logout(); return false;" data-original-title="" title=""></i></span></div>'),(p=t("#logo")).after(u))),PolyHandleRequest.ajaxComplete(OperationFunctionsTodo),t(".unfinished-loader, .finished-loader").on("click",(function(){PolyHandleRequest.ajaxComplete(OperationFunctionsTodo)})),PolyCommon.countStringOccurrences(window.location.href,"/admin/backup")&&t("a._delete").each((function(){var e,o=t(this);null!=o&&(e=o.attr("href"),o.off("click").on("click",(function(t){t.preventDefault(),t.stopPropagation();var o={icon:"error",showIcon:!0,showCloseButton:!0,showConfirmButton:!0,showCancelButton:!0,confirmButtonColor:"#FC0000"};o.link_redirect=e,o.message=poly_utilities_settings.popup_delete.message,o.title=poly_utilities_settings.popup_delete.title,PolyPopup.popup(o)})))}))})),"true"===poly_utilities_settings.is_search_menu&&(h='<div class="poly-sidebar-search-menu tw-inline-flex tw-relative dropdown tw-max-w-xl tw-flex-auto" data-placement="bottom">\n                    <input type="search" id="poly-sidebar-search" class="poly-sidebar-search tw-px-4 tw-mt-2.5 focus:!tw-ring-0 tw-w-full !tw-placeholder-neutral-400 !tw-shadow-none tw-text-neutral-800 focus:!tw-placeholder-neutral-600 hover:!tw-placeholder-neutral-600 sm:tw-w-[400px] tw-h-[40px] tw-bg-neutral-300/30 hover:tw-bg-neutral-300/50 !tw-border-0" placeholder="Search menu..." autocomplete="off">\n                    <div class="poly-sidebar-search-menu__button tw-absolute rtl:tw-left-0 -tw-mt-2 tw-top-1.5">\n                        <button class="tw-outline-none tw-border-0 tw-text-neutral-600">\n                            <i class="fa fa-search"></i>\n                        </button>\n                    </div>\n                </div>',t("#side-menu li:first").after("<li>".concat(h,"</li>")),t("#poly-sidebar-search").on("input",(function(){var e=t(this).val().toLowerCase();t("#menu li").each((function(){var o,n,i=t(this),a=!1,l=i.find('[class*="menu-text"]');l.length>0&&(o=l.html().toLowerCase(),-1!==(n=i.html().toLowerCase()).indexOf("dashboard")||-1!==n.indexOf("img-responsive")||-1!==n.indexOf("poly-sidebar-search")?a=!0:(-1!==n.indexOf(e)?a=!0:l.find("*").each((function(){if(-1!==t(this).html().toLowerCase().indexOf(e))return a=!0,!1})),a?i.show():i.hide()))}))}))),setTimeout((function(){PolyCustomMenu.InitMenusPopup()}),500),"true"!==(null===(e=poly_utilities_settings)||void 0===e?void 0:e.is_admin_breadcrumb)&&void 0!==(null===(o=poly_utilities_settings)||void 0===o?void 0:o.is_admin_breadcrumb)||setTimeout((function(){var e,o,n,i,a,l,r,s,c,u,p,d,h,f,y,m,_,v,g,b,k,w,C,x,P,T,I,j,S,E,L,A,O,B,M,H,U,F,G,D,N,q,R,W,K,V,Q,z,J,Y,$,X,Z=[{title:"Projects",url:"/admin/projects"},{title:"Clients",url:"/admin/clients"},{title:"Contracts",url:"/admin/contracts"},{title:"Expenses",url:"/admin/expenses"},{title:"Estimate Requests",url:"/admin/estimate_request"},{title:"PolyUtilities",url:"/admin/poly_utilities",is_anchor:!1},{title:"Knowledge Base",url:"/admin/knowledge_base"},{title:"Payments",url:"/admin/payments"},{title:"PolyWidgets",url:"/admin/poly_widgets"},{title:"PolyTourGuide",url:"/admin/poly_tour_guide",is_anchor:!1},{title:"Announcements",url:"/admin/announcements"},{title:"Tickets",url:"/admin/tickets"},{title:"Proposals",url:"/admin/proposals"},{title:"Estimates",url:"/admin/estimates"},{title:"Invoices",url:"/admin/invoices"},{title:"Credit Notes",url:"/admin/credit_notes"}],tt=window.location.href,et=Z.find((function(t){return tt.includes(t.url)}));if(et&&(e=document.getElementById("wrapper"))){switch(o=[],n="Dashboard",i='<a href="'.concat(PolyCommon.siteUrl(),'admin/" title="').concat(n,'">').concat(n,"</a>"),o.push(i),o.push(!1!==(null==et?void 0:et.is_anchor)?'<a href="'.concat(PolyCommon.siteUrl(!0)+et.url.trim("/"),'" title="').concat(et.title,'">').concat(et.title,"</a>"):et.title),et.title){case Z[0].title:tt.includes("/projects/view/")?(a=t('#project_view_name button[data-id="project_top"]').attr("title"))&&o.push(a):((l=t("title").html())&&o.push(l),tt.includes("/projects/project/")&&(r=PolyCommon.extractProjectIdByUrl(tt),(s=t("#name").val())&&o.push('<a href="'.concat(PolyCommon.siteUrl(!0)+et.url.trim("/"),"view/").concat(r,'" title="').concat(s,'">').concat(s,"</a>")))),(c=PolyUrlHelper.getValueByUrlParamName("group",tt))&&(u=t('.nav-tabs a[data-group="'.concat(c,'"]')).text().trim())&&o.push(u);break;case Z[1].title:(p=t("title").html())&&o.push(p),(d=PolyUrlHelper.getValueByUrlParamName("group",tt))&&(h=t('.nav-tabs a[data-group="'.concat(d,'"]')).text().trim())&&o.push(h);break;case Z[2].title:f=[],(y=t("title").html())&&f.push(y),(m=t('button[data-id="clientid"]').attr("title"))&&f.push(m),o.push(f.join(" - "));break;case Z[3].title:_=[],(v=t("title").html())&&_.push(v),(g=t("#expense_name").val())&&_.push(g),o.push(_.join(" - "));break;case Z[4].title:b=[],(k=t("title").html())&&b.push(k),(w=t("#name").val())&&b.push(w),o.push(b.join(" - "));break;case Z[5].title:C="",tt.includes("_add")&&(P=(x=t('#wrapper a[class="poly-list"]')).text().trim(),T=x.attr("href"),o.push('<a href="'.concat(T,'">').concat(P,"</a>")),C=t("#poly_utilities_resource_name").val()),(I=t("title").html())&&o.push(I),C&&o.push(C),(j=PolyUrlHelper.getValueByUrlParamName("group",tt))&&(S=t('.nav-tabs a[data-group="'.concat(j,'"]')).text().trim())&&o.push(S);break;case Z[6].title:(E=t("title").html())&&o.push(E);break;case Z[7].title:(L=t("title").html())&&o.push(L);break;case Z[8].title:(A=PolyUrlHelper.getValueByUrlParamName("group",tt))&&(O=t('.nav-tabs a[data-group="'.concat(A,'"]')).text().trim())&&o.push(O),(B=t("#name").val())&&o.push(B);break;case Z[9].title:(M=t("title").html())&&o.push(M);break;case Z[10].title:(H=t("title").html())&&o.push(H),(U=t("#name").val())&&o.push(U);break;case Z[11].title:(F=t("title").html())&&o.push(F);break;case Z[12].title:G=[],(D=t("title").html())&&G.push(D),(N=t('button[data-id="clientid"]').attr("title"))&&(G.push(N),o.push(G.join(" - ")));break;case Z[13].title:q=[],(R=t("title").html())&&q.push(R),(W=t('button[data-id="clientid"]').attr("title"))&&(q.push(W),o.push(q.join(" - ")));break;case Z[14].title:K=[],(V=t("title").html())&&K.push(V),(Q=t('button[data-id="clientid"]').attr("title"))&&(K.push(Q),o.push(K.join(" - ")));break;case Z[15].title:z=[],(J=t("title").html())&&z.push(J),(Y=t('button[data-id="clientid"]').attr("title"))&&(z.push(Y),o.push(z.join(" - ")))}($=document.createElement("div")).className="poly-breadcrumb",X="".concat(o.join(" / ")),$.innerHTML=X,e.prepend($)}}),300)}(jQuery)})();