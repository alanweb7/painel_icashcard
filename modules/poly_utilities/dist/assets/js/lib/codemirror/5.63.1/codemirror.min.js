var e,t;e=this,t=function(){"use strict";function C(p){return new RegExp("(^|\\s)"+p+"(?:$|\\s)\\s*")}function L(p){for(var g=p.childNodes.length;0<g;--g)p.removeChild(p.firstChild);return p}function k(p,g){return L(p).appendChild(g)}function M(p,g,m,y){var v,b=document.createElement(p);if(m&&(b.className=m),y&&(b.style.cssText=y),"string"==typeof g)b.appendChild(document.createTextNode(g));else if(g)for(v=0;v<g.length;++v)b.appendChild(g[v]);return b}function T(p,g,m,y){return(y=M(p,g,m,y)).setAttribute("role","presentation"),y}function N(p,g){if(3==g.nodeType&&(g=g.parentNode),p.contains)return p.contains(g);do{if((g=11==g.nodeType?g.host:g)==p)return!0}while(g=g.parentNode)}function O(){var p;try{p=document.activeElement}catch(g){p=document.body||null}for(;p&&p.shadowRoot&&p.shadowRoot.activeElement;)p=p.shadowRoot.activeElement;return p}function A(p,g){var m=p.className;C(g).test(m)||(p.className+=(m?" ":"")+g)}function D(p,g){for(var m=p.split(" "),y=0;y<m.length;y++)m[y]&&!C(m[y]).test(g)&&(g+=" "+m[y]);return g}function F(p){var g=Array.prototype.slice.call(arguments,1);return function(){return p.apply(null,g)}}function P(p,g,m){for(var y in g=g||{},p)!p.hasOwnProperty(y)||!1===m&&g.hasOwnProperty(y)||(g[y]=p[y]);return g}function E(p,g,m,y,v){var b,S,W;for(null==g&&-1==(g=p.search(/[^\s\u00a0]/))&&(g=p.length),b=y||0,S=v||0;;){if((W=p.indexOf("\t",b))<0||g<=W)return S+(g-b);S+=W-b,S+=m-S%m,b=W+1}}function I(){this.id=null,this.f=null,this.time=0,this.handler=F(this.onTimeout,this)}function R(p,g){for(var m=0;m<p.length;++m)if(p[m]==g)return m;return-1}function K(p,g,m){var y,v,b,S;for(y=0,v=0;;){if(S=(b=-1==(b=p.indexOf("\t",y))?p.length:b)-y,b==p.length||g<=v+S)return y+Math.min(S,g-v);if(v+=b-y,y=b+1,g<=(v+=m-v%m))return y}}function X(p){for(;ce.length<=p;)ce.push(Y(ce)+" ");return ce[p]}function Y(p){return p[p.length-1]}function _(p,g){for(var m=[],y=0;y<p.length;y++)m[y]=g(p[y],y);return m}function $(){}function q(p,g){return p=Object.create?Object.create(p):($.prototype=p,new $),g&&P(g,p),p}function Q(p){return/\w/.test(p)||""<p&&(p.toUpperCase()!=p.toLowerCase()||he.test(p))}function J(p,g){return g?!!(-1<g.source.indexOf("\\w")&&Q(p))||g.test(p):Q(p)}function ee(p){for(var g in p)if(p.hasOwnProperty(g)&&p[g])return;return 1}function ne(p){return 768<=p.charCodeAt(0)&&de.test(p)}function re(p,g,m){for(;(m<0?0<g:g<p.length)&&ne(p.charAt(g));)g+=m;return g}function ie(p,g,m){var y,v;for(y=m<g?-1:1;;){if(g==m)return g;if(v=(g+m)/2,(v=y<0?Math.ceil(v):Math.floor(v))==g)return p(v)?g:m;p(v)?m=v:g=v+y}}function le(p,g,m){var y,v,b;for(ge=null,v=0;v<p.length;++v){if((b=p[v]).from<g&&b.to>g)return v;b.to==g&&(b.from!=b.to&&"before"==m?y=v:ge=v),b.from==g&&(b.from!=b.to&&"before"!=m?y=v:ge=v)}return null!=y?y:ge}function fe(p,g,m){this.level=p,this.from=g,this.to=m}function pe(p,g){var m=p.order;return null==m?p.order=Ee(p.text,g):m}function ve(p,g){return p._handlers&&p._handlers[g]||He}function ye(p,g,m){var y;p.removeEventListener?p.removeEventListener(g,m,!1):p.detachEvent?p.detachEvent("on"+g,m):!(p=(y=p._handlers)&&y[g])||-1<(m=R(p,m))&&(y[g]=p.slice(0,m).concat(p.slice(m+1)))}function be(p,g){var m,y,v=ve(p,g);if(v.length)for(m=Array.prototype.slice.call(arguments,2),y=0;y<v.length;++y)v[y].apply(null,m)}function we(p,g,m){return"string"==typeof g&&(g={type:g,preventDefault:function(){this.defaultPrevented=!0}}),be(p,m||g.type,p,g),Te(g)||g.codemirrorIgnore}function xe(p){var g,m,y=p._handlers&&p._handlers.cursorActivity;if(y)for(g=p.curOp.cursorActivityHandlers||(p.curOp.cursorActivityHandlers=[]),m=0;m<y.length;++m)-1==R(g,y[m])&&g.push(y[m])}function Ce(p,g){return 0<ve(p,g).length}function Se(p){p.prototype.on=function(p,g){Re(this,p,g)},p.prototype.off=function(p,g){ye(this,p,g)}}function Le(p){p.preventDefault?p.preventDefault():p.returnValue=!1}function ke(p){p.stopPropagation?p.stopPropagation():p.cancelBubble=!0}function Te(p){return null!=p.defaultPrevented?p.defaultPrevented:0==p.returnValue}function Me(p){Le(p),ke(p)}function Ne(p){return p.target||p.srcElement}function Oe(p){var g=p.which;return null==g&&(1&p.button?g=1:2&p.button?g=3:4&p.button&&(g=2)),H&&p.ctrlKey&&1==g?3:g}function ze(p){if("string"==typeof p&&Kt.hasOwnProperty(p))p=Kt[p];else if(p&&"string"==typeof p.name&&Kt.hasOwnProperty(p.name)){var g=Kt[p.name];(p=q(g="string"==typeof g?{name:g}:g,p)).name=g.name}else{if("string"==typeof p&&/^[\w\-]+\/[\w\-]+\+xml$/.test(p))return ze("application/xml");if("string"==typeof p&&/^[\w\-]+\/[\w\-]+\+json$/.test(p))return ze("application/json")}return"string"==typeof p?{name:p}:p||{name:"null"}}function Be(p,g){var m,y,v,b,S;if(g=ze(g),!(m=St[g.name]))return Be(p,"text/plain");if(y=m(p,g),jt.hasOwnProperty(g.name))for(v in b=jt[g.name])b.hasOwnProperty(v)&&(y.hasOwnProperty(v)&&(y["_"+v]=y[v]),y[v]=b[v]);if(y.name=g.name,g.helperType&&(y.helperType=g.helperType),g.modeProps)for(S in g.modeProps)y[S]=g.modeProps[S];return y}function Ue(p,g){P(g,jt.hasOwnProperty(p)?jt[p]:jt[p]={})}function Ve(p,g){var m,y,v;if(!0===g)return g;if(p.copyState)return p.copyState(g);for(m in y={},g)(v=g[m])instanceof Array&&(v=v.concat([])),y[m]=v;return y}function Ke(p,g){for(var m;p.innerMode&&(m=p.innerMode(g))&&m.mode!=p;)g=m.state,p=m.mode;return m||{mode:p,state:g}}function je(p,g,m){return!p.startState||p.startState(g,m)}function Ye(p,g){var m,y,v,b;if((g-=p.first)<0||g>=p.size)throw new Error("There is no line "+(g+p.first)+" in the document.");for(m=p;!m.lines;)for(y=0;;++y){if(g<(b=(v=m.children[y]).chunkSize())){m=v;break}g-=b}return m.lines[g]}function _e(p,g,m){var y=[],v=g.line;return p.iter(g.line,m.line+1,(function(p){p=p.text,v==m.line&&(p=p.slice(0,m.ch)),v==g.line&&(p=p.slice(g.ch)),y.push(p),++v})),y}function $e(p,g,m){var y=[];return p.iter(g,m,(function(p){y.push(p.text)})),y}function qe(p,g){var m,y=g-p.height;if(y)for(m=p;m;m=m.parent)m.height+=y}function Ze(p){var g,m,y,v;if(null==p.parent)return null;for(m=R((g=p.parent).lines,p),y=g.parent;y;y=(g=y).parent)for(v=0;y.children[v]!=g;++v)m+=y.children[v].chunkSize();return m+g.first}function Qe(p,g){var m,y,v,b,S,W=p.first;e:do{for(m=0;m<p.children.length;++m){if(g<(v=(y=p.children[m]).height)){p=y;continue e}g-=v,W+=y.chunkSize()}return W}while(!p.lines);for(b=0;b<p.lines.length&&!(g<(S=p.lines[b].height));++b)g-=S;return W+b}function Je(p,g){return g>=p.first&&g<p.first+p.size}function et(p,g){return String(p.lineNumberFormatter(g+p.firstLineNumber))}function tt(p,g,m){if(void 0===m&&(m=null),!(this instanceof tt))return new tt(p,g,m);this.line=p,this.ch=g,this.sticky=m}function nt(p,g){return p.line-g.line||p.ch-g.ch}function rt(p,g){return p.sticky==g.sticky&&0==nt(p,g)}function it(p){return tt(p.line,p.ch)}function ot(p,g){return nt(p,g)<0?g:p}function lt(p,g){return nt(p,g)<0?p:g}function st(p,g){return Math.max(p.first,Math.min(g,p.first+p.size-1))}function at(p,g){if(g.line<p.first)return tt(p.first,0);var m=p.first+p.size-1;return g.line>m?tt(m,Ye(p,m).text.length):(p=Ye(p,(m=g).line).text.length,null==(g=m.ch)||p<g?tt(m.line,p):g<0?tt(m.line,0):m)}function ut(p,g){for(var m=[],y=0;y<g.length;y++)m[y]=at(p,g[y]);return m}function ct(p,g){this.state=p,this.lookAhead=g}function dt(p,g,m,y){var v,b,S=[p.state.modeGen],W={};for(xt(p,g.text,p.doc.mode,m,(function(p,g){return S.push(p,g)}),W,y),v=m.state,b=0;b<p.state.overlays.length;++b)!function(y){m.baseTokens=S;var b=p.state.overlays[y],H=1,z=0;m.state=!0,xt(p,g.text,b.mode,m,(function(p,g){var m,y,v;for(m=H;z<p;)p<(y=S[H])&&S.splice(H,1,p,S[H+1],y),H+=2,z=Math.min(p,y);if(g)if(b.opaque)S.splice(m,H-m,p,"overlay "+g),H=m+2;else for(;m<H;m+=2)v=S[m+1],S[m+1]=(v?v+" ":"")+"overlay "+g}),W),m.state=v,m.baseTokens=null,m.baseTokenPos=1}(b);return{styles:S,classes:W.bgClass||W.textClass?W:null}}function ft(p,g,m){var y,v,b;return g.styles&&g.styles[0]==p.state.modeGen||(y=pt(p,Ze(g)),v=g.text.length>p.options.maxHighlightLength&&Ve(p.doc.mode,y.state),b=dt(p,g,y),v&&(y.state=v),g.stateAfter=y.save(!v),g.styles=b.styles,b.classes?g.styleClasses=b.classes:g.styleClasses&&(g.styleClasses=null),m===p.doc.highlightFrontier&&(p.doc.modeFrontier=Math.max(p.doc.modeFrontier,++p.doc.highlightFrontier))),g.styles}function pt(p,g,m){var y,v,b,S=p.doc,W=p.display;return S.mode.startState?(y=function(p,g,m){var y,v,b,S,W,H,z;for(b=p.doc,S=m?-1:g-(p.doc.mode.innerMode?1e3:100),W=g;S<W;--W){if(W<=b.first)return b.first;if((z=(H=Ye(b,W-1)).stateAfter)&&(!m||W+(z instanceof ct?z.lookAhead:0)<=b.modeFrontier))return W;H=E(H.text,null,p.options.tabSize),(null==v||H<y)&&(v=W-1,y=H)}return v}(p,g,m),v=y>S.first&&Ye(S,y-1).stateAfter,b=v?en.fromSaved(S,v,y):new en(S,je(S.mode),y),S.iter(y,g,(function(m){gt(p,m.text,b);var y=b.line;m.stateAfter=y==g-1||y%5==0||y>=W.viewFrom&&y<W.viewTo?b.save():null,b.nextLine()})),m&&(S.modeFrontier=b.line),b):new en(S,!0,g)}function gt(p,g,m,y){var v=p.doc.mode,b=new Xt(g,p.options.tabSize,m);for(b.start=b.pos=y||0,""==g&&mt(v,m.state);!b.eol();)vt(v,b,m.state),b.start=b.pos}function mt(p,g){return p.blankLine?p.blankLine(g):p.innerMode&&(g=Ke(p,g)).mode.blankLine?g.mode.blankLine(g.state):void 0}function vt(p,g,m,y){var v,b;for(v=0;v<10;v++)if(y&&(y[0]=Ke(p,m).mode),b=p.token(g,m),g.pos>g.start)return b;throw new Error("Mode "+p.name+" failed to advance stream.")}function bt(p,g,m,y){var v,b,S=p.doc,W=S.mode,H=Ye(S,(g=at(S,g)).line),z=pt(p,g.line,m),B=new Xt(H.text,p.options.tabSize,z);for(y&&(b=[]);(y||B.pos<g.ch)&&!B.eol();)B.start=B.pos,v=vt(W,B,z.state),y&&b.push(new nn(B,v,Ve(S.mode,z.state)));return y?b:new nn(B,v,z.state)}function wt(p,g){var m,y;if(p)for(;m=p.match(/(?:^|\s+)line-(background-)?(\S+)/);)p=p.slice(0,m.index)+p.slice(m.index+m[0].length),null==g[y=m[1]?"bgClass":"textClass"]?g[y]=m[2]:new RegExp("(?:^|\\s)"+m[2]+"(?:$|\\s)").test(g[y])||(g[y]+=" "+m[2]);return p}function xt(p,g,m,y,v,b,S){var W,H,z,B,G,V,U,Z=m.flattenSpans;for(null==Z&&(Z=p.options.flattenSpans),W=0,H=null,z=new Xt(g,p.options.tabSize,y),B=p.options.addModeClass&&[null],""==g&&wt(mt(m,y.state),b);!z.eol();){if(V=z.pos>p.options.maxHighlightLength?(Z=!1,S&&gt(p,g,y,z.pos),z.pos=g.length,null):wt(vt(m,z,y.state,B),b),!B||(G=B[0].name)&&(V="m-"+(V?G+" "+V:G)),!Z||H!=V){for(;W<z.start;)v(W=Math.min(z.start,W+5e3),H);H=V}z.start=z.pos}for(;W<z.pos;)v(U=Math.min(z.pos,W+5e3),H),W=U}function Lt(p,g,m){this.marker=p,this.from=g,this.to=m}function kt(p,g){var m,y;if(p)for(m=0;m<p.length;++m)if((y=p[m]).marker==g)return y}function Tt(p,g){var m,y,v,b,S,W,H,z,B,G,V,U,Z,j,te,oe,se,ae;if(g.full)return null;if(m=Je(p,g.from.line)&&Ye(p,g.from.line).markedSpans,y=Je(p,g.to.line)&&Ye(p,g.to.line).markedSpans,!m&&!y)return null;if(v=g.from.ch,b=g.to.ch,S=function(p,g,m){var y,v,b,S,W;if(p)for(v=0;v<p.length;++v)W=(S=p[v]).marker,null!=S.from&&!(W.inclusiveLeft?S.from<=g:S.from<g)&&(S.from!=g||"bookmark"!=W.type||m&&S.marker.insertLeft)||(b=null==S.to||(W.inclusiveRight?S.to>=g:S.to>g),(y=y||[]).push(new Lt(W,S.from,b?null:S.to)));return y}(m,v,p=0==nt(g.from,g.to)),W=function(p,g,m){var y,v,b,S,W;if(p)for(v=0;v<p.length;++v)W=(S=p[v]).marker,null!=S.to&&!(W.inclusiveRight?S.to>=g:S.to>g)&&(S.from!=g||"bookmark"!=W.type||m&&!S.marker.insertLeft)||(b=null==S.from||(W.inclusiveLeft?S.from<=g:S.from<g),(y=y||[]).push(new Lt(W,b?null:S.from-g,null==S.to?null:S.to-g)));return y}(y,b,p),H=1==g.text.length,z=Y(g.text).length+(H?v:0),S)for(B=0;B<S.length;++B)null==(V=S[B]).to&&((G=kt(W,V.marker))?H&&(V.to=null==G.to?null:G.to+z):V.to=v);if(W)for(U=0;U<W.length;++U)null!=(Z=W[U]).to&&(Z.to+=z),null==Z.from?kt(S,Z.marker)||(Z.from=z,H&&(S=S||[]).push(Z)):(Z.from+=z,H&&(S=S||[]).push(Z));if(S=S&&Mt(S),W&&W!=S&&(W=Mt(W)),j=[S],!H){if(0<(oe=g.text.length-2)&&S)for(se=0;se<S.length;++se)null==S[se].to&&(te=te||[]).push(new Lt(S[se].marker,null,null));for(ae=0;ae<oe;++ae)j.push(te);j.push(W)}return j}function Mt(p){var g,m;for(g=0;g<p.length;++g)null!=(m=p[g]).from&&m.from==m.to&&!1!==m.marker.clearWhenEmpty&&p.splice(g--,1);return p.length?p:null}function Nt(p){var g,m=p.markedSpans;if(m){for(g=0;g<m.length;++g)m[g].marker.detachLine(p);p.markedSpans=null}}function Ot(p,g){if(g){for(var m=0;m<g.length;++m)g[m].marker.attachLine(p);p.markedSpans=g}}function At(p){return p.inclusiveLeft?-1:0}function Dt(p){return p.inclusiveRight?1:0}function Wt(p,g){var m,y,v=p.lines.length-g.lines.length;return 0!=v?v:(m=p.find(),y=g.find(),(v=nt(m.from,y.from)||At(p)-At(g))?-v:(y=nt(m.to,y.to)||Dt(p)-Dt(g))||g.id-p.id)}function Ht(p,g){var m,y,v,b=Tn&&p.markedSpans;if(b)for(v=0;v<b.length;++v)(y=b[v]).marker.collapsed&&null==(g?y.from:y.to)&&(!m||Wt(m,y.marker)<0)&&(m=y.marker);return m}function Ft(p){return Ht(p,!0)}function Pt(p){return Ht(p,!1)}function Et(p,g,m,y,v){var b,S,W,H,z,B;if(g=Ye(p,g),b=Tn&&g.markedSpans)for(S=0;S<b.length;++S)if((W=b[S]).marker.collapsed&&(z=nt((H=W.marker.find(0)).from,m)||At(W.marker)-At(v),B=nt(H.to,y)||Dt(W.marker)-Dt(v),!(0<=z&&B<=0||z<=0&&0<=B)&&(z<=0&&(W.marker.inclusiveRight&&v.inclusiveLeft?0<=nt(H.to,m):0<nt(H.to,m))||0<=z&&(W.marker.inclusiveRight&&v.inclusiveLeft?nt(H.from,y)<=0:nt(H.from,y)<0))))return 1}function It(p){for(var g;g=Ft(p);)p=g.find(-1,!0).line;return p}function Rt(p,g){var m=Ye(p,g),p;return m==(p=It(m))?g:Ze(p)}function zt(p,g){if(g>p.lastLine())return g;var m,y=Ye(p,g);if(!Bt(p,y))return g;for(;m=Pt(y);)y=m.find(1,!0).line;return Ze(y)+1}function Bt(p,g){var m,y,v=Tn&&g.markedSpans;if(v)for(y=0;y<v.length;++y)if((m=v[y]).marker.collapsed){if(null==m.from)return!0;if(!m.marker.widgetNode&&0==m.from&&m.marker.inclusiveLeft&&function e(p,g,m){var y,v,b;if(null==m.to)return e(p,(y=m.marker.find(1,!0)).line,kt(y.line.markedSpans,m.marker));if(m.marker.inclusiveRight&&m.to==g.text.length)return!0;for(v=void 0,b=0;b<g.markedSpans.length;++b)if((v=g.markedSpans[b]).marker.collapsed&&!v.marker.widgetNode&&v.from==m.to&&(null==v.to||v.to!=m.from)&&(v.marker.inclusiveLeft||m.marker.inclusiveRight)&&e(p,g,v))return!0}(p,g,m))return!0}}function Gt(p){var g,m,y,v,b,S,W;for(g=0,m=(p=It(p)).parent,y=0;y<m.lines.length&&(v=m.lines[y])!=p;++y)g+=v.height;for(b=m.parent;b;b=(m=b).parent)for(S=0;S<b.children.length&&(W=b.children[S])!=m;++S)g+=W.height;return g}function Ut(p){var g,m,y,v,b;if(0==p.height)return 0;for(m=p.text.length,y=p;g=Ft(y);)y=(v=g.find(0,!0)).from.line,m+=v.from.ch-v.to.ch;for(y=p;g=Pt(y);)b=g.find(0,!0),m-=y.text.length-b.from.ch,m+=(y=b.to.line).text.length-b.to.ch;return m}function Vt(p){var g=p.display,p=p.doc;g.maxLine=Ye(p,p.first),g.maxLineLength=Ut(g.maxLine),g.maxLineChanged=!0,p.iter((function(p){var m=Ut(p);m>g.maxLineLength&&(g.maxLineLength=m,g.maxLine=p)}))}function Yt(p,g){return!p||/^\s*$/.test(p)?null:(g=g.addModeClass?Gr:Wr)[p]||(g[p]=p.replace(/\S+/g,"cm-$&"))}function _t(p,g){var m,y,v,b=T("span",null,null,Xl?"padding-right: .1px":null),S={pre:T("pre",[b],"CodeMirror-line"),content:b,col:0,pos:0,cm:p,trailingSpace:!1,splitSpaces:p.getOption("lineWrapping")};for(g.measure={},m=0;m<=(g.rest?g.rest.length:0);m++)y=m?g.rest[m-1]:g.line,v=void 0,S.pos=0,S.addToken=qt,function(p){if(null!=Ie)return Ie;var g=k(p,document.createTextNode("AخA")),m=Z(g,0,1).getBoundingClientRect(),g=Z(g,1,2).getBoundingClientRect();return L(p),m&&m.left!=m.right&&(Ie=g.right-m.right<3)}(p.display.measure)&&(v=pe(y,p.doc.direction))&&(S.addToken=function(p,g){return function(m,y,v,b,S,W,H){var z,B,G,V;for(v=v?v+" cm-force-border":"cm-force-border",B=(z=m.pos)+y.length;;){for(G=void 0,V=0;V<g.length&&!((G=g[V]).to>z&&G.from<=z);V++);if(G.to>=B)return p(m,y,v,b,S,W,H);p(m,y.slice(0,G.to-z),v,b,null,W,H),b=null,y=y.slice(G.to-z),z=G.to}}}(S.addToken,v)),S.map=[],function(p,g,m){var y,v,b,S,W,H,z,B,G,V,U,Z,j,te,oe,se,ae,ue,ce,he,de,ge,me,De,Ae=p.markedSpans,We=p.text,Pe=0;if(Ae)for(B=We.length,G=0,V=1,U="",Z=0;;){if(Z==G){for(b=S=W=v="",H=z=null,Z=1/0,j=[],te=void 0,oe=0;oe<Ae.length;++oe)if("bookmark"==(ae=(se=Ae[oe]).marker).type&&se.from==G&&ae.widgetNode)j.push(ae);else if(se.from<=G&&(null==se.to||se.to>G||ae.collapsed&&se.to==G&&se.from==G)){if(null!=se.to&&se.to!=G&&Z>se.to&&(Z=se.to,S=""),ae.className&&(b+=" "+ae.className),ae.css&&(v=(v?v+";":"")+ae.css),ae.startStyle&&se.from==G&&(W+=" "+ae.startStyle),ae.endStyle&&se.to==Z&&(te=te||[]).push(ae.endStyle,se.to),ae.title&&((z=z||{}).title=ae.title),ae.attributes)for(ue in ae.attributes)(z=z||{})[ue]=ae.attributes[ue];ae.collapsed&&(!H||Wt(H.marker,ae)<0)&&(H=se)}else se.from>G&&Z>se.from&&(Z=se.from);if(te)for(ce=0;ce<te.length;ce+=2)te[ce+1]==Z&&(S+=" "+te[ce]);if(!H||H.from==G)for(he=0;he<j.length;++he)Zt(g,0,j[he]);if(H&&(H.from||0)==G){if(Zt(g,(null==H.to?B+1:H.to)-G,H.marker,null==H.from),null==H.to)return;H.to==G&&(H=!1)}}if(B<=G)break;for(de=Math.min(B,Z);;){if(U){if(me=G+U.length,H||(ge=de<me?U.slice(0,de-G):U,g.addToken(g,ge,y?y+b:b,W,G+ge.length==Z?S:"",v,z)),de<=me){U=U.slice(de-G),G=de;break}G=me,W=""}U=We.slice(Pe,Pe=m[V++]),y=Yt(m[V++],g.cm.options)}}else for(De=1;De<m.length;De+=2)g.addToken(g,We.slice(Pe,Pe=m[De]),Yt(m[De+1],g.cm.options))}(y,S,ft(p,y,g!=p.display.externalMeasured&&Ze(y))),y.styleClasses&&(y.styleClasses.bgClass&&(S.bgClass=D(y.styleClasses.bgClass,S.bgClass||"")),y.styleClasses.textClass&&(S.textClass=D(y.styleClasses.textClass,S.textClass||""))),0==S.map.length&&S.map.push(0,0,S.content.appendChild(function(p){null==Fe&&(g=M("span","​"),k(p,M("span",[g,document.createTextNode("x")])),0!=p.firstChild.offsetHeight&&(Fe=g.offsetWidth<=1&&2<g.offsetHeight&&!(_l&&ql<8)));var g=Fe?M("span","​"):M("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return g.setAttribute("cm-text",""),g}(p.display.measure))),0==m?(g.measure.map=S.map,g.measure.cache={}):((g.measure.maps||(g.measure.maps=[])).push(S.map),(g.measure.caches||(g.measure.caches=[])).push({}));return Xl&&(b=S.content.lastChild,(/\bcm-tab\b/.test(b.className)||b.querySelector&&b.querySelector(".cm-tab"))&&(S.content.className="cm-tab-wrap-hack")),be(p,"renderLine",p,g.line,S.pre),S.pre.className&&(S.textClass=D(S.pre.className,S.textClass||"")),S}function $t(p){var g=M("span","•","cm-invalidchar");return g.title="\\u"+p.charCodeAt(0).toString(16),g.setAttribute("aria-label",g.title),g}function qt(p,g,m,y,v,b,S){var W,H,z,B,G,V,U,Z,j,te;if(g){if(W=p.splitSpaces?function(p,g){var m,y,v,b;if(1<p.length&&!/  /.test(p))return p;for(m=g,y="",v=0;v<p.length;v++)" "!=(b=p.charAt(v))||!m||v!=p.length-1&&32!=p.charCodeAt(v+1)||(b=" "),y+=b,m=" "==b;return y}(g,p.trailingSpace):g,z=!1,(H=p.cm.state.specialChars).test(g))for(B=document.createDocumentFragment(),G=0;H.lastIndex=G,(U=(V=H.exec(g))?V.index-G:g.length-G)&&(Z=document.createTextNode(W.slice(G,G+U)),_l&&ql<9?B.appendChild(M("span",[Z])):B.appendChild(Z),p.map.push(p.pos,p.pos+U,Z),p.col+=U,p.pos+=U),V;)G+=1+U,Z=void 0,"\t"==V[0]?(U=(U=p.cm.options.tabSize)-p.col%U,(Z=B.appendChild(M("span",X(U),"cm-tab"))).setAttribute("role","presentation"),Z.setAttribute("cm-text","\t"),p.col+=U):("\r"==V[0]||"\n"==V[0]?(Z=B.appendChild(M("span","\r"==V[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",V[0]):((Z=p.cm.options.specialCharPlaceholder(V[0])).setAttribute("cm-text",V[0]),_l&&ql<9?B.appendChild(M("span",[Z])):B.appendChild(Z)),p.col+=1),p.map.push(p.pos,p.pos+1,Z),p.pos++;else p.col+=g.length,B=document.createTextNode(W),p.map.push(p.pos,p.pos+g.length,B),_l&&ql<9&&(z=!0),p.pos+=g.length;if(p.trailingSpace=32==W.charCodeAt(g.length-1),m||y||v||z||b||S){if(m=m||"",y&&(m+=y),v&&(m+=v),j=M("span",[B],m,b),S)for(te in S)S.hasOwnProperty(te)&&"style"!=te&&"class"!=te&&j.setAttribute(te,S[te]);return p.content.appendChild(j)}p.content.appendChild(B)}}function Zt(p,g,m,y){var v=!y&&m.widgetNode;v&&p.map.push(p.pos,p.pos+g,v),!y&&p.cm.display.input.needsContentAttribute&&(v=v||p.content.appendChild(document.createElement("span"))).setAttribute("cm-marker",m.id),v&&(p.cm.display.input.setUneditable(v),p.content.appendChild(v)),p.pos+=g,p.trailingSpace=!1}function Qt(p,g,m){this.line=g,this.rest=function(p){for(var g,m;g=Pt(p);)p=g.find(1,!0).line,(m=m||[]).push(p);return m}(g),this.size=this.rest?Ze(Y(this.rest))-m+1:1,this.node=this.text=null,this.hidden=Bt(p,g)}function Jt(p,g,m){var y,v,b,S;for(y=[],v=g;v<m;v=S)S=v+(b=new Qt(p.doc,Ye(p.doc,v),v)).size,y.push(b);return y}function tn(p,g){if(p=p.ownsGroup)try{!function(p){var g,m,y=p.delayedCallbacks,v=0;do{for(;v<y.length;v++)y[v].call(null);for(g=0;g<p.ops.length;g++)if((m=p.ops[g]).cursorActivityHandlers)for(;m.cursorActivityCalled<m.cursorActivityHandlers.length;)m.cursorActivityHandlers[m.cursorActivityCalled++].call(null,m.cm)}while(v<y.length)}(p)}finally{Jr=null,g(p)}}function rn(p,g){var m,y,v,b=ve(p,g);if(b.length)for(y=Array.prototype.slice.call(arguments,2),Jr?m=Jr.delayedCallbacks:ei?m=ei:(m=ei=[],setTimeout(on,0)),v=0;v<b.length;++v)!function(p){m.push((function(){return b[p].apply(null,y)}))}(v)}function on(){var p,g=ei;for(ei=null,p=0;p<g.length;++p)g[p]()}function ln(p,g,m,y){var v,b;for(v=0;v<g.changes.length;v++)"text"==(b=g.changes[v])?function(p,g){var m=g.text.className,y=an(p,g);g.text==g.node&&(g.node=y.pre),g.text.parentNode.replaceChild(y.pre,g.text),g.text=y.pre,y.bgClass!=g.bgClass||y.textClass!=g.textClass?(g.bgClass=y.bgClass,g.textClass=y.textClass,un(p,g)):m&&(g.text.className=m)}(p,g):"gutter"==b?cn(p,g,m,y):"class"==b?un(p,g):"widget"==b&&function(p,g,m){g.alignable&&(g.alignable=null);for(var y=C("CodeMirror-linewidget"),v=g.node.firstChild,b=void 0;v;v=b)b=v.nextSibling,y.test(v.className)&&g.node.removeChild(v);hn(p,g,m)}(p,g,y);g.changes=null}function sn(p){return p.node==p.text&&(p.node=M("div",null,null,"position: relative"),p.text.parentNode&&p.text.parentNode.replaceChild(p.node,p.text),p.node.appendChild(p.text),_l&&ql<8&&(p.node.style.zIndex=2)),p.node}function an(p,g){var m=p.display.externalMeasured;return m&&m.line==g.line?(p.display.externalMeasured=null,g.measure=m.measure,m.built):_t(p,g)}function un(p,g){var m,y,v=p;(m=(y=g).bgClass?y.bgClass+" "+(y.line.bgClass||""):y.line.bgClass)&&(m+=" CodeMirror-linebackground"),y.background?m?y.background.className=m:(y.background.parentNode.removeChild(y.background),y.background=null):m&&(p=sn(y),y.background=p.insertBefore(M("div",null,m),p.firstChild),v.display.input.setUneditable(y.background)),g.line.wrapClass?sn(g).className=g.line.wrapClass:g.node!=g.text&&(g.node.className=""),y=g.textClass?g.textClass+" "+(g.line.textClass||""):g.line.textClass,g.text.className=y||""}function cn(p,g,m,y){var v,b,S,W,H,z;if(g.gutter&&(g.node.removeChild(g.gutter),g.gutter=null),g.gutterBackground&&(g.node.removeChild(g.gutterBackground),g.gutterBackground=null),g.line.gutterClass&&(b=sn(g),g.gutterBackground=M("div",null,"CodeMirror-gutter-background "+g.line.gutterClass,"left: "+(p.options.fixedGutter?y.fixedPos:-y.gutterTotalWidth)+"px; width: "+y.gutterTotalWidth+"px"),p.display.input.setUneditable(g.gutterBackground),b.insertBefore(g.gutterBackground,g.text)),v=g.line.gutterMarkers,(p.options.lineNumbers||v)&&(b=sn(g),(S=g.gutter=M("div",null,"CodeMirror-gutter-wrapper","left: "+(p.options.fixedGutter?y.fixedPos:-y.gutterTotalWidth)+"px")).setAttribute("aria-hidden","true"),p.display.input.setUneditable(S),b.insertBefore(S,g.text),g.line.gutterClass&&(S.className+=" "+g.line.gutterClass),!p.options.lineNumbers||v&&v["CodeMirror-linenumbers"]||(g.lineNumber=S.appendChild(M("div",et(p.options,m),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+y.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+p.display.lineNumInnerWidth+"px"))),v))for(W=0;W<p.display.gutterSpecs.length;++W)H=p.display.gutterSpecs[W].className,(z=v.hasOwnProperty(H)&&v[H])&&S.appendChild(M("div",[z],"CodeMirror-gutter-elt","left: "+y.gutterLeft[H]+"px; width: "+y.gutterWidth[H]+"px"))}function hn(p,g,m){if(dn(p,g.line,g,m,!0),g.rest)for(var y=0;y<g.rest.length;y++)dn(p,g.rest[y],g,m,!1)}function dn(p,g,m,y,v){var b,S,W,H,z;if(g.widgets)for(b=sn(m),S=0,W=g.widgets;S<W.length;++S)z=M("div",[(H=W[S]).node],"CodeMirror-linewidget"+(H.className?" "+H.className:"")),H.handleMouseEvents||z.setAttribute("cm-ignore-events","true"),function(p,g,m,y){p.noHScroll&&((m.alignable||(m.alignable=[])).push(g),m=y.wrapperWidth,g.style.left=y.fixedPos+"px",p.coverGutter||(m-=y.gutterTotalWidth,g.style.paddingLeft=y.gutterTotalWidth+"px"),g.style.width=m+"px"),p.coverGutter&&(g.style.zIndex=5,g.style.position="relative",p.noHScroll||(g.style.marginLeft=-y.gutterTotalWidth+"px"))}(H,z,m,y),p.display.input.setUneditable(z),v&&H.above?b.insertBefore(z,m.gutter||m.text):b.appendChild(z),rn(H,"redraw")}function fn(p){if(null!=p.height)return p.height;var g,m=p.doc.cm;return m?(N(document.body,p.node)||(g="position: relative;",p.coverGutter&&(g+="margin-left: -"+m.display.gutters.offsetWidth+"px;"),p.noHScroll&&(g+="width: "+m.display.wrapper.clientWidth+"px;"),k(m.display.measure,M("div",[p.node],null,g))),p.height=p.node.parentNode.offsetHeight):0}function pn(p,g){for(var m=Ne(g);m!=p.wrapper;m=m.parentNode)if(!m||1==m.nodeType&&"true"==m.getAttribute("cm-ignore-events")||m.parentNode==p.sizer&&m!=p.mover)return 1}function gn(p){return p.lineSpace.offsetTop}function mn(p){return p.mover.offsetHeight-p.lineSpace.offsetHeight}function vn(p){if(p.cachedPaddingH)return p.cachedPaddingH;var g=k(p.measure,M("pre","x","CodeMirror-line-like")),g=window.getComputedStyle?window.getComputedStyle(g):g.currentStyle,g={left:parseInt(g.paddingLeft),right:parseInt(g.paddingRight)};return isNaN(g.left)||isNaN(g.right)||(p.cachedPaddingH=g),g}function yn(p){return te-p.display.nativeBarWidth}function bn(p){return p.display.scroller.clientWidth-yn(p)-p.display.barWidth}function wn(p){return p.display.scroller.clientHeight-yn(p)-p.display.barHeight}function xn(p,g,m){var y,v;if(p.line==g)return{map:p.measure.map,cache:p.measure.cache};for(y=0;y<p.rest.length;y++)if(p.rest[y]==g)return{map:p.measure.maps[y],cache:p.measure.caches[y]};for(v=0;v<p.rest.length;v++)if(Ze(p.rest[v])>m)return{map:p.measure.maps[v],cache:p.measure.caches[v],before:!0}}function Cn(p,g,m,y){return kn(p,Ln(p,g),m,y)}function Sn(p,g){return g>=p.display.viewFrom&&g<p.display.viewTo?p.display.view[er(p,g)]:(p=p.display.externalMeasured)&&g>=p.lineN&&g<p.lineN+p.size?p:void 0}function Ln(p,g){var m,y,v=Ze(g),b=Sn(p,v);return b&&!b.text?b=null:b&&b.changes&&(ln(p,b,v,$n(p)),p.curOp.forceUpdate=!0),b||(m=p,p=Ze(y=It(y=g)),(y=m.display.externalMeasured=new Qt(m.doc,y,p)).lineN=p,p=y.built=_t(m,y),y.text=p.pre,k(m.display.lineMeasure,p.pre),b=y),{line:g,view:b,rect:null,map:(v=xn(b,g,v)).map,cache:v.cache,before:v.before,hasHeights:!1}}function kn(p,g,m,y,v){var b,S=(m=g.before?-1:m)+(y||"");return g.cache.hasOwnProperty(S)?b=g.cache[S]:(g.rect||(g.rect=g.view.text.getBoundingClientRect()),g.hasHeights||(function(p,g,m){var y,v,b,S,W,H=p.options.lineWrapping;if(p=H&&bn(p),!g.measure.heights||H&&g.measure.width!=p){if(y=g.measure.heights=[],H)for(g.measure.width=p,v=g.text.firstChild.getClientRects(),b=0;b<v.length-1;b++)S=v[b],W=v[b+1],2<Math.abs(S.bottom-W.bottom)&&y.push((S.bottom+W.top)/2-m.top);y.push(m.bottom-m.top)}}(p,g.view,g.rect),g.hasHeights=!0),(b=function(p,g,m,y){var v,b,S,W,H,z,B,G,V=Nn(g.map,m,y),U=V.node,j=V.start,te=V.end,oe=V.collapse;if(3==U.nodeType){for(b=0;b<4;b++){for(;j&&ne(g.line.text.charAt(V.coverStart+j));)--j;for(;V.coverStart+te<V.coverEnd&&ne(g.line.text.charAt(V.coverStart+te));)++te;if((v=_l&&ql<9&&0==j&&te==V.coverEnd-V.coverStart?U.parentNode.getBoundingClientRect():function(p,g){var m,y,v=oi;if("left"==g)for(m=0;m<p.length&&(v=p[m]).left==v.right;m++);else for(y=p.length-1;0<=y&&(v=p[y]).left==v.right;y--);return v}(Z(U,j,te).getClientRects(),y)).left||v.right||0==j)break;te=j,j-=1,oe="right"}_l&&ql<11&&(v=function(p,g){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(p){if(null!=Ct)return Ct;var p=(g=k(p,M("span","x"))).getBoundingClientRect(),g=Z(g,0,1).getBoundingClientRect();return Ct=1<Math.abs(p.left-g.left)}(p))return g;var m=screen.logicalXDPI/screen.deviceXDPI,p=screen.logicalYDPI/screen.deviceYDPI;return{left:g.left*m,right:g.right*m,top:g.top*p,bottom:g.bottom*p}}(p.display.measure,v))}else 0<j&&(oe=y="right"),v=p.options.lineWrapping&&1<(B=U.getClientRects()).length?B["right"==y?B.length-1:0]:U.getBoundingClientRect();for(!(_l&&ql<9)||j||v&&(v.left||v.right)||(v=(G=U.parentNode.getClientRects()[0])?{left:G.left,right:G.left+_n(p.display),top:G.top,bottom:G.bottom}:oi),W=((S=v.top-g.rect.top)+(m=v.bottom-g.rect.top))/2,H=g.view.measure.heights,z=0;z<H.length-1&&!(W<H[z]);z++);return B=z?H[z-1]:0,G=H[z],G={left:("right"==oe?v.right:v.left)-g.rect.left,right:("left"==oe?v.left:v.right)-g.rect.left,top:B,bottom:G},v.left||v.right||(G.bogus=!0),p.options.singleCursorHeightPerLine||(G.rtop=S,G.rbottom=m),G}(p,g,m,y)).bogus||(g.cache[S]=b)),{left:b.left,right:b.right,top:v?b.rtop:b.top,bottom:v?b.rbottom:b.bottom}}function Nn(p,g,m){for(var y,v,b,S,W,H,z=0;z<p.length;z+=3)if(W=p[z],H=p[z+1],g<W?(v=0,b=1,S="left"):g<H?b=1+(v=g-W):(z==p.length-3||g==H&&p[z+3]>g)&&(v=(b=H-W)-1,H<=g&&(S="right")),null!=v){if(y=p[z+2],W==H&&m==(y.insertLeft?"left":"right")&&(S=m),"left"==m&&0==v)for(;z&&p[z-2]==p[z-3]&&p[z-1].insertLeft;)y=p[2+(z-=3)],S="left";if("right"==m&&v==H-W)for(;z<p.length-3&&p[z+3]==p[z+4]&&!p[z+5].insertLeft;)y=p[(z+=3)+2],S="right";break}return{node:y,start:v,end:b,collapse:S,coverStart:W,coverEnd:H}}function On(p){if(p.measure&&(p.measure.cache={},p.measure.heights=null,p.rest))for(var g=0;g<p.rest.length;g++)p.measure.caches[g]={}}function An(p){p.display.externalMeasure=null,L(p.display.lineMeasure);for(var g=0;g<p.display.view.length;g++)On(p.display.view[g])}function Dn(p){An(p),p.display.cachedCharWidth=p.display.cachedTextHeight=p.display.cachedPaddingH=null,p.options.lineWrapping||(p.display.maxLineChanged=!0),p.display.lineNumChars=null}function Wn(){return p&&S?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Hn(){return p&&S?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Fn(p){var g,m=0;if(p.widgets)for(g=0;g<p.widgets.length;++g)p.widgets[g].above&&(m+=fn(p.widgets[g]));return m}function Pn(p,g,m,y,v){return v||(v=Fn(g),m.top+=v,m.bottom+=v),"line"==y||(y=y||"local",g=Gt(g),"local"==y?g+=gn(p.display):g-=p.display.viewOffset,"page"!=y&&"window"!=y||(g+=(p=p.display.lineSpace.getBoundingClientRect()).top+("window"==y?0:Hn()),y=p.left+("window"==y?0:Wn()),m.left+=y,m.right+=y),m.top+=g,m.bottom+=g),m}function En(p,g,m){if("div"==m)return g;var y=g.left,g=g.top;return"page"==m?(y-=Wn(),g-=Hn()):"local"!=m&&m||(y+=(m=p.display.sizer.getBoundingClientRect()).left,g+=m.top),{left:y-(p=p.display.lineSpace.getBoundingClientRect()).left,top:g-p.top}}function In(p,g,m,y,v){return Pn(p,y=y||Ye(p.doc,g.line),Cn(p,y,g.ch,v),m)}function Rn(p,g,m,y,v,b){function s(g,S){return g=kn(p,v,g,S?"right":"left",b),S?g.left=g.right:g.right=g.left,Pn(p,y,g,m)}function c(p,g,m){return s(m?p-1:p,1==S[g].level!=m)}var S,W,H,z;return y=y||Ye(p.doc,g.line),v=v||Ln(p,y),S=pe(y,p.doc.direction),W=g.ch,H=g.sticky,W>=y.text.length?(W=y.text.length,H="before"):W<=0&&(W=0,H="after"),S?(z=le(S,W,H),g=ge,z=c(W,z,"before"==H),null!=g&&(z.other=c(W,g,"before"!=H)),z):s("before"==H?W-1:W,"before"==H)}function zn(p,g){var m=0;return g=at(p.doc,g),p.options.lineWrapping||(m=_n(p.display)*g.ch),{left:m,right:m,top:p=Gt(g=Ye(p.doc,g.line))+gn(p.display),bottom:p+g.height}}function Bn(p,g,m,y,v){return(m=tt(p,g,m)).xRel=v,y&&(m.outside=y),m}function Gn(p,g,m){var y,v,b,S,W,H=p.doc;if((m+=p.display.viewOffset)<0)return Bn(H.first,0,null,-1,-1);if(y=Qe(H,m),(v=H.first+H.size-1)<y)return Bn(H.first+H.size-1,Ye(H,v).text.length,null,1,1);for(g<0&&(g=0),b=Ye(H,y);;){if(S=function(p,g,m,y,v){var b,S,W,H,z,B,G,V,U,Z,j;return v-=Gt(g),b=Ln(p,g),S=Fn(g),W=0,H=g.text.length,z=!0,(B=pe(g,p.doc.direction))&&(W=(z=1!=(U=(p.options.lineWrapping?Xn:jn)(p,g,m,b,B,y,v)).level)?U.from:U.to-1,H=z?U.to:U.from-1),G=null,V=null,B=ie((function(g){var m=kn(p,b,g);return m.top+=S,m.bottom+=S,Kn(m,y,v,!1)&&(m.top<=v&&m.left<=y&&(G=g,V=m),1)}),W,H),U=!1,V?(Z=y-V.left<V.right-y,B=G+((j=Z==z)?0:1),j=j?"after":"before",Z=Z?V.left:V.right):(z||B!=H&&B!=W||B++,j=0==B||B!=g.text.length&&kn(p,b,B-(z?1:0)).bottom+S<=v==z?"after":"before",Z=(z=Rn(p,tt(m,B,j),"line",g,b)).left,U=v<z.top?-1:v>=z.bottom?1:0),Bn(m,B=re(g.text,B,1),j,U,y-Z)}(p,b,y,g,m),W=function(p,g){var m,y,v,b=Tn&&p.markedSpans;if(b)for(y=0;y<b.length;++y)(v=b[y]).marker.collapsed&&(null==v.from||v.from<g)&&(null==v.to||v.to>g)&&(!m||Wt(m,v.marker)<0)&&(m=v.marker);return m}(b,S.ch+(0<S.xRel||0<S.outside?1:0)),!W)return S;if((W=W.find(1)).line==y)return W;b=Ye(H,y=W.line)}}function Un(p,g,m,y){y-=Fn(g);var v=g.text.length,g;return{begin:g=ie((function(g){return kn(p,m,g-1).bottom<=y}),v,0),end:v=ie((function(g){return kn(p,m,g).top>y}),g,v)}}function Vn(p,g,m,y){return Un(p,g,m=m||Ln(p,g),Pn(p,g,kn(p,m,y),"line").top)}function Kn(p,g,m,y){return!(p.bottom<=m)&&(p.top>m||(y?p.left:p.right)>g)}function jn(p,g,m,y,v,b,S){var W,H=ie((function(W){var H=v[W],W=1!=H.level;return Kn(Rn(p,tt(m,W?H.to:H.from,W?"before":"after"),"line",g,y),b,S,!0)}),0,v.length-1),z=v[H];return 0<H&&(W=1!=z.level,Kn(W=Rn(p,tt(m,W?z.from:z.to,W?"after":"before"),"line",g,y),b,S,!0)&&W.top>S&&(z=v[H-1])),z}function Xn(p,g,m,y,v,b,S){var W,H,z,B,G,V,U;for(W=(S=Un(p,g,y,S)).begin,H=S.end,/\s/.test(g.text.charAt(H-1))&&H--,z=null,B=null,G=0;G<v.length;G++)(U=v[G]).from>=H||U.to<=W||(V=(V=kn(p,y,1!=U.level?Math.min(H,U.to)-1:Math.max(W,U.from)).right)<b?b-V+1e9:V-b,(!z||V<B)&&(z=U,B=V));return(z=(z=z||v[v.length-1]).from<W?{from:W,to:z.to,level:z.level}:z).to>H?{from:z.from,to:H,level:z.level}:z}function Yn(p){var g,m;if(null!=p.cachedTextHeight)return p.cachedTextHeight;if(null==ii){for(ii=M("pre",null,"CodeMirror-line-like"),g=0;g<49;++g)ii.appendChild(document.createTextNode("x")),ii.appendChild(M("br"));ii.appendChild(document.createTextNode("x"))}return k(p.measure,ii),3<(m=ii.offsetHeight/50)&&(p.cachedTextHeight=m),L(p.measure),m||1}function _n(p){if(null!=p.cachedCharWidth)return p.cachedCharWidth;var g=M("span","xxxxxxxxxx"),m=M("pre",[g],"CodeMirror-line-like");return k(p.measure,m),2<(g=((g=g.getBoundingClientRect()).right-g.left)/10)&&(p.cachedCharWidth=g),g||10}function $n(p){var g,m,y,v,b,S,W;for(m={},y={},v=(g=p.display).gutters.clientLeft,b=g.gutters.firstChild,S=0;b;b=b.nextSibling,++S)m[W=p.display.gutterSpecs[S].className]=b.offsetLeft+b.clientLeft+v,y[W]=b.clientWidth;return{fixedPos:qn(g),gutterTotalWidth:g.gutters.offsetWidth,gutterLeft:m,gutterWidth:y,wrapperWidth:g.wrapper.clientWidth}}function qn(p){return p.scroller.getBoundingClientRect().left-p.sizer.getBoundingClientRect().left}function Zn(p){var g=Yn(p.display),m=p.options.lineWrapping,y=m&&Math.max(5,p.display.scroller.clientWidth/_n(p.display)-3);return function(v){var b,S;if(Bt(p.doc,v))return 0;if(b=0,v.widgets)for(S=0;S<v.widgets.length;S++)v.widgets[S].height&&(b+=v.widgets[S].height);return m?b+(Math.ceil(v.text.length/y)||1)*g:b+g}}function Qn(p){var g=p.doc,m=Zn(p);g.iter((function(p){var g=m(p);g!=p.height&&qe(p,g)}))}function Jn(p,g,m,y){var v,b,S,W=p.display;if(!m&&"true"==Ne(g).getAttribute("cm-not-content"))return null;W=W.lineSpace.getBoundingClientRect();try{v=g.clientX-W.left,S=g.clientY-W.top}catch(p){return null}return S=Gn(p,v,S),y&&0<S.xRel&&(b=Ye(p.doc,S.line).text).length==S.ch&&(b=E(b,b.length,p.options.tabSize)-b.length,S=tt(S.line,Math.max(0,Math.round((v-vn(p.display).left)/_n(p.display))-b))),S}function er(p,g){if(g>=p.display.viewTo)return null;if((g-=p.display.viewFrom)<0)return null;for(var m=p.display.view,y=0;y<m.length;y++)if((g-=m[y].size)<0)return y}function tr(p,g,m,y){null==g&&(g=p.doc.first),null==m&&(m=p.doc.first+p.doc.size);var v,b,S=p.display;(y=y||0)&&m<S.viewTo&&(null==S.updateLineNumbers||S.updateLineNumbers>g)&&(S.updateLineNumbers=g),p.curOp.viewChanged=!0,g>=S.viewTo?Tn&&Rt(p.doc,g)<S.viewTo&&rr(p):m<=S.viewFrom?Tn&&zt(p.doc,m+y)>S.viewFrom?rr(p):(S.viewFrom+=y,S.viewTo+=y):g<=S.viewFrom&&m>=S.viewTo?rr(p):g<=S.viewFrom?(v=ir(p,m,m+y,1))?(S.view=S.view.slice(v.index),S.viewFrom=v.lineN,S.viewTo+=y):rr(p):m>=S.viewTo?(b=ir(p,g,g,-1))?(S.view=S.view.slice(0,b.index),S.viewTo=b.lineN):rr(p):(v=ir(p,g,g,-1),b=ir(p,m,m+y,1),v&&b?(S.view=S.view.slice(0,v.index).concat(Jt(p,v.lineN,b.lineN)).concat(S.view.slice(b.index)),S.viewTo+=y):rr(p)),(p=S.externalMeasured)&&(m<p.lineN?p.lineN+=y:g<p.lineN+p.size&&(S.externalMeasured=null))}function nr(p,g,m){p.curOp.viewChanged=!0;var y=p.display,v=p.display.externalMeasured;v&&g>=v.lineN&&g<v.lineN+v.size&&(y.externalMeasured=null),g<y.viewFrom||g>=y.viewTo||null==(g=y.view[er(p,g)]).node||-1==R(g=g.changes||(g.changes=[]),m)&&g.push(m)}function rr(p){p.display.viewFrom=p.display.viewTo=p.doc.first,p.display.view=[],p.display.viewOffset=0}function ir(p,g,m,y){var v,b,S,W=er(p,g),H=p.display.view;if(!Tn||m==p.doc.first+p.doc.size)return{index:W,lineN:m};for(b=p.display.viewFrom,S=0;S<W;S++)b+=H[S].size;if(b!=g){if(0<y){if(W==H.length-1)return null;v=b+H[W].size-g,W++}else v=b-g;g+=v,m+=v}for(;Rt(p.doc,m)!=m;){if(W==(y<0?0:H.length-1))return null;m+=y*H[W-(y<0?1:0)].size,W+=y}return{index:W,lineN:m}}function or(p){var g,m,y,v;for(g=p.display.view,m=0,y=0;y<g.length;y++)(v=g[y]).hidden||v.node&&!v.changes||++m;return m}function lr(p){p.display.input.showSelection(p.display.input.prepareSelection())}function sr(p,g){void 0===g&&(g=!0);for(var m,y,v=p.doc,b={},S=b.cursors=document.createDocumentFragment(),W=b.selection=document.createDocumentFragment(),H=0;H<v.sel.ranges.length;H++)!g&&H==v.sel.primIndex||(m=v.sel.ranges[H]).from().line>=p.display.viewTo||m.to().line<p.display.viewFrom||(((y=m.empty())||p.options.showCursorWhenSelecting)&&ar(p,m.head,S),y||function(p,g,m){function T(p,g,m,y){g<0&&(g=0),g=Math.round(g),y=Math.round(y),b.appendChild(M("div",null,"CodeMirror-selected","position: absolute; left: "+p+"px;\n                             top: "+g+"px; width: "+(null==m?H-p:m)+"px;\n                             height: "+(y-g)+"px"))}function s(g,m,y){function w(m,y){return In(p,tt(g,m),"div",B,y)}function x(g,m,y){return g=Vn(p,B,null,g),m="ltr"==m==("after"==y)?"left":"right",w("after"==y?g.begin:g.end-(/\s/.test(B.text.charAt(g.end-1))?2:1),m)[m]}var b,S,B=Ye(v,g),G=B.text.length,V=pe(B,v.direction);return function(p,g,m,y){var v,b,S;if(!p)return y(g,m,"ltr",0);for(v=!1,b=0;b<p.length;++b)((S=p[b]).from<m&&S.to>g||g==m&&S.to==g)&&(y(Math.max(S.from,g),Math.min(S.to,m),1==S.level?"rtl":"ltr",b),v=!0);v||y(g,m,"ltr")}(V,m||0,null==y?G:y,(function(p,g,v,B){var U,Z,j,te,oe="ltr"==v,se=w(p,oe?"left":"right"),ae=w(g-1,oe?"right":"left"),ue=null==m&&0==p,ce=null==y&&g==G,he=0==B,de=!V||B==V.length-1;ae.top-se.top<=3?(U=(z?ue:ce)&&he?W:(oe?se:ae).left,B=(z?ce:ue)&&de?H:(oe?ae:se).right,T(U,se.top,B-U,se.bottom)):(v=oe?(Z=z&&ue&&he?W:se.left,j=z?H:x(p,v,"before"),te=z?W:x(g,v,"after"),z&&ce&&de?H:ae.right):(Z=z?x(p,v,"before"):W,j=!z&&ue&&he?H:se.right,te=!z&&ce&&de?W:ae.left,z?x(g,v,"after"):H),T(Z,se.top,j-Z,se.bottom),se.bottom<ae.top&&T(W,se.bottom,null,ae.top),T(te,ae.top,v-te,ae.bottom)),(!b||ur(se,b)<0)&&(b=se),ur(ae,b)<0&&(b=ae),(!S||ur(se,S)<0)&&(S=se),ur(ae,S)<0&&(S=ae)})),{start:b,end:S}}var y=p.display,v=p.doc,b=document.createDocumentFragment(),S=vn(p.display),W=S.left,H=Math.max(y.sizerWidth,bn(p)-y.sizer.offsetLeft)-S.right,z="ltr"==v.direction,B=g.from();y=g.to(),B.line==y.line?s(B.line,B.ch,y.ch):(S=Ye(v,B.line),g=Ye(v,y.line),g=It(S)==It(g),S=s(B.line,B.ch,g?S.text.length+1:null).end,y=s(y.line,g?0:null,y.ch).start,g&&(S.top<y.top-2?(T(S.right,S.top,null,S.bottom),T(W,y.top,y.left,y.bottom)):T(S.right,S.top,y.left-S.right,S.bottom)),S.bottom<y.top&&T(W,S.bottom,null,y.top)),m.appendChild(b)}(p,m,W));return b}function ar(p,g,m){var y=Rn(p,g,"div",null,null,!p.options.singleCursorHeightPerLine),v=m.appendChild(M("div"," ","CodeMirror-cursor"));v.style.left=y.left+"px",v.style.top=y.top+"px",v.style.height=Math.max(0,y.bottom-y.top)*p.options.cursorHeight+"px",!/\bcm-fat-cursor\b/.test(p.getWrapperElement().className)||0<(g=In(p,g,"div",null,null)).right-g.left&&(v.style.width=g.right-g.left+"px"),y.other&&((m=m.appendChild(M("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"))).style.display="",m.style.left=y.other.left+"px",m.style.top=y.other.top+"px",m.style.height=.85*(y.other.bottom-y.other.top)+"px")}function ur(p,g){return p.top-g.top||p.left-g.left}function cr(p){var g,m;p.state.focused&&(g=p.display,clearInterval(g.blinker),m=!0,g.cursorDiv.style.visibility="",0<p.options.cursorBlinkRate?g.blinker=setInterval((function(){p.hasFocus()||pr(p),g.cursorDiv.style.visibility=(m=!m)?"":"hidden"}),p.options.cursorBlinkRate):p.options.cursorBlinkRate<0&&(g.cursorDiv.style.visibility="hidden"))}function hr(p){p.hasFocus()||(p.display.input.focus(),p.state.focused||fr(p))}function dr(p){p.state.delayingBlurEvent=!0,setTimeout((function(){p.state.delayingBlurEvent&&(p.state.delayingBlurEvent=!1,p.state.focused&&pr(p))}),100)}function fr(p,g){p.state.delayingBlurEvent&&!p.state.draggingText&&(p.state.delayingBlurEvent=!1),"nocursor"!=p.options.readOnly&&(p.state.focused||(be(p,"focus",p,g),p.state.focused=!0,A(p.display.wrapper,"CodeMirror-focused"),p.curOp||p.display.selForContextMenu==p.doc.sel||(p.display.input.reset(),Xl&&setTimeout((function(){return p.display.input.reset(!0)}),20)),p.display.input.receivedFocus()),cr(p))}function pr(p,g){p.state.delayingBlurEvent||(p.state.focused&&(be(p,"blur",p,g),p.state.focused=!1,U(p.display.wrapper,"CodeMirror-focused")),clearInterval(p.display.blinker),setTimeout((function(){p.state.focused||(p.display.shift=!1)}),150))}function gr(p){var g,m,y,v,b,S,W,H,z,B,G,V,U;for(m=(g=p.display).lineDiv.offsetTop,y=Math.max(0,g.scroller.getBoundingClientRect().top),v=g.lineDiv.getBoundingClientRect().top,b=0,S=0;S<g.view.length;S++)if(H=g.view[S],z=p.options.lineWrapping,B=void 0,G=0,!H.hidden){if(v+=H.line.height,_l&&ql<8?(B=(W=H.node.offsetTop+H.node.offsetHeight)-m,m=W):(B=(V=H.node.getBoundingClientRect()).bottom-V.top,!z&&H.text.firstChild&&(G=H.text.firstChild.getBoundingClientRect().right-V.left-1)),(.005<(V=H.line.height-B)||V<-.005)&&(v<y&&(b-=V),qe(H.line,B),mr(H.line),H.rest))for(U=0;U<H.rest.length;U++)mr(H.rest[U]);G>p.display.sizerWidth&&(G=Math.ceil(G/_n(p.display)))>p.display.maxLineLength&&(p.display.maxLineLength=G,p.display.maxLine=H.line,p.display.maxLineChanged=!0)}2<Math.abs(b)&&(g.scroller.scrollTop+=b)}function mr(p){var g,m,y;if(p.widgets)for(g=0;g<p.widgets.length;++g)(y=(m=p.widgets[g]).node.parentNode)&&(m.height=y.offsetHeight)}function vr(p,g,m){var y=m&&null!=m.top?Math.max(0,m.top):p.scroller.scrollTop,y=Math.floor(y-gn(p)),v=m&&null!=m.bottom?m.bottom:y+p.wrapper.clientHeight,b=Qe(g,y),y=Qe(g,v);return m&&m.ensure&&(v=m.ensure.from.line,m=m.ensure.to.line,v<b?y=Qe(g,Gt(Ye(g,b=v))+p.wrapper.clientHeight):Math.min(m,g.lastLine())>=y&&(b=Qe(g,Gt(Ye(g,m))-p.wrapper.clientHeight),y=m)),{from:b,to:Math.max(y,b+1)}}function yr(p,g){var m,y,v,b,S,W,H=p.display,z=Yn(p.display);return g.top<0&&(g.top=0),m=(p.curOp&&null!=p.curOp.scrollTop?p.curOp:H.scroller).scrollTop,y=wn(p),v={},g.bottom-g.top>y&&(g.bottom=g.top+y),b=p.doc.height+mn(H),S=g.top<z,z=g.bottom>b-z,g.top<m?v.scrollTop=S?0:g.top:g.bottom>m+y&&(W=Math.min(g.top,(z?b:g.bottom)-y))!=m&&(v.scrollTop=W),m=p.options.fixedGutter?0:H.gutters.offsetWidth,W=p.curOp&&null!=p.curOp.scrollLeft?p.curOp.scrollLeft:H.scroller.scrollLeft-m,p=bn(p)-H.gutters.offsetWidth,(H=g.right-g.left>p)&&(g.right=g.left+p),g.left<10?v.scrollLeft=0:g.left<W?v.scrollLeft=Math.max(0,g.left+m-(H?0:10)):g.right>p+W-3&&(v.scrollLeft=g.right+(H?0:10)-p),v}function br(p,g){null!=g&&(Cr(p),p.curOp.scrollTop=(null==p.curOp.scrollTop?p.doc:p.curOp).scrollTop+g)}function wr(p){Cr(p);var g=p.getCursor();p.curOp.scrollToPos={from:g,to:g,margin:p.options.cursorScrollMargin}}function xr(p,g,m){null==g&&null==m||Cr(p),null!=g&&(p.curOp.scrollLeft=g),null!=m&&(p.curOp.scrollTop=m)}function Cr(p){var g=p.curOp.scrollToPos;g&&(p.curOp.scrollToPos=null,Sr(p,zn(p,g.from),zn(p,g.to),g.margin))}function Sr(p,g,m,y){xr(p,(y=yr(p,{left:Math.min(g.left,m.left),top:Math.min(g.top,m.top)-y,right:Math.max(g.right,m.right),bottom:Math.max(g.bottom,m.bottom)+y})).scrollLeft,y.scrollTop)}function Lr(p,g){Math.abs(p.doc.scrollTop-g)<2||(Ul||Kr(p,{top:g}),kr(p,g,!0),Ul&&Kr(p),zr(p,100))}function kr(p,g,m){g=Math.max(0,Math.min(p.display.scroller.scrollHeight-p.display.scroller.clientHeight,g)),p.display.scroller.scrollTop==g&&!m||(p.doc.scrollTop=g,p.display.scrollbars.setScrollTop(g),p.display.scroller.scrollTop!=g&&(p.display.scroller.scrollTop=g))}function Tr(p,g,m,y){g=Math.max(0,Math.min(g,p.display.scroller.scrollWidth-p.display.scroller.clientWidth)),(m?g==p.doc.scrollLeft:Math.abs(p.doc.scrollLeft-g)<2)&&!y||(p.doc.scrollLeft=g,Yr(p),p.display.scroller.scrollLeft!=g&&(p.display.scroller.scrollLeft=g),p.display.scrollbars.setScrollLeft(g))}function Mr(p){var g=p.display,m=g.gutters.offsetWidth,y=Math.round(p.doc.height+mn(p.display));return{clientHeight:g.scroller.clientHeight,viewHeight:g.wrapper.clientHeight,scrollWidth:g.scroller.scrollWidth,clientWidth:g.scroller.clientWidth,viewWidth:g.wrapper.clientWidth,barLeft:p.options.fixedGutter?m:0,docHeight:y,scrollHeight:y+yn(p)+g.barHeight,nativeBarWidth:g.nativeBarWidth,gutterWidth:m}}function Nr(p,g){var m,y,v;for(g=g||Mr(p),m=p.display.barWidth,y=p.display.barHeight,Or(p,g),v=0;v<4&&m!=p.display.barWidth||y!=p.display.barHeight;v++)m!=p.display.barWidth&&p.options.lineWrapping&&gr(p),Or(p,Mr(p)),m=p.display.barWidth,y=p.display.barHeight}function Or(p,g){var m=p.display,y=m.scrollbars.update(g);m.sizer.style.paddingRight=(m.barWidth=y.right)+"px",m.sizer.style.paddingBottom=(m.barHeight=y.bottom)+"px",m.heightForcer.style.borderBottom=y.bottom+"px solid transparent",y.right&&y.bottom?(m.scrollbarFiller.style.display="block",m.scrollbarFiller.style.height=y.bottom+"px",m.scrollbarFiller.style.width=y.right+"px"):m.scrollbarFiller.style.display="",y.bottom&&p.options.coverGutterNextToScrollbar&&p.options.fixedGutter?(m.gutterFiller.style.display="block",m.gutterFiller.style.height=y.bottom+"px",m.gutterFiller.style.width=g.gutterWidth+"px"):m.gutterFiller.style.display=""}function Dr(p){p.display.scrollbars&&(p.display.scrollbars.clear(),p.display.scrollbars.addClass&&U(p.display.wrapper,p.display.scrollbars.addClass)),p.display.scrollbars=new lo[p.options.scrollbarStyle]((function(g){p.display.wrapper.insertBefore(g,p.display.scrollbarFiller),Re(g,"mousedown",(function(){p.state.focused&&setTimeout((function(){return p.display.input.focus()}),0)})),g.setAttribute("cm-not-content","true")}),(function(g,m){("horizontal"==m?Tr:Lr)(p,g)}),p),p.display.scrollbars.addClass&&A(p.display.wrapper,p.display.scrollbars.addClass)}function Hr(p){p.curOp={cm:p,viewChanged:!1,startHeight:p.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ao,markArrays:null},p=p.curOp,Jr?Jr.ops.push(p):p.ownsGroup=Jr={ops:[p],delayedCallbacks:[]}}function Fr(p){(p=p.curOp)&&tn(p,(function(p){for(var g=0;g<p.ops.length;g++)p.ops[g].cm.curOp=null;!function(p){var g,m,y,b,S,W;for(g=p.ops,m=0;m<g.length;m++)!function(p){var g=p.cm,m=g.display;(function(p){var g=p.display;!g.scrollbarsClipped&&g.scroller.offsetWidth&&(g.nativeBarWidth=g.scroller.offsetWidth-g.scroller.clientWidth,g.heightForcer.style.height=yn(p)+"px",g.sizer.style.marginBottom=-g.nativeBarWidth+"px",g.sizer.style.borderRightWidth=yn(p)+"px",g.scrollbarsClipped=!0)})(g),p.updateMaxLine&&Vt(g),p.mustUpdate=p.viewChanged||p.forceUpdate||null!=p.scrollTop||p.scrollToPos&&(p.scrollToPos.from.line<m.viewFrom||p.scrollToPos.to.line>=m.viewTo)||m.maxLineChanged&&g.options.lineWrapping,p.update=p.mustUpdate&&new fo(g,p.mustUpdate&&{top:p.scrollTop,ensure:p.scrollToPos},p.forceUpdate)}(g[m]);for(y=0;y<g.length;y++)!function(p){p.updatedDisplay=p.mustUpdate&&Ur(p.cm,p.update)}(g[y]);for(b=0;b<g.length;b++)!function(p){var g=p.cm,m=g.display;p.updatedDisplay&&gr(g),p.barMeasure=Mr(g),m.maxLineChanged&&!g.options.lineWrapping&&(p.adjustWidthTo=Cn(g,m.maxLine,m.maxLine.text.length).left+3,g.display.sizerWidth=p.adjustWidthTo,p.barMeasure.scrollWidth=Math.max(m.scroller.clientWidth,m.sizer.offsetLeft+p.adjustWidthTo+yn(g)+g.display.barWidth),p.maxScrollLeft=Math.max(0,m.sizer.offsetLeft+p.adjustWidthTo-bn(g))),(p.updatedDisplay||p.selectionChanged)&&(p.preparedSelection=m.input.prepareSelection())}(g[b]);for(S=0;S<g.length;S++)!function(p){var g,m=p.cm;null!=p.adjustWidthTo&&(m.display.sizer.style.minWidth=p.adjustWidthTo+"px",p.maxScrollLeft<m.doc.scrollLeft&&Tr(m,Math.min(m.display.scroller.scrollLeft,p.maxScrollLeft),!0),m.display.maxLineChanged=!1),g=p.focus&&p.focus==O(),p.preparedSelection&&m.display.input.showSelection(p.preparedSelection,g),!p.updatedDisplay&&p.startHeight==m.doc.height||Nr(m,p.barMeasure),p.updatedDisplay&&Xr(m,p.barMeasure),p.selectionChanged&&cr(m),m.state.focused&&p.updateInput&&m.display.input.reset(p.typing),g&&hr(p.cm)}(g[S]);for(W=0;W<g.length;W++)!function(p){var g,m,y,b,S,W=p.cm,H=W.display,z=W.doc;if(p.updatedDisplay&&Vr(W,p.update),null==H.wheelStartX||null==p.scrollTop&&null==p.scrollLeft&&!p.scrollToPos||(H.wheelStartX=H.wheelStartY=null),null!=p.scrollTop&&kr(W,p.scrollTop,p.forceScroll),null!=p.scrollLeft&&Tr(W,p.scrollLeft,!0,!0),p.scrollToPos&&(g=function(p,g,m,y){var v,b,S,W,H,z;for(null==y&&(y=0),p.options.lineWrapping||g!=m||(m="before"==g.sticky?tt(g.line,g.ch+1,"before"):g,g=g.ch?tt(g.line,"before"==g.sticky?g.ch-1:g.ch,"after"):g),v=0;v<5&&(S=!1,W=Rn(p,g),H=m&&m!=g?Rn(p,m):W,z=yr(p,b={left:Math.min(W.left,H.left),top:Math.min(W.top,H.top)-y,right:Math.max(W.left,H.left),bottom:Math.max(W.bottom,H.bottom)+y}),W=p.doc.scrollTop,H=p.doc.scrollLeft,null!=z.scrollTop&&(Lr(p,z.scrollTop),1<Math.abs(p.doc.scrollTop-W)&&(S=!0)),null!=z.scrollLeft&&(Tr(p,z.scrollLeft),1<Math.abs(p.doc.scrollLeft-H)&&(S=!0)),S);v++);return b}(W,at(z,p.scrollToPos.from),at(z,p.scrollToPos.to),p.scrollToPos.margin),function(p,g){var m,y,b;we(p,"scrollCursorIntoView")||(y=(m=p.display).sizer.getBoundingClientRect(),b=null,g.top+y.top<0?b=!0:g.bottom+y.top>(window.innerHeight||document.documentElement.clientHeight)&&(b=!1),null==b||v||(g=M("div","​",null,"position: absolute;\n                         top: "+(g.top-m.viewOffset-gn(p.display))+"px;\n                         height: "+(g.bottom-g.top+yn(p)+m.barHeight)+"px;\n                         left: "+g.left+"px; width: "+Math.max(2,g.right-g.left)+"px;"),p.display.lineSpace.appendChild(g),g.scrollIntoView(b),p.display.lineSpace.removeChild(g)))}(W,g)),m=p.maybeHiddenMarkers,y=p.maybeUnhiddenMarkers,m)for(b=0;b<m.length;++b)m[b].lines.length||be(m[b],"hide");if(y)for(S=0;S<y.length;++S)y[S].lines.length&&be(y[S],"unhide");H.wrapper.offsetHeight&&(z.scrollTop=W.display.scroller.scrollTop),p.changeObjs&&be(W,"changes",W,p.changeObjs),p.update&&p.update.finish()}(g[W])}(p)}))}function Pr(p,g){if(p.curOp)return g();Hr(p);try{return g()}finally{Fr(p)}}function Er(p,g){return function(){if(p.curOp)return g.apply(p,arguments);Hr(p);try{return g.apply(p,arguments)}finally{Fr(p)}}}function Ir(p){return function(){if(this.curOp)return p.apply(this,arguments);Hr(this);try{return p.apply(this,arguments)}finally{Fr(this)}}}function Rr(p){return function(){var g=this.cm;if(!g||g.curOp)return p.apply(this,arguments);Hr(g);try{return p.apply(this,arguments)}finally{Fr(g)}}}function zr(p,g){p.doc.highlightFrontier<p.display.viewTo&&p.state.highlight.set(g,F(Br,p))}function Br(p){var g,m,y,v=p.doc;v.highlightFrontier>=p.display.viewTo||(g=+new Date+p.options.workTime,m=pt(p,v.highlightFrontier),y=[],v.iter(m.line,Math.min(v.first+v.size,p.display.viewTo+500),(function(b){var S,W,H,z,B;if(m.line>=p.display.viewFrom){for(S=b.styles,W=b.text.length>p.options.maxHighlightLength?Ve(v.mode,m.state):null,H=dt(p,b,m,!0),W&&(m.state=W),b.styles=H.styles,W=b.styleClasses,(H=H.classes)?b.styleClasses=H:W&&(b.styleClasses=null),z=!S||S.length!=b.styles.length||W!=H&&(!W||!H||W.bgClass!=H.bgClass||W.textClass!=H.textClass),B=0;!z&&B<S.length;++B)z=S[B]!=b.styles[B];z&&y.push(m.line),b.stateAfter=m.save(),m.nextLine()}else b.text.length<=p.options.maxHighlightLength&&gt(p,b.text,m),b.stateAfter=m.line%5==0?m.save():null,m.nextLine();if(+new Date>g)return zr(p,p.options.workDelay),!0})),v.highlightFrontier=m.line,v.modeFrontier=Math.max(v.modeFrontier,m.line),y.length&&Pr(p,(function(){for(var g=0;g<y.length;g++)nr(p,y[g],"text")})))}function Ur(p,g){var m,y,v,b,S=p.display,W=p.doc;return g.editorIsHidden?(rr(p),!1):!(!g.force&&g.visible.from>=S.viewFrom&&g.visible.to<=S.viewTo&&(null==S.updateLineNumbers||S.updateLineNumbers>=S.viewTo)&&S.renderedView==S.view&&0==or(p)||(_r(p)&&(rr(p),g.dims=$n(p)),m=W.first+W.size,y=Math.max(g.visible.from-p.options.viewportMargin,W.first),v=Math.min(m,g.visible.to+p.options.viewportMargin),S.viewFrom<y&&y-S.viewFrom<20&&(y=Math.max(W.first,S.viewFrom)),S.viewTo>v&&S.viewTo-v<20&&(v=Math.min(m,S.viewTo)),Tn&&(y=Rt(p.doc,y),v=zt(p.doc,v)),b=y!=S.viewFrom||v!=S.viewTo||S.lastWrapHeight!=g.wrapperHeight||S.lastWrapWidth!=g.wrapperWidth,W=y,m=v,0==(v=(y=p).display).view.length||W>=v.viewTo||m<=v.viewFrom?(v.view=Jt(y,W,m),v.viewFrom=W):(v.viewFrom>W?v.view=Jt(y,W,v.viewFrom).concat(v.view):v.viewFrom<W&&(v.view=v.view.slice(er(y,W))),v.viewFrom=W,v.viewTo<m?v.view=v.view.concat(Jt(y,v.viewTo,m)):v.viewTo>m&&(v.view=v.view.slice(0,er(y,m)))),v.viewTo=m,S.viewOffset=Gt(Ye(p.doc,S.viewFrom)),p.display.mover.style.top=S.viewOffset+"px",y=or(p),!b&&0==y&&!g.force&&S.renderedView==S.view&&(null==S.updateLineNumbers||S.updateLineNumbers>=S.viewTo)||(v=function(p){var g,m;return p.hasFocus()?null:(g=O())&&N(p.display.lineDiv,g)?(m={activeElt:g},!window.getSelection||(g=window.getSelection()).anchorNode&&g.extend&&N(p.display.lineDiv,g.anchorNode)&&(m.anchorNode=g.anchorNode,m.anchorOffset=g.anchorOffset,m.focusNode=g.focusNode,m.focusOffset=g.focusOffset),m):null}(p),4<y&&(S.lineDiv.style.display="none"),function(p,g,m){function s(g){var m=g.nextSibling;return Xl&&H&&p.display.currentWheelTarget==g?g.style.display="none":g.parentNode.removeChild(g),m}var y,v,b,S,W,z=p.display,B=p.options.lineNumbers,G=z.lineDiv,V=G.firstChild;for(y=z.view,v=z.viewFrom,b=0;b<y.length;b++){if(!(S=y[b]).hidden)if(S.node&&S.node.parentNode==G){for(;V!=S.node;)V=s(V);W=B&&null!=g&&g<=v&&S.lineNumber,S.changes&&(-1<R(S.changes,"gutter")&&(W=!1),ln(p,S,v,m)),W&&(L(S.lineNumber),S.lineNumber.appendChild(document.createTextNode(et(p.options,v)))),V=S.node.nextSibling}else W=function(p,g,m,y){var v=an(p,g);return g.text=g.node=v.pre,v.bgClass&&(g.bgClass=v.bgClass),v.textClass&&(g.textClass=v.textClass),un(p,g),cn(p,g,m,y),hn(p,g,y),g.node}(p,S,v,m),G.insertBefore(W,V);v+=S.size}for(;V;)V=s(V)}(p,S.updateLineNumbers,g.dims),4<y&&(S.lineDiv.style.display=""),S.renderedView=S.view,(m=v)&&m.activeElt&&m.activeElt!=O()&&(m.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(m.activeElt.nodeName)&&m.anchorNode&&N(document.body,m.anchorNode)&&N(document.body,m.focusNode)&&(y=window.getSelection(),(v=document.createRange()).setEnd(m.anchorNode,m.anchorOffset),v.collapse(!1),y.removeAllRanges(),y.addRange(v),y.extend(m.focusNode,m.focusOffset))),L(S.cursorDiv),L(S.selectionDiv),S.gutters.style.height=S.sizer.style.minHeight=0,b&&(S.lastWrapHeight=g.wrapperHeight,S.lastWrapWidth=g.wrapperWidth,zr(p,400)),S.updateLineNumbers=null)))}function Vr(p,g){var m,y,v;for(m=g.viewport,y=!0;;y=!1){if(y&&p.options.lineWrapping&&g.oldDisplayWidth!=bn(p))y&&(g.visible=vr(p.display,p.doc,m));else if(m&&null!=m.top&&(m={top:Math.min(p.doc.height+mn(p.display)-wn(p),m.top)}),g.visible=vr(p.display,p.doc,m),g.visible.from>=p.display.viewFrom&&g.visible.to<=p.display.viewTo)break;if(!Ur(p,g))break;gr(p),v=Mr(p),lr(p),Nr(p,v),Xr(p,v),g.force=!1}g.signal(p,"update",p),p.display.viewFrom==p.display.reportedViewFrom&&p.display.viewTo==p.display.reportedViewTo||(g.signal(p,"viewportChange",p,p.display.viewFrom,p.display.viewTo),p.display.reportedViewFrom=p.display.viewFrom,p.display.reportedViewTo=p.display.viewTo)}function Kr(p,g){var m=new fo(p,g);Ur(p,m)&&(gr(p),Vr(p,m),g=Mr(p),lr(p),Nr(p,g),Xr(p,g),m.finish())}function jr(p){var g=p.gutters.offsetWidth;p.sizer.style.marginLeft=g+"px",rn(p,"gutterChanged",p)}function Xr(p,g){p.display.sizer.style.minHeight=g.docHeight+"px",p.display.heightForcer.style.top=g.docHeight+"px",p.display.gutters.style.height=g.docHeight+p.display.barHeight+yn(p)+"px"}function Yr(p){var g,m,y,v,b,S,W=p.display,H=W.view;if(W.alignWidgets||W.gutters.firstChild&&p.options.fixedGutter){for(g=qn(W)-W.scroller.scrollLeft+p.doc.scrollLeft,m=W.gutters.offsetWidth,y=g+"px",v=0;v<H.length;v++)if(!H[v].hidden&&(p.options.fixedGutter&&(H[v].gutter&&(H[v].gutter.style.left=y),H[v].gutterBackground&&(H[v].gutterBackground.style.left=y)),b=H[v].alignable))for(S=0;S<b.length;S++)b[S].style.left=y;p.options.fixedGutter&&(W.gutters.style.left=g+m+"px")}}function _r(p){var g,m,y,v;if(p.options.lineNumbers&&(g=p.doc,m=et(p.options,g.first+g.size-1),y=p.display,m.length!=y.lineNumChars))return g=(v=y.measure.appendChild(M("div",[M("div",m)],"CodeMirror-linenumber CodeMirror-gutter-elt"))).firstChild.offsetWidth,v=v.offsetWidth-g,y.lineGutter.style.width="",y.lineNumInnerWidth=Math.max(g,y.lineGutter.offsetWidth-v)+1,y.lineNumWidth=y.lineNumInnerWidth+v,y.lineNumChars=y.lineNumInnerWidth?m.length:-1,y.lineGutter.style.width=y.lineNumWidth+"px",jr(p.display),1}function $r(p,g){var m,y,v,b,S;for(m=[],y=!1,v=0;v<p.length;v++){if(S=null,"string"!=typeof(b=p[v])&&(S=b.style,b=b.className),"CodeMirror-linenumbers"==b){if(!g)continue;y=!0}m.push({className:b,style:S})}return g&&!y&&m.push({className:"CodeMirror-linenumbers",style:null}),m}function qr(p){var g,m,y,v,b=p.gutters,S=p.gutterSpecs;for(L(b),p.lineGutter=null,g=0;g<S.length;++g)y=(m=S[g]).className,v=m.style,m=b.appendChild(M("div",null,"CodeMirror-gutter "+y)),v&&(m.style.cssText=v),"CodeMirror-linenumbers"==y&&((p.lineGutter=m).style.width=(p.lineNumWidth||1)+"px");b.style.display=S.length?"":"none",jr(p)}function Zr(p){qr(p.display),tr(p),Yr(p)}function Qr(p,g,m,y){var v,b=this;this.input=m,b.scrollbarFiller=M("div",null,"CodeMirror-scrollbar-filler"),b.scrollbarFiller.setAttribute("cm-not-content","true"),b.gutterFiller=M("div",null,"CodeMirror-gutter-filler"),b.gutterFiller.setAttribute("cm-not-content","true"),b.lineDiv=T("div",null,"CodeMirror-code"),b.selectionDiv=M("div",null,null,"position: relative; z-index: 1"),b.cursorDiv=M("div",null,"CodeMirror-cursors"),b.measure=M("div",null,"CodeMirror-measure"),b.lineMeasure=M("div",null,"CodeMirror-measure"),b.lineSpace=T("div",[b.measure,b.lineMeasure,b.selectionDiv,b.cursorDiv,b.lineDiv],null,"position: relative; outline: none"),v=T("div",[b.lineSpace],"CodeMirror-lines"),b.mover=M("div",[v],null,"position: relative"),b.sizer=M("div",[b.mover],"CodeMirror-sizer"),b.sizerWidth=null,b.heightForcer=M("div",null,null,"position: absolute; height: "+te+"px; width: 1px;"),b.gutters=M("div",null,"CodeMirror-gutters"),b.lineGutter=null,b.scroller=M("div",[b.sizer,b.heightForcer,b.gutters],"CodeMirror-scroll"),b.scroller.setAttribute("tabIndex","-1"),b.wrapper=M("div",[b.scrollbarFiller,b.gutterFiller,b.scroller],"CodeMirror"),b.wrapper.setAttribute("translate","no"),_l&&ql<8&&(b.gutters.style.zIndex=-1,b.scroller.style.paddingRight=0),Xl||Ul&&W||(b.scroller.draggable=!0),p&&(p.appendChild?p.appendChild(b.wrapper):p(b.wrapper)),b.viewFrom=b.viewTo=g.first,b.reportedViewFrom=b.reportedViewTo=g.first,b.view=[],b.renderedView=null,b.externalMeasured=null,b.viewOffset=0,b.lastWrapHeight=b.lastWrapWidth=0,b.updateLineNumbers=null,b.nativeBarWidth=b.barHeight=b.barWidth=0,b.scrollbarsClipped=!1,b.lineNumWidth=b.lineNumInnerWidth=b.lineNumChars=null,b.alignWidgets=!1,b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.maxLine=null,b.maxLineLength=0,b.maxLineChanged=!1,b.wheelDX=b.wheelDY=b.wheelStartX=b.wheelStartY=null,b.shift=!1,b.selForContextMenu=null,b.activeTouch=null,b.gutterSpecs=$r(y.gutters,y.lineNumbers),qr(b),m.init(b)}function ti(p){var g=p.wheelDeltaX,m=p.wheelDeltaY;return null==g&&p.detail&&p.axis==p.HORIZONTAL_AXIS&&(g=p.detail),null==m&&p.detail&&p.axis==p.VERTICAL_AXIS?m=p.detail:null==m&&(m=p.wheelDelta),{x:g,y:m}}function ni(p){return(p=ti(p)).x*=yo,p.y*=yo,p}function ri(p,m){var y,v,b,S,W,z,B=ti(m),G=B.x,V=B.y,U=yo;if(0===event.deltaMode&&(G=m.deltaX,V=m.deltaY,U=1),y=p.display,b=(v=y.scroller).scrollWidth>v.clientWidth,B=v.scrollHeight>v.clientHeight,G&&b||V&&B){if(V&&H&&Xl)e:for(S=m.target,W=y.view;S!=v;S=S.parentNode)for(z=0;z<W.length;z++)if(W[z].node==S){p.display.currentWheelTarget=S;break e}if(G&&!Ul&&!g&&null!=U)return V&&B&&Lr(p,Math.max(0,v.scrollTop+V*U)),Tr(p,Math.max(0,v.scrollLeft+G*U)),V&&!B||Le(m),void(y.wheelStartX=null);V&&null!=U&&(B=(b=p.doc.scrollTop)+y.wrapper.clientHeight,(U*=V)<0?b=Math.max(0,b+U-50):B=Math.min(p.doc.height,B+U+50),Kr(p,{top:b,bottom:B})),po<20&&0!==m.deltaMode&&(null==y.wheelStartX?(y.wheelStartX=v.scrollLeft,y.wheelStartY=v.scrollTop,y.wheelDX=G,y.wheelDY=V,setTimeout((function(){var p,g;null!=y.wheelStartX&&(g=v.scrollLeft-y.wheelStartX,g=(p=v.scrollTop-y.wheelStartY)&&y.wheelDY&&p/y.wheelDY||g&&y.wheelDX&&g/y.wheelDX,y.wheelStartX=y.wheelStartY=null,g&&(yo=(yo*po+g)/(po+1),++po))}),200)):(y.wheelDX+=G,y.wheelDY+=V))}}function li(p,g,m){var y,v,b,S,W,H=p&&p.options.selectionsMayTouch;for(p=g[m],g.sort((function(p,g){return nt(p.from(),g.from())})),m=R(g,p),y=1;y<g.length;y++)b=g[y],W=nt((S=g[y-1]).to(),b.from()),(H&&!b.empty()?0<W:0<=W)&&(v=lt(S.from(),b.from()),W=ot(S.to(),b.to()),S=S.empty()?b.from()==b.head:S.from()==S.head,y<=m&&--m,g.splice(--y,2,new Co(S?W:v,S?v:W)));return new xo(g,m)}function si(p,g){return new xo([new Co(p,g||p)],0)}function ai(p){return p.text?tt(p.from.line+p.text.length-1,Y(p.text).length+(1==p.text.length?p.from.ch:0)):p.to}function ui(p,g){if(nt(p,g.from)<0)return p;if(nt(p,g.to)<=0)return ai(g);var m=p.line+g.text.length-(g.to.line-g.from.line)-1,y=p.ch;return p.line==g.to.line&&(y+=ai(g).ch-g.to.ch),tt(m,y)}function ci(p,g){var m,y,v;for(m=[],y=0;y<p.sel.ranges.length;y++)v=p.sel.ranges[y],m.push(new Co(ui(v.anchor,g),ui(v.head,g)));return li(p.cm,m,p.sel.primIndex)}function hi(p,g,m){return p.line==g.line?tt(m.line,p.ch-g.ch+m.ch):tt(m.line+(p.line-g.line),p.ch)}function di(p){p.doc.mode=Be(p.options,p.doc.modeOption),fi(p)}function fi(p){p.doc.iter((function(p){p.stateAfter&&(p.stateAfter=null),p.styles&&(p.styles=null)})),p.doc.modeFrontier=p.doc.highlightFrontier=p.doc.first,zr(p,100),p.state.modeGen++,p.curOp&&tr(p)}function pi(p,g){return 0==g.from.ch&&0==g.to.ch&&""==Y(g.text)&&(!p.cm||p.cm.options.wholeLineUpdateBefore)}function gi(p,g,m,y){function i(p){return m?m[p]:null}function n(p,m,v){var b,S;b=v,S=y,(v=p).text=m,v.stateAfter&&(v.stateAfter=null),v.styles&&(v.styles=null),null!=v.order&&(v.order=null),Nt(v),Ot(v,b),(S=S?S(v):1)!=v.height&&qe(v,S),rn(p,"change",p,g)}function r(p,g){for(var m=[],v=p;v<g;++v)m.push(new Ar(W[v],i(v),y));return m}var v,b=g.from,S=g.to,W=g.text,H=Ye(p,b.line),z=Ye(p,S.line),B=Y(W),G=i(W.length-1),V=S.line-b.line;g.full?(p.insert(0,r(0,W.length)),p.remove(W.length,p.size-W.length)):pi(p,g)?(v=r(0,W.length-1),n(z,z.text,G),V&&p.remove(b.line,V),v.length&&p.insert(b.line,v)):H==z?1==W.length?n(H,H.text.slice(0,b.ch)+B+H.text.slice(S.ch),G):((v=r(1,W.length-1)).push(new Ar(B+H.text.slice(S.ch),G,y)),n(H,H.text.slice(0,b.ch)+W[0],i(0)),p.insert(b.line+1,v)):1==W.length?(n(H,H.text.slice(0,b.ch)+W[0]+z.text.slice(S.ch),i(0)),p.remove(b.line+1,V)):(n(H,H.text.slice(0,b.ch)+W[0],i(0)),n(z,B+z.text.slice(S.ch),G),G=r(1,W.length-1),1<V&&p.remove(b.line+1,V-1),p.insert(b.line+1,G)),rn(p,"change",p,g)}function mi(p,g,m){!function e(p,y,v){var b,S,W;if(p.linked)for(b=0;b<p.linked.length;++b)(W=p.linked[b]).doc!=y&&(S=v&&W.sharedHist,m&&!S||(g(W.doc,S),e(W.doc,p,S)))}(p,null,!0)}function vi(p,g){if(g.cm)throw new Error("This document is already in use.");Qn((p.doc=g).cm=p),di(p),yi(p),p.options.direction=g.direction,p.options.lineWrapping||Vt(p),p.options.mode=g.modeOption,tr(p)}function yi(p){("rtl"==p.doc.direction?A:U)(p.display.lineDiv,"CodeMirror-rtl")}function bi(p){this.done=[],this.undone=[],this.undoDepth=p?p.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=p?p.maxGeneration:1}function wi(p,g){var m={from:it(g.from),to:ai(g),text:_e(p,g.from,g.to)};return ki(p,m,g.from.line,g.to.line+1),mi(p,(function(p){return ki(p,m,g.from.line,g.to.line+1),0}),!0),m}function xi(p){for(;p.length&&Y(p).ranges;)p.pop()}function Ci(p,g,m,y){var v,b,S,W,H=p.history;if(H.undone.length=0,S=+new Date,(H.lastOp==y||H.lastOrigin==g.origin&&g.origin&&("+"==g.origin.charAt(0)&&H.lastModTime>S-(p.cm?p.cm.options.historyEventDelay:500)||"*"==g.origin.charAt(0)))&&(v=(W=H).lastOp==y?(xi(W.done),Y(W.done)):W.done.length&&!Y(W.done).ranges?Y(W.done):1<W.done.length&&!W.done[W.done.length-2].ranges?(W.done.pop(),Y(W.done)):void 0))b=Y(v.changes),0==nt(g.from,g.to)&&0==nt(g.from,b.to)?b.to=ai(g):v.changes.push(wi(p,g));else for((W=Y(H.done))&&W.ranges||Li(p.sel,H.done),v={changes:[wi(p,g)],generation:H.generation},H.done.push(v);H.done.length>H.undoDepth;)H.done.shift(),H.done[0].ranges||H.done.shift();H.done.push(m),H.generation=++H.maxGeneration,H.lastModTime=H.lastSelTime=S,H.lastOp=H.lastSelOp=y,H.lastOrigin=H.lastSelOrigin=g.origin,b||be(p,"historyAdded")}function Si(p,g,m,y){var v,b,S,W=p.history,H=y&&y.origin;m==W.lastSelOp||H&&W.lastSelOrigin==H&&(W.lastModTime==W.lastSelTime&&W.lastOrigin==H||(v=p,b=H,S=Y(W.done),p=g,"*"==(b=b.charAt(0))||"+"==b&&S.ranges.length==p.ranges.length&&S.somethingSelected()==p.somethingSelected()&&new Date-v.history.lastSelTime<=(v.cm?v.cm.options.historyEventDelay:500)))?W.done[W.done.length-1]=g:Li(g,W.done),W.lastSelTime=+new Date,W.lastSelOrigin=H,W.lastSelOp=m,y&&!1!==y.clearRedo&&xi(W.undone)}function Li(p,g){var m=Y(g);m&&m.ranges&&m.equals(p)||g.push(p)}function ki(p,g,m,y){var v=g["spans_"+p.id],b=0;p.iter(Math.max(p.first,m),Math.min(p.first+p.size,y),(function(m){m.markedSpans&&((v=v||(g["spans_"+p.id]={}))[b]=m.markedSpans),++b}))}function Ti(p,g){var m,y,v=g["spans_"+p.id];if(!v)return null;for(m=[],y=0;y<g.text.length;++y)m.push(function(p){if(!p)return null;for(var g,m=0;m<p.length;++m)p[m].marker.explicitlyCleared?g=g||p.slice(0,m):g&&g.push(p[m]);return g?g.length?g:null:p}(v[y]));return m}function Mi(p,g){var m,y,v,b,S,W,H=Ti(p,g),z=Tt(p,g);if(!H)return z;if(!z)return H;for(m=0;m<H.length;++m)if(y=H[m],v=z[m],y&&v)e:for(b=0;b<v.length;++b){for(S=v[b],W=0;W<y.length;++W)if(y[W].marker==S.marker)continue e;y.push(S)}else v&&(H[m]=v);return H}function Ni(p,g,m){var y,v,b,S,W,H,z,B,G;for(y=[],v=0;v<p.length;++v)if((b=p[v]).ranges)y.push(m?xo.prototype.deepCopy.call(b):b);else for(S=b.changes,W=[],y.push({changes:W}),H=0;H<S.length;++H)if(B=S[H],W.push({from:B.from,to:B.to,text:B.text}),g)for(G in B)(z=G.match(/^spans_(\d+)$/))&&-1<R(g,Number(z[1]))&&(Y(W)[G]=B[G],delete B[G]);return y}function Oi(p,g,m,y){return y?(y=p.anchor,m&&((p=nt(g,y)<0)!=nt(m,y)<0?(y=g,g=m):p!=nt(g,m)<0&&(g=m)),new Co(y,g)):new Co(m||g,g)}function Ai(p,g,m,y,v){null==v&&(v=p.cm&&(p.cm.display.shift||p.extend)),Pi(p,new xo([Oi(p.sel.primary(),g,m,v)],0),y)}function Di(p,g,m){for(var y=[],v=p.cm&&(p.cm.display.shift||p.extend),b=0;b<p.sel.ranges.length;b++)y[b]=Oi(p.sel.ranges[b],g[b],null,v);Pi(p,li(p.cm,y,p.sel.primIndex),m)}function Wi(p,g,m,y){var v=p.sel.ranges.slice(0);v[g]=m,Pi(p,li(p.cm,v,p.sel.primIndex),y)}function Hi(p,g,m,y){Pi(p,si(g,m),y)}function Fi(p,g,m){var y=p.history.done,v=Y(y);v&&v.ranges?Ei(p,y[y.length-1]=g,m):Pi(p,g,m)}function Pi(p,g,m){Ei(p,g,m),Si(p,p.sel,p.cm?p.cm.curOp.id:NaN,m)}function Ei(p,g,m){var y,v,b;(Ce(p,"beforeSelectionChange")||p.cm&&Ce(p.cm,"beforeSelectionChange"))&&(y=p,v=m,v={ranges:(b=g).ranges,update:function(p){this.ranges=[];for(var g=0;g<p.length;g++)this.ranges[g]=new Co(at(y,p[g].anchor),at(y,p[g].head))},origin:v&&v.origin},be(y,"beforeSelectionChange",y,v),y.cm&&be(y.cm,"beforeSelectionChange",y.cm,v),g=v.ranges!=b.ranges?li(y.cm,v.ranges,v.ranges.length-1):b),b=m&&m.bias||(nt(g.primary().head,p.sel.primary().head)<0?-1:1),Ii(p,zi(p,g,b,!0)),m&&!1===m.scroll||!p.cm||"nocursor"==p.cm.getOption("readOnly")||wr(p.cm)}function Ii(p,g){g.equals(p.sel)||(p.sel=g,p.cm&&(p.cm.curOp.updateInput=1,p.cm.curOp.selectionChanged=!0,xe(p.cm)),rn(p,"cursorActivity",p))}function Ri(p){Ii(p,zi(p,p.sel,null,!1))}function zi(p,g,m,y){var v,b,S,W,H;for(b=0;b<g.ranges.length;b++)S=g.ranges[b],W=g.ranges.length==p.sel.ranges.length&&p.sel.ranges[b],H=Gi(p,S.anchor,W&&W.anchor,m,y),W=Gi(p,S.head,W&&W.head,m,y),!v&&H==S.anchor&&W==S.head||((v=v||g.ranges.slice(0,b))[b]=new Co(H,W));return v?li(p.cm,v,g.primIndex):g}function Bi(p,g,m,y,v){var b,S,W,H,z,B,G=Ye(p,g.line);if(G.markedSpans)for(b=0;b<G.markedSpans.length;++b)if(H="selectLeft"in(W=(S=G.markedSpans[b]).marker)?!W.selectLeft:W.inclusiveLeft,z="selectRight"in W?!W.selectRight:W.inclusiveRight,(null==S.from||(H?S.from<=g.ch:S.from<g.ch))&&(null==S.to||(z?S.to>=g.ch:S.to>g.ch))){if(v&&(be(W,"beforeCursorEnter"),W.explicitlyCleared)){if(G.markedSpans){--b;continue}break}if(W.atomic)return m&&(B=W.find(y<0?1:-1),S=void 0,(B=(y<0?z:H)?Ui(p,B,-y,B&&B.line==g.line?G:null):B)&&B.line==g.line&&(S=nt(B,m))&&(y<0?S<0:0<S))?Bi(p,B,g,y,v):(W=W.find(y<0?-1:1),(W=(y<0?H:z)?Ui(p,W,y,W.line==g.line?G:null):W)?Bi(p,W,g,y,v):null)}return g}function Gi(p,g,m,y,v){return(y=Bi(p,g,m,y=y||1,v)||!v&&Bi(p,g,m,y,!0)||Bi(p,g,m,-y,v)||!v&&Bi(p,g,m,-y,!0))||(p.cantEdit=!0,tt(p.first,0))}function Ui(p,g,m,y){return m<0&&0==g.ch?g.line>p.first?at(p,tt(g.line-1)):null:0<m&&g.ch==(y||Ye(p,g.line)).text.length?g.line<p.first+p.size-1?tt(g.line+1,0):null:new tt(g.line,g.ch+m)}function Vi(p){p.setSelection(tt(p.firstLine(),0),tt(p.lastLine()),se)}function Ki(p,g,m){var y={canceled:!1,from:g.from,to:g.to,text:g.text,origin:g.origin,cancel:function(){return y.canceled=!0}};return m&&(y.update=function(g,m,v,b){g&&(y.from=at(p,g)),m&&(y.to=at(p,m)),v&&(y.text=v),void 0!==b&&(y.origin=b)}),be(p,"beforeChange",p,y),p.cm&&be(p.cm,"beforeChange",p.cm,y),y.canceled?(p.cm&&(p.cm.curOp.updateInput=2),null):{from:y.from,to:y.to,text:y.text,origin:y.origin}}function ji(p,g,m){var y,v;if(p.cm){if(!p.cm.curOp)return Er(p.cm,ji)(p,g,m);if(p.cm.state.suppressEdits)return}if(!(Ce(p,"beforeChange")||p.cm&&Ce(p.cm,"beforeChange"))||(g=Ki(p,g,!0)))if(y=Mn&&!m&&function(p,g,m){var y,v,b,S,W,H,z,B,G,V=null;if(p.iter(g.line,m.line+1,(function(p){var g,m;if(p.markedSpans)for(g=0;g<p.markedSpans.length;++g)!(m=p.markedSpans[g].marker).readOnly||V&&-1!=R(V,m)||(V=V||[]).push(m)})),!V)return null;for(y=[{from:g,to:m}],v=0;v<V.length;++v)for(S=(b=V[v]).find(0),W=0;W<y.length;++W)nt((G=y[W]).to,S.from)<0||0<nt(G.from,S.to)||(H=[W,1],z=nt(G.from,S.from),B=nt(G.to,S.to),(z<0||!b.inclusiveLeft&&!z)&&H.push({from:G.from,to:S.from}),(0<B||!b.inclusiveRight&&!B)&&H.push({from:S.to,to:G.to}),y.splice.apply(y,H),W+=H.length-3);return y}(p,g.from,g.to),y)for(v=y.length-1;0<=v;--v)Xi(p,{from:y[v].from,to:y[v].to,text:v?[""]:g.text,origin:g.origin});else Xi(p,g)}function Xi(p,g){var m,y;1==g.text.length&&""==g.text[0]&&0==nt(g.from,g.to)||(m=ci(p,g),Ci(p,g,m,p.cm?p.cm.curOp.id:NaN),$i(p,g,m,Tt(p,g)),y=[],mi(p,(function(p,m){m||-1!=R(y,p.history)||(Ji(p.history,g),y.push(p.history)),$i(p,g,null,Tt(p,g))})))}function Yi(p,g,m){var y,v,b,S,W,H,z,B,G,V,U=p.cm&&p.cm.state.suppressEdits;if(!U||m){for(v=p.history,b=p.sel,S="undo"==g?v.done:v.undone,W="undo"==g?v.undone:v.done,H=0;H<S.length&&(y=S[H],m?!y.ranges||y.equals(p.sel):y.ranges);H++);if(H!=S.length){for(v.lastOrigin=v.lastSelOrigin=null;;){if(!(y=S.pop()).ranges){if(U)return void S.push(y);break}if(Li(y,W),m&&!y.equals(p.sel))return void Pi(p,y,{clearRedo:!1});b=y}for(z=[],Li(b,W),W.push({changes:z,generation:v.generation}),v.generation=y.generation||++v.maxGeneration,B=Ce(p,"beforeChange")||p.cm&&Ce(p.cm,"beforeChange"),G=y.changes.length-1;0<=G;--G)if(V=function(m){var v,b,W=y.changes[m];if(W.origin=g,B&&!Ki(p,W,!1))return S.length=0,{};z.push(wi(p,W)),v=m?ci(p,W):Y(S),$i(p,W,v,Mi(p,W)),!m&&p.cm&&p.cm.scrollIntoView({from:W.from,to:ai(W)}),b=[],mi(p,(function(p,g){g||-1!=R(b,p.history)||(Ji(p.history,W),b.push(p.history)),$i(p,W,null,Mi(p,W))}))}(G),V)return V.v}}}function _i(p,g){if(0!=g&&(p.first+=g,p.sel=new xo(_(p.sel.ranges,(function(p){return new Co(tt(p.anchor.line+g,p.anchor.ch),tt(p.head.line+g,p.head.ch))})),p.sel.primIndex),p.cm)){tr(p.cm,p.first,p.first-g,g);for(var m=p.cm.display,y=m.viewFrom;y<m.viewTo;y++)nr(p.cm,y,"gutter")}}function $i(p,g,m,y){if(p.cm&&!p.cm.curOp)return Er(p.cm,$i)(p,g,m,y);var v;g.to.line<p.first?_i(p,g.text.length-1-(g.to.line-g.from.line)):g.from.line>p.lastLine()||(g.from.line<p.first&&(_i(p,v=g.text.length-1-(p.first-g.from.line)),g={from:tt(p.first,0),to:tt(g.to.line+v,g.to.ch),text:[Y(g.text)],origin:g.origin}),v=p.lastLine(),(g=g.to.line>v?{from:g.from,to:tt(v,Ye(p,v).text.length),text:[g.text[0]],origin:g.origin}:g).removed=_e(p,g.from,g.to),m=m||ci(p,g),p.cm?function(p,g,m){var y=p.doc,v=p.display,b=g.from,S=g.to,W=!1,H=b.line;p.options.lineWrapping||(H=Ze(It(Ye(y,b.line))),y.iter(H,S.line+1,(function(p){if(p==v.maxLine)return W=!0}))),-1<y.sel.contains(g.from,g.to)&&xe(p),gi(y,g,m,Zn(p)),p.options.lineWrapping||(y.iter(H,b.line+g.text.length,(function(p){var g=Ut(p);g>v.maxLineLength&&(v.maxLine=p,v.maxLineLength=g,v.maxLineChanged=!0,W=!1)})),W&&(p.curOp.updateMaxLine=!0)),function(p,g){var m,y,v;if(p.modeFrontier=Math.min(p.modeFrontier,g),!(p.highlightFrontier<g-10)){for(m=p.first,y=g-1;m<y;y--)if((v=Ye(p,y).stateAfter)&&(!(v instanceof ct)||y+v.lookAhead<g)){m=y+1;break}p.highlightFrontier=Math.min(p.highlightFrontier,m)}}(y,b.line),zr(p,400),H=g.text.length-(S.line-b.line)-1,g.full?tr(p):b.line!=S.line||1!=g.text.length||pi(p.doc,g)?tr(p,b.line,S.line+1,H):nr(p,b.line,"text"),y=Ce(p,"changes"),((H=Ce(p,"change"))||y)&&(g={from:b,to:S,text:g.text,removed:g.removed,origin:g.origin},H&&rn(p,"change",p,g),y&&(p.curOp.changeObjs||(p.curOp.changeObjs=[])).push(g)),p.display.selForContextMenu=null}(p.cm,g,y):gi(p,g,y),Ei(p,m,se),p.cantEdit&&Gi(p,tt(p.firstLine(),0))&&(p.cantEdit=!1))}function qi(p,g,m,y,v){var b;nt(y=y||m,m)<0&&(m=(b=[y,m])[0],y=b[1]),"string"==typeof g&&(g=p.splitLines(g)),ji(p,{from:m,to:y,text:g,origin:v})}function Zi(p,g,m,y){m<p.line?p.line+=y:g<p.line&&(p.line=g,p.ch=0)}function Qi(p,g,m,y){var v,b,S,W,H,z;for(v=0;v<p.length;++v)if(S=!0,(b=p[v]).ranges)for(b.copied||((b=p[v]=b.deepCopy()).copied=!0),W=0;W<b.ranges.length;W++)Zi(b.ranges[W].anchor,g,m,y),Zi(b.ranges[W].head,g,m,y);else{for(H=0;H<b.changes.length;++H)if(m<(z=b.changes[H]).from.line)z.from=tt(z.from.line+y,z.from.ch),z.to=tt(z.to.line+y,z.to.ch);else if(g<=z.to.line){S=!1;break}S||(p.splice(0,v+1),v=0)}}function Ji(p,g){var m=g.from.line,y=g.to.line,g=g.text.length-(y-m)-1;Qi(p.done,m,y,g),Qi(p.undone,m,y,g)}function eo(p,g,m,y){var v=g,b=g;return"number"==typeof g?b=Ye(p,st(p,g)):v=Ze(g),null==v?null:(y(b,v)&&p.cm&&nr(p.cm,v,m),b)}function to(p){this.lines=p,this.parent=null;for(var g=0,m=0;m<p.length;++m)p[m].parent=this,g+=p[m].height;this.height=g}function no(p){var g,m,y,v;for(this.children=p,g=0,m=0,y=0;y<p.length;++y)g+=(v=p[y]).chunkSize(),m+=v.height,v.parent=this;this.size=g,this.height=m,this.parent=null}function ro(p,g,m){if(m)for(var y in m)m.hasOwnProperty(y)&&(this[y]=m[y]);this.doc=p,this.node=g}function io(p,g,m){Gt(g)<(p.curOp&&p.curOp.scrollTop||p.doc.scrollTop)&&br(p,m)}function oo(p,g){this.lines=[],this.type=g,this.doc=p,this.id=++So}function so(p,g,m,y,v){var b,S,W,H,z;if(y&&y.shared)return function(p,g,m,y,v){(y=P(y)).shared=!1;var b=[so(p,g,m,y,v)],S=b[0],W=y.widgetNode;return mi(p,(function(p){W&&(y.widgetNode=W.cloneNode(!0)),b.push(so(p,at(p,g),at(p,m),y,v));for(var H=0;H<p.linked.length;++H)if(p.linked[H].isParent)return;S=Y(b)})),new Lo(b,S)}(p,g,m,y,v);if(p.cm&&!p.cm.curOp)return Er(p.cm,so)(p,g,m,y,v);if(b=new oo(p,v),v=nt(g,m),y&&P(y,b,!1),0<v||0==v&&!1!==b.clearWhenEmpty)return b;if(b.replacedWith&&(b.collapsed=!0,b.widgetNode=T("span",[b.replacedWith],"CodeMirror-widget"),y.handleMouseEvents||b.widgetNode.setAttribute("cm-ignore-events","true"),y.insertLeft&&(b.widgetNode.insertLeft=!0)),b.collapsed){if(Et(p,g.line,g,m,b)||g.line!=m.line&&Et(p,m.line,g,m,b))throw new Error("Inserting collapsed marker partially overlapping an existing one");Tn=!0}if(b.addToHistory&&Ci(p,{from:g,to:m,origin:"markText"},p.sel,NaN),W=g.line,H=p.cm,p.iter(W,m.line+1,(function(y){var v,z;H&&b.collapsed&&!H.options.lineWrapping&&It(y)==H.display.maxLine&&(S=!0),b.collapsed&&W!=g.line&&qe(y,0),v=y,z=new Lt(b,W==g.line?g.ch:null,W==m.line?m.ch:null),(y=(y=p.cm&&p.cm.curOp)&&window.WeakSet&&(y.markedSpans||(y.markedSpans=new WeakSet)))&&y.has(v.markedSpans)?v.markedSpans.push(z):(v.markedSpans=v.markedSpans?v.markedSpans.concat([z]):[z],y&&y.add(v.markedSpans)),z.marker.attachLine(v),++W})),b.collapsed&&p.iter(g.line,m.line+1,(function(g){Bt(p,g)&&qe(g,0)})),b.clearOnEnter&&Re(b,"beforeCursorEnter",(function(){return b.clear()})),b.readOnly&&(Mn=!0,(p.history.done.length||p.history.undone.length)&&p.clearHistory()),b.collapsed&&(b.id=++So,b.atomic=!0),H){if(S&&(H.curOp.updateMaxLine=!0),b.collapsed)tr(H,g.line,m.line+1);else if(b.className||b.startStyle||b.endStyle||b.css||b.attributes||b.title)for(z=g.line;z<=m.line;z++)nr(H,z,"text");b.atomic&&Ri(H.doc),rn(H,"markerAdded",H,b)}return b}function uo(p){return p.findMarks(tt(p.first,0),p.clipPos(tt(p.lastLine())),(function(p){return p.parent}))}function co(p){for(var g=0;g<p.length;g++)!function(g){var m,y,v=p[g],b=[v.primary.doc];for(mi(v.primary.doc,(function(p){return b.push(p)})),m=0;m<v.markers.length;m++)y=v.markers[m],-1==R(b,y.doc)&&(y.parent=null,v.markers.splice(m--,1))}(g)}function ho(p,g,m,y,v){if(!(this instanceof ho))return new ho(p,g,m,y,v);null==m&&(m=0),no.call(this,[new to([new Ar("",null)])]),this.first=m,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,m=tt(this.modeFrontier=this.highlightFrontier=m,0),this.sel=si(m),this.history=new bi(null),this.id=++ko,this.modeOption=g,this.lineSep=y,this.direction="rtl"==v?"rtl":"ltr",this.extend=!1,"string"==typeof p&&(p=this.splitLines(p)),gi(this,{from:m,to:m,text:p}),Pi(this,si(m),se)}function go(p){var g,m,y,v,b,S,W,H,z,B,G=this;if(mo(G),!we(G,p)&&!pn(G.display,p)&&(Le(p),_l&&(Ro=+new Date),g=Jn(G,p,!0),m=p.dataTransfer.files,g&&!G.isReadOnly()))if(m&&m.length&&window.FileReader&&window.File)for(y=m.length,v=Array(y),b=0,S=function(){++b==y&&Er(G,(function(){var p={from:g=at(G.doc,g),to:g,text:G.doc.splitLines(v.filter((function(p){return null!=p})).join(G.doc.lineSeparator())),origin:"paste"};ji(G.doc,p),Fi(G.doc,si(at(G.doc,g),at(G.doc,ai(p))))}))()},W=0;W<m.length;W++)!function(p,g){var m;G.options.allowDropFileTypes&&-1==R(G.options.allowDropFileTypes,p.type)?S():((m=new FileReader).onerror=function(){return S()},m.onload=function(){var p=m.result;/[\x00-\x08\x0e-\x1f]{2}/.test(p)||(v[g]=p),S()},m.readAsText(p))}(m[W],W);else{if(G.state.draggingText&&-1<G.doc.sel.contains(g))return G.state.draggingText(p),void setTimeout((function(){return G.display.input.focus()}),20);try{if(z=p.dataTransfer.getData("Text")){if(G.state.draggingText&&!G.state.draggingText.copy&&(H=G.listSelections()),Ei(G.doc,si(g,g)),H)for(B=0;B<H.length;++B)qi(G.doc,"",H[B].anchor,H[B].head,"drag");G.replaceSelection(z,"around","paste"),G.display.input.focus()}}catch(p){}}}function mo(p){p.display.dragCursor&&(p.display.lineSpace.removeChild(p.display.dragCursor),p.display.dragCursor=null)}function vo(p){var g,m,y,v;if(document.getElementsByClassName){for(g=document.getElementsByClassName("CodeMirror"),m=[],y=0;y<g.length;y++)(v=g[y].CodeMirror)&&m.push(v);m.length&&m[0].operation((function(){for(var g=0;g<m.length;g++)p(m[g])}))}}function bo(){var p;Uo||(Re(window,"resize",(function(){null==p&&(p=setTimeout((function(){p=null,vo(wo)}),100))})),Re(window,"blur",(function(){return vo(pr)})),Uo=!0)}function wo(p){var g=p.display;g.cachedCharWidth=g.cachedTextHeight=g.cachedPaddingH=null,g.scrollbarsClipped=!1,p.setSize()}function To(p){var g,m,y,v,b,S,W=p.split(/-(?!$)/);for(p=W[W.length-1],b=0;b<W.length-1;b++)if(S=W[b],/^(cmd|meta|m)$/i.test(S))v=!0;else if(/^a(lt)?$/i.test(S))g=!0;else if(/^(c|ctrl|control)$/i.test(S))m=!0;else{if(!/^s(hift)?$/i.test(S))throw new Error("Unrecognized modifier name: "+S);y=!0}return g&&(p="Alt-"+p),m&&(p="Ctrl-"+p),v&&(p="Cmd-"+p),y?"Shift-"+p:p}function Mo(p){var g,m,y,v,b,S,W,H,z={};for(g in p)if(p.hasOwnProperty(g)&&(y=p[g],!/^(name|fallthrough|(de|at)tach)$/.test(g)))if("..."!=y){for(v=_(g.split(" "),To),b=0;b<v.length;b++)if(S=void 0,W=void 0,S=b==v.length-1?(W=v.join(" "),y):(W=v.slice(0,b+1).join(" "),"..."),H=z[W]){if(H!=S)throw new Error("Inconsistent bindings for "+W)}else z[W]=S;delete p[g]}else delete p[g];for(m in z)p[m]=z[m];return p}function No(p,g,m,y){var v,b,S=(g=Wo(g)).call?g.call(p,y):g[p];if(!1===S)return"nothing";if("..."===S)return"multi";if(null!=S&&m(S))return"handled";if(g.fallthrough){if("[object Array]"!=Object.prototype.toString.call(g.fallthrough))return No(p,g.fallthrough,m,y);for(v=0;v<g.fallthrough.length;v++)if(b=No(p,g.fallthrough[v],m,y))return b}}function Oo(p){return"Ctrl"==(p="string"==typeof p?p:Zo[p.keyCode])||"Alt"==p||"Shift"==p||"Mod"==p}function Ao(p,g,m){var y=p;return g.altKey&&"Alt"!=y&&(p="Alt-"+p),(G?g.metaKey:g.ctrlKey)&&"Ctrl"!=y&&(p="Ctrl-"+p),(G?g.ctrlKey:g.metaKey)&&"Mod"!=y&&(p="Cmd-"+p),!m&&g.shiftKey&&"Shift"!=y?"Shift-"+p:p}function Do(p,m){if(g&&34==p.keyCode&&p.char)return!1;var y=Zo[p.keyCode];return null!=y&&!p.altGraphKey&&Ao(y=3==p.keyCode&&p.code?p.code:y,p,m)}function Wo(p){return"string"==typeof p?ll[p]:p}function Ho(p,g){var m,y,v,b,S;for(m=p.doc.sel.ranges,y=[],v=0;v<m.length;v++){for(b=g(m[v]);y.length&&nt(b.from,Y(y).to)<=0;)if(nt((S=y.pop()).from,b.from)<0){b.from=S.from;break}y.push(b)}Pr(p,(function(){for(var g=y.length-1;0<=g;g--)qi(p.doc,"",y[g].from,y[g].to,"+delete");wr(p)}))}function Fo(p,g,m){return(m=re(p.text,g+m,m))<0||m>p.text.length?null:m}function Po(p,g,m){return null==(p=Fo(p,g.ch,m))?null:new tt(g.line,p,m<0?"after":"before")}function Eo(p,g,m,y,v){var b,S,W,H;return p&&("rtl"==g.doc.direction&&(v=-v),b=pe(m,g.doc.direction))?(b=v<0==(1==(p=v<0?Y(b):b[0]).level)?"after":"before",0<p.level||"rtl"==g.doc.direction?(S=Ln(g,m),W=v<0?m.text.length-1:0,H=kn(g,S,W).top,W=ie((function(p){return kn(g,S,p).top==H}),v<0==(1==p.level)?p.from:p.to-1,W),"before"==b&&(W=Fo(m,W,1))):W=v<0?p.to:p.from,new tt(y,W,b)):new tt(y,v<0?m.text.length:0,v<0?"before":"after")}function Io(p,g,m,y){function u(p,m){return Fo(g,p instanceof tt?p.ch:p,m)}function o(m){return p.options.lineWrapping?(S=S||Ln(p,g),Vn(p,g,S,m)):{begin:0,end:g.text.length}}var v,b,S,W,H,z,B=pe(g,p.doc.direction);return B?(m.ch>=g.text.length?(m.ch=g.text.length,m.sticky="before"):m.ch<=0&&(m.ch=0,m.sticky="after"),v=le(B,m.ch,m.sticky),b=B[v],"ltr"==p.doc.direction&&b.level%2==0&&(0<y?b.to>m.ch:b.from<m.ch)?Po(g,m,y):(W=o("before"==m.sticky?u(m,-1):m.ch),"rtl"!=p.doc.direction&&1!=b.level||(H=1==b.level==y<0,null==(z=u(m,H?1:-1))||!(H?z<=b.to&&z<=W.end:z>=b.from&&z>=W.begin))?(H=function(p,g,y){var v,b,S,W;for(v=function(p,g){return g?new tt(m.line,u(p,1),"before"):new tt(m.line,p,"after")};0<=p&&p<B.length;p+=g){if(W=(S=0<g==(1!=(b=B[p]).level))?y.begin:u(y.end,-1),b.from<=W&&W<b.to)return v(W,S);if(W=S?b.from:u(b.to,-1),y.begin<=W&&W<y.end)return v(W,S)}},(v=H(v+y,y,W))?v:null==(W=0<y?W.end:u(W.begin,-1))||0<y&&W==g.text.length||!(v=H(0<y?0:B.length-1,y,o(W)))?null:v):new tt(m.line,z,H?"before":"after"))):Po(g,m,y)}function zo(p,g){var m=Ye(p.doc,g),y=It(m);return Eo(!0,p,y,g=y!=m?Ze(y):g,1)}function Bo(p,g){var m=zo(p,g.line),y=Ye(p.doc,m.line),p;return(p=pe(y,p.doc.direction))&&0!=p[0].level?m:(y=Math.max(m.ch,y.text.search(/\S/)),g=g.line==m.line&&g.ch<=y&&g.ch,tt(m.line,g?0:y,m.sticky))}function Go(p,g,m){if("string"==typeof g&&!(g=sl[g]))return!1;p.display.input.ensurePolled();var y=p.display.shift,v=!1;try{p.isReadOnly()&&(p.state.suppressEdits=!0),m&&(p.display.shift=!1),v=g(p)!=oe}finally{p.display.shift=y,p.state.suppressEdits=!1}return v}function Vo(p,g,m,y){var v=p.state.keySeq;if(v){if(Oo(g))return"handled";if(/\'$/.test(g)?p.state.keySeq=null:hl.set(50,(function(){p.state.keySeq==v&&(p.state.keySeq=null,p.display.input.reset())})),Ko(p,v+" "+g,m,y))return!0}return Ko(p,g,m,y)}function Ko(p,g,m,y){return y=function(p,g,m){var y,v;for(y=0;y<p.state.keyMaps.length;y++)if(v=No(g,p.state.keyMaps[y],m,p))return v;return p.options.extraKeys&&No(g,p.options.extraKeys,m,p)||No(g,p.options.keyMap,m,p)}(p,g,y),"multi"==y&&(p.state.keySeq=g),"handled"==y&&rn(p,"keyHandled",p,g,m),"handled"!=y&&"multi"!=y||(Le(m),cr(p)),!!y}function jo(p,g){var m=Do(g,!0);return!!m&&(g.shiftKey&&!p.state.keySeq?Vo(p,"Shift-"+m,g,(function(g){return Go(p,g,!0)}))||Vo(p,m,g,(function(g){if("string"==typeof g?/^go[A-Z]/.test(g):g.motion)return Go(p,g)})):Vo(p,m,g,(function(g){return Go(p,g)})))}function Yo(p){function o(p){18!=p.keyCode&&p.altKey||(U(v,"CodeMirror-crosshair"),ye(document,"keyup",o),ye(document,"mouseover",o))}var m,y,v,b=this;p.target&&p.target!=b.display.input.getField()||(b.curOp.focus=O(),we(b,p)||(_l&&ql<11&&27==p.keyCode&&(p.returnValue=!1),m=p.keyCode,b.display.shift=16==m||p.shiftKey,y=jo(b,p),g&&(fl=y?m:null,!y&&88==m&&!yt&&(H?p.metaKey:p.ctrlKey)&&b.replaceSelection("",null,"cut")),Ul&&!H&&!y&&46==m&&p.shiftKey&&!p.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=m||/\bCodeMirror-crosshair\b/.test(b.display.lineDiv.className)||(A(v=b.display.lineDiv,"CodeMirror-crosshair"),Re(document,"keyup",o),Re(document,"mouseover",o))))}function _o(p){16==p.keyCode&&(this.doc.sel.shift=!1),we(this,p)}function $o(p){var m,y,v,b=this;if(!(p.target&&p.target!=b.display.input.getField()||pn(b.display,p)||we(b,p)||p.ctrlKey&&!p.altKey||H&&p.metaKey)){if(y=p.keyCode,v=p.charCode,g&&y==fl)return fl=null,void Le(p);g&&(!p.which||p.which<10)&&jo(b,p)||"\b"!=(v=String.fromCharCode(null==v?y:v))&&(Vo(m=b,"'"+v+"'",p,(function(p){return Go(m,p,!0)}))||b.display.input.onKeyPress(p))}}function qo(p,g,m){this.time=p,this.pos=g,this.button=m}function Jo(p){var g,y,v,b,S,W=this,B=W.display;we(W,p)||B.activeTouch&&B.input.supportsTouch()||(B.input.ensurePolled(),B.shift=p.shiftKey,pn(B,p)?Xl||(B.scroller.draggable=!1,setTimeout((function(){return B.scroller.draggable=!0}),100)):nl(W,p)||(g=Jn(W,p),y=Oe(p),b=g?(v=g,b=y,S=+new Date,Tl&&Tl.compare(S,v,b)?(Ml=Tl=null,"triple"):Ml&&Ml.compare(S,v,b)?(Tl=new qo(S,v,b),Ml=null,"double"):(Ml=new qo(S,v,b),Tl=null,"single")):"single",window.focus(),1==y&&W.state.selectingText&&W.state.selectingText(p),g&&function(p,g,m,y,v){var b="Click";return"double"==y?b="Double"+b:"triple"==y&&(b="Triple"+b),Vo(p,Ao(b=(1==g?"Left":2==g?"Middle":"Right")+b,v),v,(function(g){if(!(g="string"==typeof g?sl[g]:g))return!1;var y=!1;try{p.isReadOnly()&&(p.state.suppressEdits=!0),y=g(p,m)!=oe}finally{p.state.suppressEdits=!1}return y}))}(W,y,g,b,p)||(1==y?g?function(p,g,y,v){_l?setTimeout(F(hr,p),0):p.curOp.focus=O();var b,S=function(p,g,m){var y=p.getOption("configureMouse"),v=y?y(p,g,m):{};return null==v.unit&&(y=z?m.shiftKey&&m.metaKey:m.altKey,v.unit=y?"rectangle":"single"==g?"char":"double"==g?"word":"line"),null!=v.extend&&!p.doc.extend||(v.extend=p.doc.extend||m.shiftKey),null==v.addNew&&(v.addNew=H?m.metaKey:m.ctrlKey),null==v.moveOnDrag&&(v.moveOnDrag=!(H?m.altKey:m.ctrlKey)),v}(p,y,v),W=p.doc.sel;(p.options.dragDrop&&Ge&&!p.isReadOnly()&&"single"==y&&-1<(b=W.contains(g))&&(nt((b=W.ranges[b]).from(),g)<0||0<g.xRel)&&(0<nt(b.to(),g)||g.xRel<0)?function(p,g,y,v){var b=p.display,S=!1,W=Er(p,(function(g){Xl&&(b.scroller.draggable=!1),p.state.draggingText=!1,p.state.delayingBlurEvent&&(p.hasFocus()?p.state.delayingBlurEvent=!1:dr(p)),ye(b.wrapper.ownerDocument,"mouseup",W),ye(b.wrapper.ownerDocument,"mousemove",a),ye(b.scroller,"dragstart",u),ye(b.scroller,"drop",W),S||(Le(g),v.addNew||Ai(p.doc,y,null,null,v.extend),Xl&&!m||_l&&9==ql?setTimeout((function(){b.wrapper.ownerDocument.body.focus({preventScroll:!0}),b.input.focus()}),20):b.input.focus())})),a=function(p){S=S||10<=Math.abs(g.clientX-p.clientX)+Math.abs(g.clientY-p.clientY)},u=function(){return S=!0};Xl&&(b.scroller.draggable=!0),(p.state.draggingText=W).copy=!v.moveOnDrag,Re(b.wrapper.ownerDocument,"mouseup",W),Re(b.wrapper.ownerDocument,"mousemove",a),Re(b.scroller,"dragstart",u),Re(b.scroller,"drop",W),p.state.delayingBlurEvent=!0,setTimeout((function(){return b.input.focus()}),20),b.scroller.dragDrop&&b.scroller.dragDrop()}:function(p,g,m,y){function s(g){var v,z,G,V,U,Z,j,te,oe,se,ue;if(0!=nt(B,g))if(B=g,"rectangle"==y.unit){for(v=[],z=p.options.tabSize,G=E(Ye(b,m.line).text,m.ch,z),V=E(Ye(b,g.line).text,g.ch,z),U=Math.min(G,V),Z=Math.max(G,V),j=Math.min(m.line,g.line),te=Math.min(p.lastLine(),Math.max(m.line,g.line));j<=te;j++)se=K(oe=Ye(b,j).text,U,z),U==Z?v.push(new Co(tt(j,se),tt(j,se))):oe.length>se&&v.push(new Co(tt(j,se),tt(j,K(oe,Z,z))));v.length||v.push(new Co(m,m)),Pi(b,li(p,H.ranges.slice(0,W).concat(v),W),{origin:"*mouse",scroll:!1}),p.scrollIntoView(g)}else G=S,V=el(p,g,y.unit),g=G.anchor,g=0<nt(V.anchor,g)?(ue=V.head,lt(G.from(),V.anchor)):(ue=V.anchor,ot(G.to(),V.head)),(V=H.ranges.slice(0))[W]=function(p,g){var m,y,v,b,S=g.anchor,W=g.head,H=Ye(p.doc,S.line);return 0==nt(S,W)&&S.sticky==W.sticky?g:(m=pe(H))?(v=m[y=le(m,S.ch,S.sticky)]).from!=S.ch&&v.to!=S.ch||0==(H=y+(v.from==S.ch==(1!=v.level)?0:1))||H==m.length?g:(H=(b=(b=W.line!=S.line?0<(W.line-S.line)*("ltr"==p.doc.direction?1:-1):(b=(p=le(m,W.ch,W.sticky))-y||(W.ch-S.ch)*(1==v.level?-1:1),p==H-1||p==H?b<0:0<b))==(1==(H=m[H+(b?-1:0)]).level))?H.from:H.to,b=b?"after":"before",S.ch==H&&S.sticky==b?g:new Co(new tt(S.line,H,b),W)):g}(p,new Co(at(b,g),ue)),Pi(b,li(p,V,W),ae)}function n(g){p.state.selectingText=!1,V=1/0,g&&(Le(g),v.input.focus()),ye(v.wrapper.ownerDocument,"mousemove",U),ye(v.wrapper.ownerDocument,"mouseup",Z),b.history.lastSelOrigin=null}var v,b,S,W,H,z,B,G,V,U,Z;_l&&dr(p),v=p.display,b=p.doc,Le(g),z=(H=b.sel).ranges,y.addNew&&!y.extend?(W=b.sel.contains(m),S=-1<W?z[W]:new Co(m,m)):(S=b.sel.primary(),W=b.sel.primIndex),"rectangle"==y.unit?(y.addNew||(S=new Co(m,m)),m=Jn(p,g,!0,!0),W=-1):(g=el(p,m,y.unit),S=y.extend?Oi(S,g.anchor,g.head,y.extend):g),y.addNew?-1==W?(W=z.length,Pi(b,li(p,z.concat([S]),W),{scroll:!1,origin:"*mouse"})):1<z.length&&z[W].empty()&&"char"==y.unit&&!y.extend?(Pi(b,li(p,z.slice(0,W).concat(z.slice(W+1)),0),{scroll:!1,origin:"*mouse"}),H=b.sel):Wi(b,W,S,ae):(Pi(b,new xo([S],W=0),ae),H=b.sel),B=m,G=v.wrapper.getBoundingClientRect(),V=0,U=Er(p,(function(g){(0!==g.buttons&&Oe(g)?function e(g){var m,S,W=++V,H=Jn(p,g,!0,"rectangle"==y.unit);H&&(0!=nt(H,B)?(p.curOp.focus=O(),s(H),m=vr(v,b),(H.line>=m.to||H.line<m.from)&&setTimeout(Er(p,(function(){V==W&&e(g)})),150)):(S=g.clientY<G.top?-20:g.clientY>G.bottom?20:0)&&setTimeout(Er(p,(function(){V==W&&(v.scroller.scrollTop+=S,e(g))})),50))}:n)(g)})),Z=Er(p,n),p.state.selectingText=Z,Re(v.wrapper.ownerDocument,"mousemove",U),Re(v.wrapper.ownerDocument,"mouseup",Z)})(p,v,g,S)}(W,g,b,p):Ne(p)==B.scroller&&Le(p):2==y?(g&&Ai(W.doc,g),setTimeout((function(){return B.input.focus()}),20)):3==y&&(V?W.display.input.onContextMenu(p):dr(W)))))}function el(p,g,m){return"char"==m?new Co(g,g):"word"==m?p.findWordAt(g):"line"==m?new Co(tt(g.line,0),at(p.doc,tt(g.line+1,0))):(g=m(p,g),new Co(g.from,g.to))}function tl(p,g,m,y){var v,b,S,W,H;if(g.touches)v=g.touches[0].clientX,b=g.touches[0].clientY;else try{v=g.clientX,b=g.clientY}catch(p){return!1}if(v>=Math.floor(p.display.gutters.getBoundingClientRect().right))return!1;if(y&&Le(g),b>(y=(S=p.display).lineDiv.getBoundingClientRect()).bottom||!Ce(p,m))return Te(g);for(b-=y.top-S.viewOffset,W=0;W<p.display.gutterSpecs.length;++W)if((H=S.gutters.childNodes[W])&&H.getBoundingClientRect().right>=v)return be(p,m,p,Qe(p.doc,b),p.display.gutterSpecs[W].className,g),Te(g)}function nl(p,g){return tl(p,g,"gutterClick",!0)}function rl(p,g){var m,y;pn(p.display,g)||(y=g,Ce(m=p,"gutterContextMenu")&&tl(m,y,"gutterContextMenu",!1))||we(p,g,"contextmenu")||V||p.display.input.onContextMenu(g)}function il(p){p.display.wrapper.className=p.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+p.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Dn(p)}function al(p,g,m){!g!=!(m&&m!=Nl)&&(m=p.display.dragFunctions,(g=g?Re:ye)(p.display.scroller,"dragstart",m.start),g(p.display.scroller,"dragenter",m.enter),g(p.display.scroller,"dragover",m.over),g(p.display.scroller,"dragleave",m.leave),g(p.display.scroller,"drop",m.drop))}function ul(p){p.options.lineWrapping?(A(p.display.wrapper,"CodeMirror-wrap"),p.display.sizer.style.minWidth="",p.display.sizerWidth=null):(U(p.display.wrapper,"CodeMirror-wrap"),Vt(p)),Qn(p),tr(p),Dn(p),setTimeout((function(){return Nr(p)}),100)}function cl(p,y){var v,b,S,H,z=this;if(!(this instanceof cl))return new cl(p,y);for(b in this.options=y=y?P(y):{},P(Ol,y,!1),"string"==typeof(v=y.value)?v=new ho(v,y.mode,null,y.lineSeparator,y.direction):y.mode&&(v.modeOption=y.mode),this.doc=v,S=new cl.inputStyles[y.inputStyle](this),il((S=this.display=new Qr(p,v,S,y)).wrapper.CodeMirror=this),y.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Dr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new I,keySeq:null,specialChars:null},y.autofocus&&!W&&S.input.focus(),_l&&ql<11&&setTimeout((function(){return z.display.input.reset(!0)}),20),function(p){function l(){S.activeTouch&&(y=setTimeout((function(){return S.activeTouch=null}),1e3),(v=S.activeTouch).end=+new Date)}function s(p,g){if(null==g.left)return 1;var m=g.left-p.left,p;return 400<m*m+(p=g.top-p.top)*p}var y,v,b,S=p.display;Re(S.scroller,"mousedown",Er(p,Jo)),Re(S.scroller,"dblclick",_l&&ql<11?Er(p,(function(g){var m;we(p,g)||!(m=Jn(p,g))||nl(p,g)||pn(p.display,g)||(Le(g),m=p.findWordAt(m),Ai(p.doc,m.anchor,m.head))})):function(g){return we(p,g)||Le(g)}),Re(S.scroller,"contextmenu",(function(g){return rl(p,g)})),Re(S.input.getField(),"contextmenu",(function(g){S.scroller.contains(g.target)||rl(p,g)})),v={end:0},Re(S.scroller,"touchstart",(function(g){var m;we(p,g)||function(p){if(1==p.touches.length)return(p=p.touches[0]).radiusX<=1&&p.radiusY<=1}(g)||nl(p,g)||(S.input.ensurePolled(),clearTimeout(y),m=+new Date,S.activeTouch={start:m,moved:!1,prev:m-v.end<=300?v:null},1==g.touches.length&&(S.activeTouch.left=g.touches[0].pageX,S.activeTouch.top=g.touches[0].pageY))})),Re(S.scroller,"touchmove",(function(){S.activeTouch&&(S.activeTouch.moved=!0)})),Re(S.scroller,"touchend",(function(g){var m,y=S.activeTouch;y&&!pn(S,g)&&null!=y.left&&!y.moved&&new Date-y.start<300&&(m=p.coordsChar(S.activeTouch,"page"),m=!y.prev||s(y,y.prev)?new Co(m,m):!y.prev.prev||s(y,y.prev.prev)?p.findWordAt(m):new Co(tt(m.line,0),at(p.doc,tt(m.line+1,0))),p.setSelection(m.anchor,m.head),p.focus(),Le(g)),l()})),Re(S.scroller,"touchcancel",l),Re(S.scroller,"scroll",(function(){S.scroller.clientHeight&&(Lr(p,S.scroller.scrollTop),Tr(p,S.scroller.scrollLeft,!0),be(p,"scroll",p))})),Re(S.scroller,"mousewheel",(function(g){return ri(p,g)})),Re(S.scroller,"DOMMouseScroll",(function(g){return ri(p,g)})),Re(S.wrapper,"scroll",(function(){return S.wrapper.scrollTop=S.wrapper.scrollLeft=0})),S.dragFunctions={enter:function(g){we(p,g)||Me(g)},over:function(g){var m,y;we(p,g)||((y=Jn(m=p,y=g))&&(ar(m,y,y=document.createDocumentFragment()),m.display.dragCursor||(m.display.dragCursor=M("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),m.display.lineSpace.insertBefore(m.display.dragCursor,m.display.cursorDiv)),k(m.display.dragCursor,y)),Me(g))},start:function(y){var v,b;v=p,b=y,_l&&(!v.state.draggingText||+new Date-Ro<100)?Me(b):we(v,b)||pn(v.display,b)||(b.dataTransfer.setData("Text",v.getSelection()),b.dataTransfer.effectAllowed="copyMove",b.dataTransfer.setDragImage&&!m&&((y=M("img",null,null,"position: fixed; left: 0; top: 0;")).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",g&&(y.width=y.height=1,v.display.wrapper.appendChild(y),y._top=y.offsetTop),b.dataTransfer.setDragImage(y,0,0),g&&y.parentNode.removeChild(y)))},drop:Er(p,go),leave:function(g){we(p,g)||mo(p)}},b=S.input.getField(),Re(b,"keyup",(function(g){return _o.call(p,g)})),Re(b,"keydown",Er(p,Yo)),Re(b,"keypress",Er(p,$o)),Re(b,"focus",(function(g){return fr(p,g)})),Re(b,"blur",(function(g){return pr(p,g)}))}(this),bo(),Hr(this),this.curOp.forceUpdate=!0,vi(this,v),y.autofocus&&!W||this.hasFocus()?setTimeout((function(){z.hasFocus()&&!z.state.focused&&fr(z)}),20):pr(this),Al)Al.hasOwnProperty(b)&&Al[b](this,y[b],Nl);for(_r(this),y.finishInit&&y.finishInit(this),H=0;H<Wl.length;++H)Wl[H](this);Fr(this),Xl&&y.lineWrapping&&"optimizelegibility"==getComputedStyle(S.lineDiv).textRendering&&(S.lineDiv.style.textRendering="auto")}function dl(p,g,m,y){var v,b,S,W,H,z,B,G,V,U,Z,j=p.doc;if("smart"==(m=null==m?"add":m)&&(j.mode.indent?v=pt(p,g).state:m="prev"),b=p.options.tabSize,W=E((S=Ye(j,g)).text,null,b),S.stateAfter&&(S.stateAfter=null),H=S.text.match(/^\s*/)[0],y||/\S/.test(S.text)){if("smart"==m&&((z=j.mode.indent(v,S.text.slice(H.length),S.text))==oe||150<z)){if(!y)return;m="prev"}}else z=0,m="not";if("prev"==m?z=g>j.first?E(Ye(j,g-1).text,null,b):0:"add"==m?z=W+p.options.indentUnit:"subtract"==m?z=W-p.options.indentUnit:"number"==typeof m&&(z=W+m),z=Math.max(0,z),B="",G=0,p.options.indentWithTabs)for(V=Math.floor(z/b);V;--V)G+=b,B+="\t";if(G<z&&(B+=X(z-G)),B!=H)return qi(j,B,tt(g,0),tt(g,H.length),"+input"),!(S.stateAfter=null);for(U=0;U<j.sel.ranges.length;U++)if((Z=j.sel.ranges[U]).head.line==g&&Z.head.ch<H.length){Z=tt(g,H.length),Wi(j,U,new Co(Z,Z));break}}function pl(p){Pl=p}function gl(p,g,m,y,v){var b,S,W,H,z,B,G,V,U,Z,j=p.doc;if(p.display.shift=!1,y=y||j.sel,b=+new Date-200,S="paste"==v||p.state.pasteIncoming>b,W=Xe(g),H=null,S&&1<y.ranges.length)if(Pl&&Pl.text.join("\n")==g){if(y.ranges.length%Pl.text.length==0)for(H=[],z=0;z<Pl.text.length;z++)H.push(j.splitLines(Pl.text[z]))}else W.length==y.ranges.length&&p.options.pasteLinesPerSelection&&(H=_(W,(function(p){return[p]})));for(B=p.curOp.updateInput,G=y.ranges.length-1;0<=G;G--)U=(V=y.ranges[G]).from(),Z=V.to(),V.empty()&&(m&&0<m?U=tt(U.line,U.ch-m):p.state.overwrite&&!S?Z=tt(Z.line,Math.min(Ye(j,Z.line).text.length,Z.ch+Y(W).length)):S&&Pl&&Pl.lineWise&&Pl.text.join("\n")==W.join("\n")&&(U=Z=tt(U.line,0))),Z={from:U,to:Z,text:H?H[G%H.length]:W,origin:v||(S?"paste":p.state.cutIncoming>b?"cut":"+input")},ji(p.doc,Z),rn(p,"inputRead",p,Z);g&&!S&&vl(p,g),wr(p),p.curOp.updateInput<2&&(p.curOp.updateInput=B),p.curOp.typing=!0,p.state.pasteIncoming=p.state.cutIncoming=-1}function ml(p,g){var m=p.clipboardData&&p.clipboardData.getData("Text");return m&&(p.preventDefault(),g.isReadOnly()||g.options.disableInput||Pr(g,(function(){return gl(g,m,0,null,"paste")})),1)}function vl(p,g){var m,y,v,b,S,W;if(p.options.electricChars&&p.options.smartIndent)for(y=(m=p.doc.sel).ranges.length-1;0<=y;y--)if(!(100<(v=m.ranges[y]).head.ch||y&&m.ranges[y-1].head.line==v.head.line)){if(S=!1,(b=p.getModeAt(v.head)).electricChars){for(W=0;W<b.electricChars.length;W++)if(-1<g.indexOf(b.electricChars.charAt(W))){S=dl(p,v.head.line,"smart");break}}else b.electricInput&&b.electricInput.test(Ye(p.doc,v.head.line).text.slice(0,v.head.ch))&&(S=dl(p,v.head.line,"smart"));S&&rn(p,"electricInput",p,v.head.line)}}function yl(p){var g,m,y,v;for(g=[],m=[],y=0;y<p.doc.sel.ranges.length;y++)v={anchor:tt(v=p.doc.sel.ranges[y].head.line,0),head:tt(v+1,0)},m.push(v),g.push(p.getRange(v.anchor,v.head));return{text:g,ranges:m}}function bl(p,g,m,y){p.setAttribute("autocorrect",m?"":"off"),p.setAttribute("autocapitalize",y?"":"off"),p.setAttribute("spellcheck",!!g)}function wl(){var p=M("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),g=M("div",[p],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return Xl?p.style.width="1000px":p.setAttribute("wrap","off"),b&&(p.style.border="1px solid black"),bl(p),g}function xl(p,g,m,y,v){function n(b){var S,W,H;if(null==(W="codepoint"==y?(S=V.text.charCodeAt(g.ch+(0<m?0:-1)),isNaN(S)?null:(W=0<m?55296<=S&&S<56320:56320<=S&&S<57343,new tt(g.line,Math.max(0,Math.min(V.text.length,g.ch+m*(W?2:1))),-m))):v?Io(p.cm,V,g,m):Po(V,g,m))){if(b||(H=g.line+U)<p.first||H>=p.first+p.size||(g=new tt(H,g.ch,g.sticky),!(V=Ye(p,H))))return;g=Eo(v,p.cm,V,g.line,U)}else g=W;return 1}var b,S,W,H,z,B=g,G=m,V=Ye(p,g.line),U=v&&"rtl"==p.direction?-m:m;if("char"==y||"codepoint"==y)n();else if("column"==y)n(!0);else if("word"==y||"group"==y)for(b=null,S="group"==y,W=p.cm&&p.cm.getHelper(g,"wordChars"),H=!0;!(m<0)||n(!H);H=!1){if(z=J(z=V.text.charAt(g.ch)||"\n",W)?"w":S&&"\n"==z?"n":!S||/\s/.test(z)?null:"p",!S||H||z||(z="s"),b&&b!=z){m<0&&(m=1,n(),g.sticky="after");break}if(z&&(b=z),0<m&&!n(!H))break}return rt(B,G=Gi(p,g,B,G,!0))&&(G.hitSide=!0),G}function Cl(p,g,m,y){var v,b,S,W=p.doc,H=g.left;for("page"==y?(v=Math.min(p.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),v=Math.max(v-.5*Yn(p.display),3),b=(0<m?g.bottom:g.top)+m*v):"line"==y&&(b=0<m?g.bottom+3:g.top-3);(S=Gn(p,H,b)).outside;){if(m<0?b<=0:b>=W.height){S.hitSide=!0;break}b+=5*m}return S}function Sl(p,g){var m,y=Sn(p,g.line);return!y||y.hidden?null:(y=xn(y,m=Ye(p.doc,g.line),g.line),m=pe(m,p.doc.direction),p="left",m&&(p=le(m,g.ch)%2?"right":"left"),(p=Nn(y.map,g.ch,p)).offset="right"==p.collapse?p.end:p.start,p)}function Ll(p,g){return g&&(p.bad=!0),p}function kl(p,g,m){var y,v,b;if(g==p.display.lineDiv){if(!(y=p.display.lineDiv.childNodes[m]))return Ll(p.clipPos(tt(p.display.viewTo-1)),!0);g=null,m=0}else for(y=g;;y=y.parentNode){if(!y||y==p.display.lineDiv)return null;if(y.parentNode&&y.parentNode==p.display.lineDiv)break}for(v=0;v<p.display.view.length;v++)if((b=p.display.view[v]).node==y)return function(p,g,m){function l(g,m,y){var v,W,H,z,B,G;for(v=-1;v<(S?S.length:0);v++)for(W=v<0?b.map:S[v],H=0;H<W.length;H+=3)if((z=W[H+2])==g||z==m)return B=Ze(v<0?p.line:p.rest[v]),G=W[H]+y,tt(B,G=y<0||z!=g?W[H+(y?1:0)]:G)}var y,v,b,S,W,H,z,B,G,V=p.text.firstChild,U=!1;if(!g||!N(V,g))return Ll(tt(Ze(p.line),0),!0);if(g==V&&(U=!0,g=V.childNodes[m],m=0,!g))return Ll(tt(Ze(y=p.rest?Y(p.rest):p.line),y.text.length),U);for(v=g,(y=3==g.nodeType?g:null)||1!=g.childNodes.length||3!=g.firstChild.nodeType||(y=g.firstChild,m=m&&y.nodeValue.length);v.parentNode!=V;)v=v.parentNode;if(b=p.measure,S=b.maps,W=l(y,v,m))return Ll(W,U);for(H=v.nextSibling,z=y?y.nodeValue.length-m:0;H;H=H.nextSibling){if(W=l(H,H.firstChild,0))return Ll(tt(W.line,W.ch-z),U);z+=H.textContent.length}for(B=v.previousSibling,G=m;B;B=B.previousSibling){if(W=l(B,B.firstChild,-1))return Ll(tt(W.line,W.ch+G),U);G+=B.textContent.length}}(b,g,m)}function Dl(p,g,m,y){El.defaults[p]=g,m&&(Hl[p]=y?function(p,g,y){y!=Nl&&m(p,g,y)}:m)}var p,g,m,y,v,b,S,W,H,z,B,G,V,U,Z,j,te,oe,se,ae,ue,ce,he,de,ge,me,De,Ae,We,Pe,Ee,He,Re,Fe,Ie,Ge,Xe,ht,yt,Ct,St,Kt,jt,Xt,en,nn,Mn,Tn,Ar,Wr,Gr,Jr,ei,ii,oi,lo,ao,fo,po,yo,xo,Co,So,Lo,ko,Ro,Uo,Zo,Xo,Qo,ol,ll,sl,hl,fl,Ml,Tl,Nl,Ol,Al,Wl,Pl,El,Hl,Rl,Fl,Il,zl,Yl,Bl,Gl=navigator.userAgent,Vl=navigator.platform,Ul=/gecko\/\d/i.test(Gl),Kl=/MSIE \d/.test(Gl),Zl=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Gl),jl=/Edge\/(\d+)/.exec(Gl),_l=Kl||Zl||jl,ql=_l&&(Kl?document.documentMode||6:+(jl||Zl)[1]),Xl=!jl&&/WebKit\//.test(Gl);Zl=Xl&&/Qt\/\d+\.\d+/.test(Gl),p=!jl&&/Chrome\//.test(Gl),g=/Opera\//.test(Gl),m=/Apple Computer/.test(navigator.vendor),y=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Gl),v=/PhantomJS/.test(Gl),b=m&&(/Mobile\/\w+/.test(Gl)||2<navigator.maxTouchPoints),S=/Android/.test(Gl),W=b||S||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Gl),H=b||/Mac/.test(Vl),z=/\bCrOS\b/.test(Gl),B=/win/i.test(Vl),(Gl=(Gl=g&&Gl.match(/Version\/(\d*\.\d*)/))&&Number(Gl[1]))&&15<=Gl&&(Xl=!(g=!1)),G=H&&(Zl||g&&(null==Gl||Gl<12.11)),V=Ul||_l&&9<=ql,U=function(p,g){var m=p.className,y=C(g).exec(m);y&&(g=m.slice(y.index+y[0].length),p.className=m.slice(0,y.index)+(g?y[1]+g:""))},Z=document.createRange?function(p,g,m,y){var v=document.createRange();return v.setEnd(y||p,m),v.setStart(p,g),v}:function(p,g,m){var y=document.body.createTextRange();try{y.moveToElementText(p.parentNode)}catch(p){return y}return y.collapse(!0),y.moveEnd("character",m),y.moveStart("character",g),y},j=function(p){p.select()},b?j=function(p){p.selectionStart=0,p.selectionEnd=p.value.length}:_l&&(j=function(p){try{p.select()}catch(p){}}),I.prototype.onTimeout=function(p){p.id=0,p.time<=+new Date?p.f():setTimeout(p.handler,p.time-+new Date)},te=50,oe={toString:function(){return"CodeMirror.Pass"}},se={scroll:!(I.prototype.set=function(p,g){this.f=g,g=+new Date+p,(!this.id||g<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,p),this.time=g)})},ae={origin:"*mouse"},ue={origin:"+move"},ce=[""],he=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,de=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,ge=null,me=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,De=/[stwN]/,Ae=/[LRr]/,We=/[Lb1n]/,Pe=/[1n]/,Ee=function(p,g){var m,y,v,b,S,W,H,z,B,G,V,U,Z,j,te,oe,se,ae,ue,ce,he,de,ge,Ee,He,Re,Fe,Ie,Ge,Xe,ht,yt,Ct,St,Kt,jt="ltr"==g?"L":"R";if(0==p.length||"ltr"==g&&!me.test(p))return!1;for(y=p.length,v=[],b=0;b<y;++b)v.push((m=p.charCodeAt(b))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(m):1424<=m&&m<=1524?"R":1536<=m&&m<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(m-1536):1774<=m&&m<=2220?"r":8192<=m&&m<=8203?"w":8204==m?"b":"L");for(S=0,W=jt;S<y;++S)"m"==(H=v[S])?v[S]=W:W=H;for(z=0,B=jt;z<y;++z)"1"==(G=v[z])&&"r"==B?v[z]="n":Ae.test(G)&&"r"==(B=G)&&(v[z]="R");for(V=1,U=v[0];V<y-1;++V)"+"==(Z=v[V])&&"1"==U&&"1"==v[V+1]?v[V]="1":","!=Z||U!=v[V+1]||"1"!=U&&"n"!=U||(v[V]=U),U=Z;for(j=0;j<y;++j)if(","==(te=v[j]))v[j]="N";else if("%"==te){for(oe=void 0,oe=j+1;oe<y&&"%"==v[oe];++oe);for(se=j&&"!"==v[j-1]||oe<y&&"1"==v[oe]?"1":"N",ae=j;ae<oe;++ae)v[ae]=se;j=oe-1}for(ue=0,ce=jt;ue<y;++ue)he=v[ue],"L"==ce&&"1"==he?v[ue]="L":Ae.test(he)&&(ce=he);for(de=0;de<y;++de)if(De.test(v[de])){for(ge=void 0,ge=de+1;ge<y&&De.test(v[ge]);++ge);for(He=(Ee="L"==(de?v[de-1]:jt))==("L"==(ge<y?v[ge]:jt))?Ee?"L":"R":jt,Re=de;Re<ge;++Re)v[Re]=He;de=ge-1}for(Ie=[],Ge=0;Ge<y;)if(We.test(v[Ge])){for(Xe=Ge,++Ge;Ge<y&&We.test(v[Ge]);++Ge);Ie.push(new fe(0,Xe,Ge))}else{for(ht=Ge,yt=Ie.length,Ct="rtl"==g?1:0,++Ge;Ge<y&&"L"!=v[Ge];++Ge);for(St=ht;St<Ge;)if(Pe.test(v[St])){for(ht<St&&(Ie.splice(yt,0,new fe(1,ht,St)),yt+=Ct),Kt=St,++St;St<Ge&&Pe.test(v[St]);++St);Ie.splice(yt,0,new fe(2,Kt,St)),yt+=Ct,ht=St}else++St;ht<Ge&&Ie.splice(yt,0,new fe(1,ht,Ge))}return"ltr"==g&&(1==Ie[0].level&&(Fe=p.match(/^\s+/))&&(Ie[0].from=Fe[0].length,Ie.unshift(new fe(0,0,Fe[0].length))),1==Y(Ie).level&&(Fe=p.match(/\s+$/))&&(Y(Ie).to-=Fe[0].length,Ie.push(new fe(0,y-Fe[0].length,y)))),"rtl"==g?Ie.reverse():Ie},He=[],Re=function(p,g,m){p.addEventListener?p.addEventListener(g,m,!1):p.attachEvent?p.attachEvent("on"+g,m):(p=p._handlers||(p._handlers={}))[g]=(p[g]||He).concat(m)},Ge=function(){if(_l&&ql<9)return!1;var p=M("div");return"draggable"in p||"dragDrop"in p}(),Xe=3!="\n\nb".split(/\n/).length?function(p){var g,m,y,v,b,S;for(g=0,m=[],y=p.length;g<=y;)-1==(v=p.indexOf("\n",g))&&(v=p.length),-1!=(S=(b=p.slice(g,"\r"==p.charAt(v-1)?v-1:v)).indexOf("\r"))?(m.push(b.slice(0,S)),g+=S+1):(m.push(b),g=v+1);return m}:function(p){return p.split(/\r\n?|\n/)},ht=window.getSelection?function(p){try{return p.selectionStart!=p.selectionEnd}catch(p){return!1}}:function(p){var g;try{g=p.ownerDocument.selection.createRange()}catch(p){}return!(!g||g.parentElement()!=p)&&0!=g.compareEndPoints("StartToEnd",g)},yt="oncopy"in(Zl=M("div"))||(Zl.setAttribute("oncopy","return;"),"function"==typeof Zl.oncopy),Ct=null,St={},Kt={},jt={},Xt=function(p,g,m){this.pos=this.start=0,this.string=p,this.tabSize=g||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=m},Xt.prototype.eol=function(){return this.pos>=this.string.length},Xt.prototype.sol=function(){return this.pos==this.lineStart},Xt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Xt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Xt.prototype.eat=function(p){var g=this.string.charAt(this.pos),p;if(p="string"==typeof p?g==p:g&&(p.test?p.test(g):p(g)))return++this.pos,g},Xt.prototype.eatWhile=function(p){for(var g=this.pos;this.eat(p););return this.pos>g},Xt.prototype.eatSpace=function(){for(var p=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>p},Xt.prototype.skipToEnd=function(){this.pos=this.string.length},Xt.prototype.skipTo=function(p){if(-1<(p=this.string.indexOf(p,this.pos)))return this.pos=p,!0},Xt.prototype.backUp=function(p){this.pos-=p},Xt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=E(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?E(this.string,this.lineStart,this.tabSize):0)},Xt.prototype.indentation=function(){return E(this.string,null,this.tabSize)-(this.lineStart?E(this.string,this.lineStart,this.tabSize):0)},Xt.prototype.match=function(p,g,m){if("string"!=typeof p){var y=this.string.slice(this.pos).match(p);return y&&0<y.index?null:(y&&!1!==g&&(this.pos+=y[0].length),y)}if(y=function(p){return m?p.toLowerCase():p},y(this.string.substr(this.pos,p.length))==y(p))return!1!==g&&(this.pos+=p.length),!0},Xt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Xt.prototype.hideFirstChars=function(p,g){this.lineStart+=p;try{return g()}finally{this.lineStart-=p}},Xt.prototype.lookAhead=function(p){var g=this.lineOracle;return g&&g.lookAhead(p)},Xt.prototype.baseToken=function(){var p=this.lineOracle;return p&&p.baseToken(this.pos)},en=function(p,g,m,y){this.state=g,this.doc=p,this.line=m,this.maxLookAhead=y||0,this.baseTokens=null,this.baseTokenPos=1},en.prototype.lookAhead=function(p){var g=this.doc.getLine(this.line+p);return null!=g&&p>this.maxLookAhead&&(this.maxLookAhead=p),g},en.prototype.baseToken=function(p){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=p;)this.baseTokenPos+=2;var g=this.baseTokens[this.baseTokenPos+1];return{type:g&&g.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-p}},en.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},en.fromSaved=function(p,g,m){return g instanceof ct?new en(p,Ve(p.mode,g.state),m,g.lookAhead):new en(p,Ve(p.mode,g),m)},en.prototype.save=function(p){return p=!1!==p?Ve(this.doc.mode,this.state):this.state,0<this.maxLookAhead?new ct(p,this.maxLookAhead):p},nn=function(p,g,m){this.start=p.start,this.end=p.pos,this.string=p.current(),this.type=g||null,this.state=m},Mn=!1,Tn=!1,Ar=function(p,g,m){this.text=p,Ot(this,g),this.height=m?m(this):1},Ar.prototype.lineNo=function(){return Ze(this)},Se(Ar),Wr={},Gr={},Jr=null,ei=null,oi={left:0,right:0,top:0,bottom:0},Gl=function(p,g,m){this.cm=m;var y=this.vert=M("div",[M("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),v=this.horiz=M("div",[M("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");y.tabIndex=v.tabIndex=-1,p(y),p(v),Re(y,"scroll",(function(){y.clientHeight&&g(y.scrollTop,"vertical")})),Re(v,"scroll",(function(){v.clientWidth&&g(v.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,_l&&ql<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")},Gl.prototype.update=function(p){var g,m=p.scrollWidth>p.clientWidth+1,y=p.scrollHeight>p.clientHeight+1,v=p.nativeBarWidth;return y?(this.vert.style.display="block",this.vert.style.bottom=m?v+"px":"0",g=p.viewHeight-(m?v:0),this.vert.firstChild.style.height=Math.max(0,p.scrollHeight-p.clientHeight+g)+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),m?(this.horiz.style.display="block",this.horiz.style.right=y?v+"px":"0",this.horiz.style.left=p.barLeft+"px",g=p.viewWidth-p.barLeft-(y?v:0),this.horiz.firstChild.style.width=Math.max(0,p.scrollWidth-p.clientWidth+g)+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&0<p.clientHeight&&(0==v&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:y?v:0,bottom:m?v:0}},Gl.prototype.setScrollLeft=function(p){this.horiz.scrollLeft!=p&&(this.horiz.scrollLeft=p),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Gl.prototype.setScrollTop=function(p){this.vert.scrollTop!=p&&(this.vert.scrollTop=p),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Gl.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=H&&!y?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new I,this.disableVert=new I},Gl.prototype.enableZeroWidthBar=function(p,g,m){p.style.pointerEvents="auto",g.set(1e3,(function e(){var y=p.getBoundingClientRect();("vert"==m?document.elementFromPoint(y.right-1,(y.top+y.bottom)/2):document.elementFromPoint((y.right+y.left)/2,y.bottom-1))!=p?p.style.pointerEvents="none":g.set(1e3,e)}))},Gl.prototype.clear=function(){var p=this.horiz.parentNode;p.removeChild(this.horiz),p.removeChild(this.vert)},(Zl=function(){}).prototype.update=function(){return{bottom:0,right:0}},Zl.prototype.setScrollLeft=function(){},Zl.prototype.setScrollTop=function(){},Zl.prototype.clear=function(){},lo={native:Gl,null:Zl},ao=0,fo=function(p,g,m){var y=p.display;this.viewport=g,this.visible=vr(y,p.doc,g),this.editorIsHidden=!y.wrapper.offsetWidth,this.wrapperHeight=y.wrapper.clientHeight,this.wrapperWidth=y.wrapper.clientWidth,this.oldDisplayWidth=bn(p),this.force=m,this.dims=$n(p),this.events=[]},fo.prototype.signal=function(p,g){Ce(p,g)&&this.events.push(arguments)},fo.prototype.finish=function(){for(var p=0;p<this.events.length;p++)be.apply(null,this.events[p])},po=0,yo=null,_l?yo=-.53:Ul?yo=15:p?yo=-.7:m&&(yo=-1/3),xo=function(p,g){this.ranges=p,this.primIndex=g},xo.prototype.primary=function(){return this.ranges[this.primIndex]},xo.prototype.equals=function(p){var g,m,y;if(p==this)return!0;if(p.primIndex!=this.primIndex||p.ranges.length!=this.ranges.length)return!1;for(g=0;g<this.ranges.length;g++)if(m=this.ranges[g],y=p.ranges[g],!rt(m.anchor,y.anchor)||!rt(m.head,y.head))return!1;return!0},xo.prototype.deepCopy=function(){for(var p=[],g=0;g<this.ranges.length;g++)p[g]=new Co(it(this.ranges[g].anchor),it(this.ranges[g].head));return new xo(p,this.primIndex)},xo.prototype.somethingSelected=function(){for(var p=0;p<this.ranges.length;p++)if(!this.ranges[p].empty())return!0;return!1},xo.prototype.contains=function(p,g){var m,y;for(g=g||p,m=0;m<this.ranges.length;m++)if(0<=nt(g,(y=this.ranges[m]).from())&&nt(p,y.to())<=0)return m;return-1},Co=function(p,g){this.anchor=p,this.head=g},Co.prototype.from=function(){return lt(this.anchor,this.head)},Co.prototype.to=function(){return ot(this.anchor,this.head)},Co.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},to.prototype={chunkSize:function(){return this.lines.length},removeInner:function(p,g){var m,y,v,b;for(y=p,v=p+g;y<v;++y)b=this.lines[y],this.height-=b.height,(m=b).parent=null,Nt(m),rn(b,"delete");this.lines.splice(p,g)},collapse:function(p){p.push.apply(p,this.lines)},insertInner:function(p,g,m){this.height+=m,this.lines=this.lines.slice(0,p).concat(g).concat(this.lines.slice(p));for(var y=0;y<g.length;++y)g[y].parent=this},iterN:function(p,g,m){for(var y=p+g;p<y;++p)if(m(this.lines[p]))return!0}},no.prototype={chunkSize:function(){return this.size},removeInner:function(p,g){var m,y,v,b,S,W;for(this.size-=g,y=0;y<this.children.length;++y)if(p<(b=(v=this.children[y]).chunkSize())){if(S=Math.min(g,b-p),W=v.height,v.removeInner(p,S),this.height-=W-v.height,b==S&&(this.children.splice(y--,1),v.parent=null),0==(g-=S))break;p=0}else p-=b;this.size-g<25&&(1<this.children.length||!(this.children[0]instanceof to))&&(this.collapse(m=[]),this.children=[new to(m)],this.children[0].parent=this)},collapse:function(p){for(var g=0;g<this.children.length;++g)this.children[g].collapse(p)},insertInner:function(p,g,m){var y,v,b,S,W,H;for(this.size+=g.length,this.height+=m,y=0;y<this.children.length;++y){if(p<=(b=(v=this.children[y]).chunkSize())){if(v.insertInner(p,g,m),v.lines&&50<v.lines.length){for(W=S=v.lines.length%25+25;W<v.lines.length;)H=new to(v.lines.slice(W,W+=25)),v.height-=H.height,this.children.splice(++y,0,H),H.parent=this;v.lines=v.lines.slice(0,S),this.maybeSpill()}break}p-=b}},maybeSpill:function(){var p,g,m;if(!(this.children.length<=10)){p=this;do{m=new no(p.children.splice(p.children.length-5,5))}while(p.parent?(p.size-=m.size,p.height-=m.height,g=R(p.parent.children,p),p.parent.children.splice(g+1,0,m)):(((g=new no(p.children)).parent=p).children=[g,m],p=g),m.parent=p.parent,10<p.children.length);p.parent.maybeSpill()}},iterN:function(p,g,m){var y,v,b,S;for(y=0;y<this.children.length;++y)if(p<(b=(v=this.children[y]).chunkSize())){if(S=Math.min(g,b-p),v.iterN(p,S,m))return!0;if(0==(g-=S))break;p=0}else p-=b}},ro.prototype.clear=function(){var p,g,m=this.doc.cm,y=this.line.widgets,v=this.line,b=Ze(v);if(null!=b&&y){for(p=0;p<y.length;++p)y[p]==this&&y.splice(p--,1);y.length||(v.widgets=null),g=fn(this),qe(v,Math.max(0,v.height-g)),m&&(Pr(m,(function(){io(m,v,-g),nr(m,b,"widget")})),rn(m,"lineWidgetCleared",m,this,b))}},ro.prototype.changed=function(){var p,g=this,m=this.height,y=this.doc.cm,v=this.line;this.height=null,(p=fn(this)-m)&&(Bt(this.doc,v)||qe(v,v.height+p),y&&Pr(y,(function(){y.curOp.forceUpdate=!0,io(y,v,p),rn(y,"lineWidgetChanged",y,g,Ze(v))})))},Se(ro),So=0,oo.prototype.clear=function(){var p,g,m,y,v,b,S,W,H,z,B;if(!this.explicitlyCleared){for((m=(g=this.doc.cm)&&!g.curOp)&&Hr(g),!Ce(this,"clear")||(p=this.find())&&rn(this,"clear",p.from,p.to),y=null,v=null,b=0;b<this.lines.length;++b)W=kt((S=this.lines[b]).markedSpans,this),g&&!this.collapsed?nr(g,Ze(S),"text"):g&&(null!=W.to&&(v=Ze(S)),null!=W.from&&(y=Ze(S))),S.markedSpans=function(p,g){for(var m,y=0;y<p.length;++y)p[y]!=g&&(m=m||[]).push(p[y]);return m}(S.markedSpans,W),null==W.from&&this.collapsed&&!Bt(this.doc,S)&&g&&qe(S,Yn(g.display));if(g&&this.collapsed&&!g.options.lineWrapping)for(H=0;H<this.lines.length;++H)(B=Ut(z=It(this.lines[H])))>g.display.maxLineLength&&(g.display.maxLine=z,g.display.maxLineLength=B,g.display.maxLineChanged=!0);null!=y&&g&&this.collapsed&&tr(g,y,v+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,g&&Ri(g.doc)),g&&rn(g,"markerCleared",g,this,y,v),m&&Fr(g),this.parent&&this.parent.clear()}},oo.prototype.find=function(p,g){var m,y,v,b,S;for(null==p&&"bookmark"==this.type&&(p=1),v=0;v<this.lines.length;++v){if(null!=(S=kt((b=this.lines[v]).markedSpans,this)).from&&(m=tt(g?b:Ze(b),S.from),-1==p))return m;if(null!=S.to&&(y=tt(g?b:Ze(b),S.to),1==p))return y}return m&&{from:m,to:y}},oo.prototype.changed=function(){var p=this,g=this.find(-1,!0),m=this,y=this.doc.cm;g&&y&&Pr(y,(function(){var v=g.line,b=Ze(g.line),b;(b=Sn(y,b))&&(On(b),y.curOp.selectionChanged=y.curOp.forceUpdate=!0),y.curOp.updateMaxLine=!0,Bt(m.doc,v)||null==m.height||(b=m.height,m.height=null,(b=fn(m)-b)&&qe(v,v.height+b)),rn(y,"markerChanged",y,p)}))},oo.prototype.attachLine=function(p){var g;!this.lines.length&&this.doc.cm&&((g=this.doc.cm.curOp).maybeHiddenMarkers&&-1!=R(g.maybeHiddenMarkers,this)||(g.maybeUnhiddenMarkers||(g.maybeUnhiddenMarkers=[])).push(this)),this.lines.push(p)},oo.prototype.detachLine=function(p){this.lines.splice(R(this.lines,p),1),!this.lines.length&&this.doc.cm&&((p=this.doc.cm.curOp).maybeHiddenMarkers||(p.maybeHiddenMarkers=[])).push(this)},Se(oo),Lo=function(p,g){this.markers=p,this.primary=g;for(var m=0;m<p.length;++m)p[m].parent=this},Lo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var p=0;p<this.markers.length;++p)this.markers[p].clear();rn(this,"clear")}},Lo.prototype.find=function(p,g){return this.primary.find(p,g)},Se(Lo),ko=0,(ho.prototype=q(no.prototype,{constructor:ho,iter:function(p,g,m){m?this.iterN(p-this.first,g-p,m):this.iterN(this.first,this.first+this.size,p)},insert:function(p,g){for(var m=0,y=0;y<g.length;++y)m+=g[y].height;this.insertInner(p-this.first,g,m)},remove:function(p,g){this.removeInner(p-this.first,g)},getValue:function(p){var g=$e(this,this.first,this.first+this.size);return!1===p?g:g.join(p||this.lineSeparator())},setValue:Rr((function(p){var g=tt(this.first,0),m=this.first+this.size-1;ji(this,{from:g,to:tt(m,Ye(this,m).text.length),text:this.splitLines(p),origin:"setValue",full:!0},!0),this.cm&&xr(this.cm,0,0),Pi(this,si(g),se)})),replaceRange:function(p,g,m,y){qi(this,p,g=at(this,g),m=m?at(this,m):g,y)},getRange:function(p,g,m){return g=_e(this,at(this,p),at(this,g)),!1===m?g:""===m?g.join(""):g.join(m||this.lineSeparator())},getLine:function(p){return(p=this.getLineHandle(p))&&p.text},getLineHandle:function(p){if(Je(this,p))return Ye(this,p)},getLineNumber:Ze,getLineHandleVisualStart:function(p){return It(p="number"==typeof p?Ye(this,p):p)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(p){return at(this,p)},getCursor:function(p){var g=this.sel.primary(),g;return g=null==p||"head"==p?g.head:"anchor"==p?g.anchor:"end"==p||"to"==p||!1===p?g.to():g.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Rr((function(p,g,m){Hi(this,at(this,"number"==typeof p?tt(p,g||0):p),null,m)})),setSelection:Rr((function(p,g,m){Hi(this,at(this,p),at(this,g||p),m)})),extendSelection:Rr((function(p,g,m){Ai(this,at(this,p),g&&at(this,g),m)})),extendSelections:Rr((function(p,g){Di(this,ut(this,p),g)})),extendSelectionsBy:Rr((function(p,g){Di(this,ut(this,_(this.sel.ranges,p)),g)})),setSelections:Rr((function(p,g,m){if(p.length){for(var y=[],v=0;v<p.length;v++)y[v]=new Co(at(this,p[v].anchor),at(this,p[v].head||p[v].anchor));null==g&&(g=Math.min(p.length-1,this.sel.primIndex)),Pi(this,li(this.cm,y,g),m)}})),addSelection:Rr((function(p,g,m){var y=this.sel.ranges.slice(0);y.push(new Co(at(this,p),at(this,g||p))),Pi(this,li(this.cm,y,y.length-1),m)})),getSelection:function(p){var g,m,y,v;for(g=this.sel.ranges,m=0;m<g.length;m++)y=_e(this,g[m].from(),g[m].to()),v=v?v.concat(y):y;return!1===p?v:v.join(p||this.lineSeparator())},getSelections:function(p){var g,m,y,v;for(g=[],m=this.sel.ranges,y=0;y<m.length;y++)v=_e(this,m[y].from(),m[y].to()),!1!==p&&(v=v.join(p||this.lineSeparator())),g[y]=v;return g},replaceSelection:function(p,g,m){for(var y=[],v=0;v<this.sel.ranges.length;v++)y[v]=p;this.replaceSelections(y,g,m||"+input")},replaceSelections:Rr((function(p,g,m){var y,v,b,S,W;for(y=[],v=this.sel,b=0;b<v.ranges.length;b++)S=v.ranges[b],y[b]={from:S.from(),to:S.to(),text:this.splitLines(p[b]),origin:m};for(g=g&&"end"!=g&&function(p,g,m){var y,v,b,S,W,H,z;for(y=[],v=z=tt(p.first,0),b=0;b<g.length;b++)W=hi((S=g[b]).from,z,v),H=hi(ai(S),z,v),z=S.to,v=H,"around"==m?(S=nt((S=p.sel.ranges[b]).head,S.anchor)<0,y[b]=new Co(S?H:W,S?W:H)):y[b]=new Co(W,W);return new xo(y,p.sel.primIndex)}(this,y,g),W=y.length-1;0<=W;W--)ji(this,y[W]);g?Fi(this,g):this.cm&&wr(this.cm)})),undo:Rr((function(){Yi(this,"undo")})),redo:Rr((function(){Yi(this,"redo")})),undoSelection:Rr((function(){Yi(this,"undo",!0)})),redoSelection:Rr((function(){Yi(this,"redo",!0)})),setExtending:function(p){this.extend=p},getExtending:function(){return this.extend},historySize:function(){var p,g,m,y,v;for(p=this.history,g=0,m=0,y=0;y<p.done.length;y++)p.done[y].ranges||++g;for(v=0;v<p.undone.length;v++)p.undone[v].ranges||++m;return{undo:g,redo:m}},clearHistory:function(){var p=this;this.history=new bi(this.history),mi(this,(function(g){return g.history=p.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(p){return p&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(p){return this.history.generation==(p||this.cleanGeneration)},getHistory:function(){return{done:Ni(this.history.done),undone:Ni(this.history.undone)}},setHistory:function(p){var g=this.history=new bi(this.history);g.done=Ni(p.done.slice(0),null,!0),g.undone=Ni(p.undone.slice(0),null,!0)},setGutterMarker:Rr((function(p,g,m){return eo(this,p,"gutter",(function(p){var y=p.gutterMarkers||(p.gutterMarkers={});return!(y[g]=m)&&ee(y)&&(p.gutterMarkers=null),1}))})),clearGutter:Rr((function(p){var g=this;this.iter((function(m){m.gutterMarkers&&m.gutterMarkers[p]&&eo(g,m,"gutter",(function(){return m.gutterMarkers[p]=null,ee(m.gutterMarkers)&&(m.gutterMarkers=null),1}))}))})),lineInfo:function(p){var g;if("number"==typeof p){if(!Je(this,p))return null;if(!(p=Ye(this,g=p)))return null}else if(null==(g=Ze(p)))return null;return{line:g,handle:p,text:p.text,gutterMarkers:p.gutterMarkers,textClass:p.textClass,bgClass:p.bgClass,wrapClass:p.wrapClass,widgets:p.widgets}},addLineClass:Rr((function(p,g,m){return eo(this,p,"gutter"==g?"gutter":"class",(function(p){var y="text"==g?"textClass":"background"==g?"bgClass":"gutter"==g?"gutterClass":"wrapClass";if(p[y]){if(C(m).test(p[y]))return;p[y]+=" "+m}else p[y]=m;return 1}))})),removeLineClass:Rr((function(p,g,m){return eo(this,p,"gutter"==g?"gutter":"class",(function(p){var y,v,b="text"==g?"textClass":"background"==g?"bgClass":"gutter"==g?"gutterClass":"wrapClass",S=p[b];if(S){if(null==m)p[b]=null;else{if(!(y=S.match(C(m))))return;v=y.index+y[0].length,p[b]=S.slice(0,y.index)+(y.index&&v!=S.length?" ":"")+S.slice(v)||null}return 1}}))})),addLineWidget:Rr((function(p,g,m){return v=new ro(y=this,g,m),(b=y.cm)&&v.noHScroll&&(b.display.alignWidgets=!0),eo(y,p,"widget",(function(p){var g=p.widgets||(p.widgets=[]);return null==v.insertAt?g.push(v):g.splice(Math.min(g.length,Math.max(0,v.insertAt)),0,v),v.line=p,b&&!Bt(y,p)&&(g=Gt(p)<y.scrollTop,qe(p,p.height+fn(v)),g&&br(b,v.height),b.curOp.forceUpdate=!0),1})),b&&rn(b,"lineWidgetAdded",b,v,"number"==typeof p?p:Ze(p)),v;var y,v,b})),removeLineWidget:function(p){p.clear()},markText:function(p,g,m){return so(this,at(this,p),at(this,g),m,m&&m.type||"range")},setBookmark:function(p,g){return g={replacedWith:g&&(null==g.nodeType?g.widget:g),insertLeft:g&&g.insertLeft,clearWhenEmpty:!1,shared:g&&g.shared,handleMouseEvents:g&&g.handleMouseEvents},so(this,p=at(this,p),p,g,"bookmark")},findMarksAt:function(p){var g,m,y=[],v=Ye(this,(p=at(this,p)).line).markedSpans;if(v)for(g=0;g<v.length;++g)(null==(m=v[g]).from||m.from<=p.ch)&&(null==m.to||m.to>=p.ch)&&y.push(m.marker.parent||m.marker);return y},findMarks:function(p,g,m){p=at(this,p),g=at(this,g);var y=[],v=p.line;return this.iter(p.line,g.line+1,(function(b){var S,W,H=b.markedSpans;if(H)for(S=0;S<H.length;S++)null!=(W=H[S]).to&&v==p.line&&p.ch>=W.to||null==W.from&&v!=p.line||null!=W.from&&v==g.line&&W.from>=g.ch||m&&!m(W.marker)||y.push(W.marker.parent||W.marker);++v})),y},getAllMarks:function(){var p=[];return this.iter((function(g){var m,y=g.markedSpans;if(y)for(m=0;m<y.length;++m)null!=y[m].from&&p.push(y[m].marker)})),p},posFromIndex:function(p){var g,m=this.first,y=this.lineSeparator().length;return this.iter((function(v){if(v=v.text.length+y,p<v)return g=p,!0;p-=v,++m})),at(this,tt(m,g))},indexFromPos:function(p){var g,m=(p=at(this,p)).ch;return p.line<this.first||p.ch<0?0:(g=this.lineSeparator().length,this.iter(this.first,p.line,(function(p){m+=p.text.length+g})),m)},copy:function(p){var g=new ho($e(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return g.scrollTop=this.scrollTop,g.scrollLeft=this.scrollLeft,g.sel=this.sel,g.extend=!1,p&&(g.history.undoDepth=this.history.undoDepth,g.setHistory(this.getHistory())),g},linkedDoc:function(p){var g=this.first,m=this.first+this.size;return null!=(p=p||{}).from&&p.from>g&&(g=p.from),null!=p.to&&p.to<m&&(m=p.to),g=new ho($e(this,g,m),p.mode||this.modeOption,g,this.lineSep,this.direction),p.sharedHist&&(g.history=this.history),(this.linked||(this.linked=[])).push({doc:g,sharedHist:p.sharedHist}),g.linked=[{doc:this,isParent:!0,sharedHist:p.sharedHist}],function(p,g){var m,y,v,b;for(m=0;m<g.length;m++)v=(y=g[m]).find(),nt(b=p.clipPos(v.from),v=p.clipPos(v.to))&&(v=so(p,b,v,y.primary,y.primary.type),y.markers.push(v),v.parent=y)}(g,uo(this)),g},unlinkDoc:function(p){var g,m;if(p instanceof cl&&(p=p.doc),this.linked)for(g=0;g<this.linked.length;++g)if(this.linked[g].doc==p){this.linked.splice(g,1),p.unlinkDoc(this),co(uo(this));break}p.history==this.history&&(m=[p.id],mi(p,(function(p){return m.push(p.id)}),!0),p.history=new bi(null),p.history.done=Ni(this.history.done,m),p.history.undone=Ni(this.history.undone,m))},iterLinkedDocs:function(p){mi(this,p)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(p){return this.lineSep?p.split(this.lineSep):Xe(p)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Rr((function(p){var g;(p="rtl"!=p?"ltr":p)!=this.direction&&(this.direction=p,this.iter((function(p){return p.order=null})),this.cm&&Pr(g=this.cm,(function(){yi(g),tr(g)})))}))})).eachLine=ho.prototype.iter,Ro=0,Uo=!1;for(Zo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Xo=0;Xo<10;Xo++)Zo[Xo+48]=Zo[Xo+96]=String(Xo);for(Qo=65;Qo<=90;Qo++)Zo[Qo]=String.fromCharCode(Qo);for(ol=1;ol<=12;ol++)Zo[ol+111]=Zo[ol+63235]="F"+ol;for(zl in(ll={}).basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ll.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ll.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},ll.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},ll.default=H?ll.macDefault:ll.pcDefault,sl={selectAll:Vi,singleSelection:function(p){return p.setSelection(p.getCursor("anchor"),p.getCursor("head"),se)},killLine:function(p){return Ho(p,(function(g){if(g.empty()){var m=Ye(p.doc,g.head.line).text.length;return g.head.ch==m&&g.head.line<p.lastLine()?{from:g.head,to:tt(g.head.line+1,0)}:{from:g.head,to:tt(g.head.line,m)}}return{from:g.from(),to:g.to()}}))},deleteLine:function(p){return Ho(p,(function(g){return{from:tt(g.from().line,0),to:at(p.doc,tt(g.to().line+1,0))}}))},delLineLeft:function(p){return Ho(p,(function(p){return{from:tt(p.from().line,0),to:p.from()}}))},delWrappedLineLeft:function(p){return Ho(p,(function(g){var m=p.charCoords(g.head,"div").top+5;return{from:p.coordsChar({left:0,top:m},"div"),to:g.from()}}))},delWrappedLineRight:function(p){return Ho(p,(function(g){var m=p.charCoords(g.head,"div").top+5,m=p.coordsChar({left:p.display.lineDiv.offsetWidth+100,top:m},"div");return{from:g.from(),to:m}}))},undo:function(p){return p.undo()},redo:function(p){return p.redo()},undoSelection:function(p){return p.undoSelection()},redoSelection:function(p){return p.redoSelection()},goDocStart:function(p){return p.extendSelection(tt(p.firstLine(),0))},goDocEnd:function(p){return p.extendSelection(tt(p.lastLine()))},goLineStart:function(p){return p.extendSelectionsBy((function(g){return zo(p,g.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(p){return p.extendSelectionsBy((function(g){return Bo(p,g.head)}),{origin:"+move",bias:1})},goLineEnd:function(p){return p.extendSelectionsBy((function(g){return function(p,g){var m=Ye(p.doc,g),y=function(p){for(var g;g=Pt(p);)p=g.find(1,!0).line;return p}(m);return y!=m&&(g=Ze(y)),Eo(!0,p,m,g,-1)}(p,g.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(p){return p.extendSelectionsBy((function(g){return g=p.cursorCoords(g.head,"div").top+5,p.coordsChar({left:p.display.lineDiv.offsetWidth+100,top:g},"div")}),ue)},goLineLeft:function(p){return p.extendSelectionsBy((function(g){return g=p.cursorCoords(g.head,"div").top+5,p.coordsChar({left:0,top:g},"div")}),ue)},goLineLeftSmart:function(p){return p.extendSelectionsBy((function(g){var m=p.cursorCoords(g.head,"div").top+5,m;return(m=p.coordsChar({left:0,top:m},"div")).ch<p.getLine(m.line).search(/\S/)?Bo(p,g.head):m}),ue)},goLineUp:function(p){return p.moveV(-1,"line")},goLineDown:function(p){return p.moveV(1,"line")},goPageUp:function(p){return p.moveV(-1,"page")},goPageDown:function(p){return p.moveV(1,"page")},goCharLeft:function(p){return p.moveH(-1,"char")},goCharRight:function(p){return p.moveH(1,"char")},goColumnLeft:function(p){return p.moveH(-1,"column")},goColumnRight:function(p){return p.moveH(1,"column")},goWordLeft:function(p){return p.moveH(-1,"word")},goGroupRight:function(p){return p.moveH(1,"group")},goGroupLeft:function(p){return p.moveH(-1,"group")},goWordRight:function(p){return p.moveH(1,"word")},delCharBefore:function(p){return p.deleteH(-1,"codepoint")},delCharAfter:function(p){return p.deleteH(1,"char")},delWordBefore:function(p){return p.deleteH(-1,"word")},delWordAfter:function(p){return p.deleteH(1,"word")},delGroupBefore:function(p){return p.deleteH(-1,"group")},delGroupAfter:function(p){return p.deleteH(1,"group")},indentAuto:function(p){return p.indentSelection("smart")},indentMore:function(p){return p.indentSelection("add")},indentLess:function(p){return p.indentSelection("subtract")},insertTab:function(p){return p.replaceSelection("\t")},insertSoftTab:function(p){var g,m,y,v,b;for(g=[],m=p.listSelections(),y=p.options.tabSize,v=0;v<m.length;v++)b=m[v].from(),b=E(p.getLine(b.line),b.ch,y),g.push(X(y-b%y));p.replaceSelections(g)},defaultTab:function(p){p.somethingSelected()?p.indentSelection("add"):p.execCommand("insertTab")},transposeChars:function(p){return Pr(p,(function(){for(var g,m,y,v=p.listSelections(),b=[],S=0;S<v.length;S++)v[S].empty()&&(g=v[S].head,(m=Ye(p.doc,g.line).text)&&(0<(g=g.ch==m.length?new tt(g.line,g.ch-1):g).ch?(g=new tt(g.line,g.ch+1),p.replaceRange(m.charAt(g.ch-1)+m.charAt(g.ch-2),tt(g.line,g.ch-2),g,"+transpose")):g.line>p.doc.first&&(y=Ye(p.doc,g.line-1).text)&&(g=new tt(g.line,1),p.replaceRange(m.charAt(0)+p.doc.lineSeparator()+y.charAt(y.length-1),tt(g.line-1,y.length-1),g,"+transpose"))),b.push(new Co(g,g)));p.setSelections(b)}))},newlineAndIndent:function(p){return Pr(p,(function(){var g,m,y;for(g=(m=p.listSelections()).length-1;0<=g;g--)p.replaceRange(p.doc.lineSeparator(),m[g].anchor,m[g].head,"+input");for(m=p.listSelections(),y=0;y<m.length;y++)p.indentLine(m[y].from().line,null,!0);wr(p)}))},openLine:function(p){return p.replaceSelection("\n","start")},toggleOverwrite:function(p){return p.toggleOverwrite()}},hl=new I,fl=null,qo.prototype.compare=function(p,g,m){return this.time+400>p&&0==nt(g,this.pos)&&m==this.button},Nl={toString:function(){return"CodeMirror.Init"}},Ol={},Al={},cl.defaults=Ol,cl.optionHandlers=Al,Wl=[],cl.defineInitHook=function(p){return Wl.push(p)},Pl=null,(Gl=function(p){this.cm=p,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new I,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null}).prototype.init=function(p){function a(p){for(var g=p.target;g;g=g.parentNode){if(g==v)return 1;if(/\bCodeMirror-(?:line)?widget\b/.test(g.className))break}}function n(p){var g,b,S,W;if(a(p)&&!we(y,p)){if(y.somethingSelected())pl({lineWise:!1,text:y.getSelections()}),"cut"==p.type&&y.replaceSelection("",null,"cut");else{if(!y.options.lineWiseCopyCut)return;pl({lineWise:!0,text:(g=yl(y)).text}),"cut"==p.type&&y.operation((function(){y.setSelections(g.ranges,0,se),y.replaceSelection("",null,"cut")}))}if(p.clipboardData&&(p.clipboardData.clearData(),b=Pl.text.join("\n"),p.clipboardData.setData("Text",b),p.clipboardData.getData("Text")==b))return void p.preventDefault();p=(S=wl()).firstChild,y.display.lineSpace.insertBefore(S,y.display.lineSpace.firstChild),p.value=Pl.text.join("\n"),W=O(),j(p),setTimeout((function(){y.display.lineSpace.removeChild(S),W.focus(),W==v&&m.showPrimarySelection()}),50)}}var g=this,m=this,y=m.cm,v=m.div=p.lineDiv;v.contentEditable=!0,bl(v,y.options.spellcheck,y.options.autocorrect,y.options.autocapitalize),Re(v,"paste",(function(p){!a(p)||we(y,p)||ml(p,y)||ql<=11&&setTimeout(Er(y,(function(){return g.updateFromDOM()})),20)})),Re(v,"compositionstart",(function(p){g.composing={data:p.data,done:!1}})),Re(v,"compositionupdate",(function(p){g.composing||(g.composing={data:p.data,done:!1})})),Re(v,"compositionend",(function(p){g.composing&&(p.data!=g.composing.data&&g.readFromDOMSoon(),g.composing.done=!0)})),Re(v,"touchstart",(function(){return m.forceCompositionEnd()})),Re(v,"input",(function(){g.composing||g.readFromDOMSoon()})),Re(v,"copy",n),Re(v,"cut",n)},Gl.prototype.screenReaderLabelChanged=function(p){p?this.div.setAttribute("aria-label",p):this.div.removeAttribute("aria-label")},Gl.prototype.prepareSelection=function(){var p=sr(this.cm,!1);return p.focus=O()==this.div,p},Gl.prototype.showSelection=function(p,g){p&&this.cm.display.view.length&&((p.focus||g)&&this.showPrimarySelection(),this.showMultipleSelections(p))},Gl.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Gl.prototype.showPrimarySelection=function(){var p,g,m,y=this.getSelection(),v=this.cm,b=v.doc.sel.primary(),S=b.from(),W=b.to();if(v.display.viewTo==v.display.viewFrom||S.line>=v.display.viewTo||W.line<v.display.viewFrom)y.removeAllRanges();else if(p=kl(v,y.anchorNode,y.anchorOffset),b=kl(v,y.focusNode,y.focusOffset),!p||p.bad||!b||b.bad||0!=nt(lt(p,b),S)||0!=nt(ot(p,b),W))if(b=v.display.view,S=S.line>=v.display.viewFrom&&Sl(v,S)||{node:b[0].measure.map[2],offset:0},(W=W.line<v.display.viewTo&&Sl(v,W))||(W={node:(m=(m=b[b.length-1].measure).maps?m.maps[m.maps.length-1]:m.map)[m.length-1],offset:m[m.length-2]-m[m.length-3]}),S&&W){m=y.rangeCount&&y.getRangeAt(0);try{g=Z(S.node,S.offset,W.offset,W.node)}catch(y){}g&&(!Ul&&v.state.focused?(y.collapse(S.node,S.offset),g.collapsed||(y.removeAllRanges(),y.addRange(g))):(y.removeAllRanges(),y.addRange(g)),m&&null==y.anchorNode?y.addRange(m):Ul&&this.startGracePeriod()),this.rememberSelection()}else y.removeAllRanges()},Gl.prototype.startGracePeriod=function(){var p=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){p.gracePeriod=!1,p.selectionChanged()&&p.cm.operation((function(){return p.cm.curOp.selectionChanged=!0}))}),20)},Gl.prototype.showMultipleSelections=function(p){k(this.cm.display.cursorDiv,p.cursors),k(this.cm.display.selectionDiv,p.selection)},Gl.prototype.rememberSelection=function(){var p=this.getSelection();this.lastAnchorNode=p.anchorNode,this.lastAnchorOffset=p.anchorOffset,this.lastFocusNode=p.focusNode,this.lastFocusOffset=p.focusOffset},Gl.prototype.selectionInEditor=function(){var p=this.getSelection();return!!p.rangeCount&&(p=p.getRangeAt(0).commonAncestorContainer,N(this.div,p))},Gl.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&O()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Gl.prototype.blur=function(){this.div.blur()},Gl.prototype.getField=function(){return this.div},Gl.prototype.supportsTouch=function(){return!0},Gl.prototype.receivedFocus=function(){var p=this,g=this;this.selectionInEditor()?setTimeout((function(){return p.pollSelection()}),20):Pr(this.cm,(function(){return g.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function e(){g.cm.state.focused&&(g.pollSelection(),g.polling.set(g.cm.options.pollInterval,e))}))},Gl.prototype.selectionChanged=function(){var p=this.getSelection();return p.anchorNode!=this.lastAnchorNode||p.anchorOffset!=this.lastAnchorOffset||p.focusNode!=this.lastFocusNode||p.focusOffset!=this.lastFocusOffset},Gl.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var g,m,y=this.getSelection(),v=this.cm;if(S&&p&&this.cm.display.gutterSpecs.length&&function(p){for(var g=p;g;g=g.parentNode)if(/CodeMirror-gutter-wrapper/.test(g.className))return!0;return!1}(y.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();this.composing||(this.rememberSelection(),g=kl(v,y.anchorNode,y.anchorOffset),m=kl(v,y.focusNode,y.focusOffset),g&&m&&Pr(v,(function(){Pi(v.doc,si(g,m),se),(g.bad||m.bad)&&(v.curOp.selectionChanged=!0)})))}},Gl.prototype.pollContent=function(){var p,g,m,y,v,b,S,W,H,z,B,G,V,U,Z,j,te;if(null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null),m=(g=this.cm).display,v=(y=g.doc.sel.primary()).from(),y=y.to(),0==v.ch&&v.line>g.firstLine()&&(v=tt(v.line-1,Ye(g.doc,v.line-1).length)),y.ch==Ye(g.doc,y.line).text.length&&y.line<g.lastLine()&&(y=tt(y.line+1,0)),v.line<m.viewFrom||y.line>m.viewTo-1)return!1;if(S=v.line==m.viewFrom||0==(S=er(g,v.line))?(p=Ze(m.view[0].line),m.view[0].node):(p=Ze(m.view[S].line),m.view[S-1].node.nextSibling),y=(y=er(g,y.line))==m.view.length-1?(b=m.viewTo-1,m.lineDiv.lastChild):(b=Ze(m.view[y+1].line)-1,m.view[y+1].node.previousSibling),!S)return!1;for(W=g.doc.splitLines(function(p,g,m,y,v){function d(){S&&(b+=W,H&&(b+=W),S=H=!1)}function f(p){p&&(d(),b+=p)}for(var b="",S=!1,W=p.doc.lineSeparator(),H=!1;function e(g){var m,b,z,B;if(1==g.nodeType){if(m=g.getAttribute("cm-text"))f(m);else if(m=g.getAttribute("cm-marker"))(m=p.findMarks(tt(y,0),tt(v+1,0),(B=+m,function(p){return p.id==B}))).length&&(b=m[0].find(0))&&f(_e(p.doc,b.from,b.to).join(W));else if("false"!=g.getAttribute("contenteditable")&&(b=/^(pre|div|p|li|table|br)$/i.test(g.nodeName),/^br$/i.test(g.nodeName)||0!=g.textContent.length)){for(b&&d(),z=0;z<g.childNodes.length;z++)e(g.childNodes[z]);/^(pre|p)$/i.test(g.nodeName)&&(H=!0),b&&(S=!0)}}else 3==g.nodeType&&f(g.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}(g),g!=m;)g=g.nextSibling,H=!1;return b}(g,S,y,p,b)),H=_e(g.doc,tt(p,0),tt(b,Ye(g.doc,b).text.length));1<W.length&&1<H.length;)if(Y(W)==Y(H))W.pop(),H.pop(),b--;else{if(W[0]!=H[0])break;W.shift(),H.shift(),p++}for(z=0,B=0,G=W[0],V=H[0],U=Math.min(G.length,V.length);z<U&&G.charCodeAt(z)==V.charCodeAt(z);)++z;for(Z=Y(W),j=Y(H),te=Math.min(Z.length-(1==W.length?z:0),j.length-(1==H.length?z:0));B<te&&Z.charCodeAt(Z.length-B-1)==j.charCodeAt(j.length-B-1);)++B;if(1==W.length&&1==H.length&&p==v.line)for(;z&&z>v.ch&&Z.charCodeAt(Z.length-B-1)==j.charCodeAt(j.length-B-1);)z--,B++;return W[W.length-1]=Z.slice(0,Z.length-B).replace(/^\u200b+/,""),W[0]=W[0].slice(z).replace(/\u200b+$/,""),S=tt(p,z),y=tt(b,H.length?Y(H).length-B:0),1<W.length||W[0]||nt(S,y)?(qi(g.doc,W,S,y,"+input"),!0):void 0},Gl.prototype.ensurePolled=function(){this.forceCompositionEnd()},Gl.prototype.reset=function(){this.forceCompositionEnd()},Gl.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Gl.prototype.readFromDOMSoon=function(){var p=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(p.readDOMTimeout=null,p.composing){if(!p.composing.done)return;p.composing=null}p.updateFromDOM()}),80))},Gl.prototype.updateFromDOM=function(){var p=this;!this.cm.isReadOnly()&&this.pollContent()||Pr(this.cm,(function(){return tr(p.cm)}))},Gl.prototype.setUneditable=function(p){p.contentEditable="false"},Gl.prototype.onKeyPress=function(p){0==p.charCode||this.composing||(p.preventDefault(),this.cm.isReadOnly()||Er(this.cm,gl)(this.cm,String.fromCharCode(null==p.charCode?p.keyCode:p.charCode),0))},Gl.prototype.readOnlyChanged=function(p){this.div.contentEditable=String("nocursor"!=p)},Gl.prototype.onContextMenu=function(){},Gl.prototype.resetPosition=function(){},Gl.prototype.needsContentAttribute=!0,Zl=function(p){this.cm=p,this.prevInput="",this.pollingFast=!1,this.polling=new I,this.hasSelection=!1,this.composing=null},Zl.prototype.init=function(p){function t(p){if(!we(v,p)){if(v.somethingSelected())pl({lineWise:!1,text:v.getSelections()});else{if(!v.options.lineWiseCopyCut)return;var m=yl(v);pl({lineWise:!0,text:m.text}),"cut"==p.type?v.setSelections(m.ranges,null,se):(y.prevInput="",g.value=m.text.join("\n"),j(g))}"cut"==p.type&&(v.state.cutIncoming=+new Date)}}var g,m=this,y=this,v=this.cm;this.createField(p),g=this.textarea,p.wrapper.insertBefore(this.wrapper,p.wrapper.firstChild),b&&(g.style.width="0px"),Re(g,"input",(function(){_l&&9<=ql&&m.hasSelection&&(m.hasSelection=null),y.poll()})),Re(g,"paste",(function(p){we(v,p)||ml(p,v)||(v.state.pasteIncoming=+new Date,y.fastPoll())})),Re(g,"cut",t),Re(g,"copy",t),Re(p.scroller,"paste",(function(m){if(!pn(p,m)&&!we(v,m)){if(!g.dispatchEvent)return v.state.pasteIncoming=+new Date,void y.focus();var b=new Event("paste");b.clipboardData=m.clipboardData,g.dispatchEvent(b)}})),Re(p.lineSpace,"selectstart",(function(g){pn(p,g)||Le(g)})),Re(g,"compositionstart",(function(){var p=v.getCursor("from");y.composing&&y.composing.range.clear(),y.composing={start:p,range:v.markText(p,v.getCursor("to"),{className:"CodeMirror-composing"})}})),Re(g,"compositionend",(function(){y.composing&&(y.poll(),y.composing.range.clear(),y.composing=null)}))},Zl.prototype.createField=function(p){this.wrapper=wl(),this.textarea=this.wrapper.firstChild},Zl.prototype.screenReaderLabelChanged=function(p){p?this.textarea.setAttribute("aria-label",p):this.textarea.removeAttribute("aria-label")},Zl.prototype.prepareSelection=function(){var p,g=this.cm,m=g.display,y=g.doc,v=sr(g);return g.options.moveInputWithCursor&&(p=Rn(g,y.sel.primary().head,"div"),g=m.wrapper.getBoundingClientRect(),y=m.lineDiv.getBoundingClientRect(),v.teTop=Math.max(0,Math.min(m.wrapper.clientHeight-10,p.top+y.top-g.top)),v.teLeft=Math.max(0,Math.min(m.wrapper.clientWidth-10,p.left+y.left-g.left))),v},Zl.prototype.showSelection=function(p){var g=this.cm.display;k(g.cursorDiv,p.cursors),k(g.selectionDiv,p.selection),null!=p.teTop&&(this.wrapper.style.top=p.teTop+"px",this.wrapper.style.left=p.teLeft+"px")},Zl.prototype.reset=function(p){var g,m;this.contextMenuPending||this.composing||((g=this.cm).somethingSelected()?(this.prevInput="",m=g.getSelection(),this.textarea.value=m,g.state.focused&&j(this.textarea),_l&&9<=ql&&(this.hasSelection=m)):p||(this.prevInput=this.textarea.value="",_l&&9<=ql&&(this.hasSelection=null)))},Zl.prototype.getField=function(){return this.textarea},Zl.prototype.supportsTouch=function(){return!1},Zl.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!W||O()!=this.textarea))try{this.textarea.focus()}catch(p){}},Zl.prototype.blur=function(){this.textarea.blur()},Zl.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Zl.prototype.receivedFocus=function(){this.slowPoll()},Zl.prototype.slowPoll=function(){var p=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){p.poll(),p.cm.state.focused&&p.slowPoll()}))},Zl.prototype.fastPoll=function(){var p=!1,g=this;g.pollingFast=!0,g.polling.set(20,(function e(){g.poll()||p?(g.pollingFast=!1,g.slowPoll()):(p=!0,g.polling.set(60,e))}))},Zl.prototype.poll=function(){var p,g,m,y,v=this,b=this.cm,S=this.textarea,W=this.prevInput;if(this.contextMenuPending||!b.state.focused||ht(S)&&!W&&!this.composing||b.isReadOnly()||b.options.disableInput||b.state.keySeq)return!1;if((p=S.value)==W&&!b.somethingSelected())return!1;if(_l&&9<=ql&&this.hasSelection===p||H&&/[\uf700-\uf7ff]/.test(p))return b.display.input.reset(),!1;if(b.doc.sel==b.display.selForContextMenu&&(8203!=(g=p.charCodeAt(0))||W||(W="​"),8666==g))return this.reset(),this.cm.execCommand("undo");for(m=0,y=Math.min(W.length,p.length);m<y&&W.charCodeAt(m)==p.charCodeAt(m);)++m;return Pr(b,(function(){gl(b,p.slice(m),W.length-m,null,v.composing?"*compose":null),1e3<p.length||-1<p.indexOf("\n")?S.value=v.prevInput="":v.prevInput=p,v.composing&&(v.composing.range.clear(),v.composing.range=b.markText(v.composing.start,b.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Zl.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Zl.prototype.onKeyPress=function(){_l&&9<=ql&&(this.hasSelection=null),this.fastPoll()},Zl.prototype.onContextMenu=function(p){function h(){var p,g;null!=G.selectionStart&&(g="​"+((p=z.somethingSelected())?G.value:""),G.value="⇚",G.value=g,H.prevInput=p?"":"​",G.selectionStart=1,G.selectionEnd=g.length,B.selForContextMenu=z.doc.sel)}function d(){var p,g;H.contextMenuPending==d&&(H.contextMenuPending=!1,H.wrapper.style.cssText=y,G.style.cssText=m,_l&&ql<9&&B.scrollbars.setScrollTop(B.scroller.scrollTop=W),null!=G.selectionStart&&((!_l||ql<9)&&h(),p=0,g=function(){B.selForContextMenu==z.doc.sel&&0==G.selectionStart&&0<G.selectionEnd&&"​"==H.prevInput?Er(z,Vi)(z):p++<10?B.detectingSelectAll=setTimeout(g,500):(B.selForContextMenu=null,B.input.reset())},B.detectingSelectAll=setTimeout(g,200)))}var m,y,v,b,S,W,H=this,z=H.cm,B=z.display,G=H.textarea;H.contextMenuPending&&H.contextMenuPending(),S=Jn(z,p),W=B.scroller.scrollTop,S&&!g&&(z.options.resetSelectionOnContextMenu&&-1==z.doc.sel.contains(S)&&Er(z,Pi)(z.doc,si(S),se),m=G.style.cssText,y=H.wrapper.style.cssText,S=H.wrapper.offsetParent.getBoundingClientRect(),H.wrapper.style.cssText="position: static",G.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(p.clientY-S.top-5)+"px; left: "+(p.clientX-S.left-5)+"px;\n      z-index: 1000; background: "+(_l?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Xl&&(v=window.scrollY),B.input.focus(),Xl&&window.scrollTo(null,v),B.input.reset(),z.somethingSelected()||(G.value=H.prevInput=" "),H.contextMenuPending=d,B.selForContextMenu=z.doc.sel,clearTimeout(B.detectingSelectAll),_l&&9<=ql&&h(),V?(Me(p),b=function(){ye(window,"mouseup",b),setTimeout(d,20)},Re(window,"mouseup",b)):setTimeout(d,50))},Zl.prototype.readOnlyChanged=function(p){p||this.reset(),this.textarea.disabled="nocursor"==p,this.textarea.readOnly=!!p},Zl.prototype.setUneditable=function(){},Zl.prototype.needsContentAttribute=!1,Hl=(El=cl).optionHandlers,El.defineOption=Dl,El.Init=Nl,Dl("value","",(function(p,g){return p.setValue(g)}),!0),Dl("mode",null,(function(p,g){p.doc.modeOption=g,di(p)}),!0),Dl("indentUnit",2,di,!0),Dl("indentWithTabs",!1),Dl("smartIndent",!0),Dl("tabSize",4,(function(p){fi(p),Dn(p),tr(p)}),!0),Dl("lineSeparator",null,(function(p,g){var m,y,v;if(p.doc.lineSep=g)for(m=[],y=p.doc.first,p.doc.iter((function(p){var v,b;for(v=0;-1!=(b=p.text.indexOf(g,v));)v=b+g.length,m.push(tt(y,b));y++})),v=m.length-1;0<=v;v--)qi(p.doc,g,m[v],tt(m[v].line,m[v].ch+g.length))})),Dl("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(p,g,m){p.state.specialChars=new RegExp(g.source+(g.test("\t")?"":"|\t"),"g"),m!=Nl&&p.refresh()})),Dl("specialCharPlaceholder",$t,(function(p){return p.refresh()}),!0),Dl("electricChars",!0),Dl("inputStyle",W?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),Dl("spellcheck",!1,(function(p,g){return p.getInputField().spellcheck=g}),!0),Dl("autocorrect",!1,(function(p,g){return p.getInputField().autocorrect=g}),!0),Dl("autocapitalize",!1,(function(p,g){return p.getInputField().autocapitalize=g}),!0),Dl("rtlMoveVisually",!B),Dl("wholeLineUpdateBefore",!0),Dl("theme","default",(function(p){il(p),Zr(p)}),!0),Dl("keyMap","default",(function(p,g,m){g=Wo(g),(m=m!=Nl&&Wo(m))&&m.detach&&m.detach(p,g),g.attach&&g.attach(p,m||null)})),Dl("extraKeys",null),Dl("configureMouse",null),Dl("lineWrapping",!1,ul,!0),Dl("gutters",[],(function(p,g){p.display.gutterSpecs=$r(g,p.options.lineNumbers),Zr(p)}),!0),Dl("fixedGutter",!0,(function(p,g){p.display.gutters.style.left=g?qn(p.display)+"px":"0",p.refresh()}),!0),Dl("coverGutterNextToScrollbar",!1,(function(p){return Nr(p)}),!0),Dl("scrollbarStyle","native",(function(p){Dr(p),Nr(p),p.display.scrollbars.setScrollTop(p.doc.scrollTop),p.display.scrollbars.setScrollLeft(p.doc.scrollLeft)}),!0),Dl("lineNumbers",!1,(function(p,g){p.display.gutterSpecs=$r(p.options.gutters,g),Zr(p)}),!0),Dl("firstLineNumber",1,Zr,!0),Dl("lineNumberFormatter",(function(p){return p}),Zr,!0),Dl("showCursorWhenSelecting",!1,lr,!0),Dl("resetSelectionOnContextMenu",!0),Dl("lineWiseCopyCut",!0),Dl("pasteLinesPerSelection",!0),Dl("selectionsMayTouch",!1),Dl("readOnly",!1,(function(p,g){"nocursor"==g&&(pr(p),p.display.input.blur()),p.display.input.readOnlyChanged(g)})),Dl("screenReaderLabel",null,(function(p,g){p.display.input.screenReaderLabelChanged(g=""===g?null:g)})),Dl("disableInput",!1,(function(p,g){g||p.display.input.reset()}),!0),Dl("dragDrop",!0,al),Dl("allowDropFileTypes",null),Dl("cursorBlinkRate",530),Dl("cursorScrollMargin",0),Dl("cursorHeight",1,lr,!0),Dl("singleCursorHeightPerLine",!0,lr,!0),Dl("workTime",100),Dl("workDelay",100),Dl("flattenSpans",!0,fi,!0),Dl("addModeClass",!1,fi,!0),Dl("pollInterval",100),Dl("undoDepth",200,(function(p,g){return p.doc.history.undoDepth=g})),Dl("historyEventDelay",1250),Dl("viewportMargin",10,(function(p){return p.refresh()}),!0),Dl("maxHighlightLength",1e4,fi,!0),Dl("moveInputWithCursor",!0,(function(p,g){g||p.display.input.resetPosition()})),Dl("tabindex",null,(function(p,g){return p.display.input.getField().tabIndex=g||""})),Dl("autofocus",null),Dl("direction","ltr",(function(p,g){return p.doc.setDirection(g)}),!0),Dl("phrases",null),Fl=(Rl=cl).optionHandlers,Il=Rl.helpers={},Rl.prototype={constructor:Rl,focus:function(){window.focus(),this.display.input.focus()},setOption:function(p,g){var m=this.options,y=m[p];m[p]==g&&"mode"!=p||(m[p]=g,Fl.hasOwnProperty(p)&&Er(this,Fl[p])(this,g,y),be(this,"optionChange",this,p))},getOption:function(p){return this.options[p]},getDoc:function(){return this.doc},addKeyMap:function(p,g){this.state.keyMaps[g?"push":"unshift"](Wo(p))},removeKeyMap:function(p){for(var g=this.state.keyMaps,m=0;m<g.length;++m)if(g[m]==p||g[m].name==p)return g.splice(m,1),!0},addOverlay:Ir((function(p,g){var m=p.token?p:Rl.getMode(this.options,p);if(m.startState)throw new Error("Overlays may not be stateful.");!function(p,g,m){for(var y=0,v=m(g);y<p.length&&m(p[y])<=v;)y++;p.splice(y,0,g)}(this.state.overlays,{mode:m,modeSpec:p,opaque:g&&g.opaque,priority:g&&g.priority||0},(function(p){return p.priority})),this.state.modeGen++,tr(this)})),removeOverlay:Ir((function(p){var g,m,y;for(g=this.state.overlays,m=0;m<g.length;++m)if((y=g[m].modeSpec)==p||"string"==typeof p&&y.name==p)return g.splice(m,1),this.state.modeGen++,void tr(this)})),indentLine:Ir((function(p,g,m){"string"!=typeof g&&"number"!=typeof g&&(g=null==g?this.options.smartIndent?"smart":"prev":g?"add":"subtract"),Je(this.doc,p)&&dl(this,p,g,m)})),indentSelection:Ir((function(p){var g,m,y,v,b,S,W;for(g=this.doc.sel.ranges,m=-1,y=0;y<g.length;y++)if((v=g[y]).empty())v.head.line>m&&(dl(this,v.head.line,p,!0),m=v.head.line,y==this.doc.sel.primIndex&&wr(this));else{for(b=v.from(),S=v.to(),v=Math.max(m,b.line),m=Math.min(this.lastLine(),S.line-(S.ch?0:1))+1,W=v;W<m;++W)dl(this,W,p);v=this.doc.sel.ranges,0==b.ch&&g.length==v.length&&0<v[y].from().ch&&Wi(this.doc,y,new Co(b,v[y].to()),se)}})),getTokenAt:function(p,g){return bt(this,p,g)},getLineTokens:function(p,g){return bt(this,tt(p),g,!0)},getTokenTypeAt:function(p){var g,m,y,v,b,S;if(p=at(this.doc,p),y=0,v=((m=ft(this,Ye(this.doc,p.line))).length-1)/2,0==(b=p.ch))g=m[2];else for(;;)if(((S=y+v>>1)?m[2*S-1]:0)>=b)v=S;else{if(!(m[2*S+1]<b)){g=m[2*S+2];break}y=1+S}return(p=g?g.indexOf("overlay "):-1)<0?g:0==p?null:g.slice(0,p-1)},getModeAt:function(p){var g=this.doc.mode;return g.innerMode?Rl.innerMode(g,this.getTokenAt(p).state).mode:g},getHelper:function(p,g){return this.getHelpers(p,g)[0]},getHelpers:function(p,g){var m,y,v,b,S,W,H=[];if(!Il.hasOwnProperty(g))return H;if(m=Il[g],"string"==typeof(y=this.getModeAt(p))[g])m[y[g]]&&H.push(m[y[g]]);else if(y[g])for(v=0;v<y[g].length;v++)(b=m[y[g][v]])&&H.push(b);else y.helperType&&m[y.helperType]?H.push(m[y.helperType]):m[y.name]&&H.push(m[y.name]);for(S=0;S<m._global.length;S++)(W=m._global[S]).pred(y,this)&&-1==R(H,W.val)&&H.push(W.val);return H},getStateAfter:function(p,g){var m=this.doc;return pt(this,(p=st(m,null==p?m.first+m.size-1:p))+1,g).state},cursorCoords:function(p,g){var m=this.doc.sel.primary(),m;return Rn(this,m=null==p?m.head:"object"==typeof p?at(this.doc,p):p?m.from():m.to(),g||"page")},charCoords:function(p,g){return In(this,at(this.doc,p),g||"page")},coordsChar:function(p,g){return Gn(this,(p=En(this,p,g||"page")).left,p.top)},lineAtHeight:function(p,g){return p=En(this,{top:p,left:0},g||"page").top,Qe(this.doc,p+this.display.viewOffset)},heightAtLine:function(p,g,m){var y,v=!1,p;return Pn(this,p="number"==typeof p?(y=this.doc.first+this.doc.size-1,p<this.doc.first?p=this.doc.first:y<p&&(p=y,v=!0),Ye(this.doc,p)):p,{top:0,left:0},g||"page",m||v).top+(v?this.doc.height-Gt(p):0)},defaultTextHeight:function(){return Yn(this.display)},defaultCharWidth:function(){return _n(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(p,g,m,y,v){var b,S,W=this.display,H=(p=Rn(this,at(this.doc,p))).bottom,z=p.left;g.style.position="absolute",g.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(g),W.sizer.appendChild(g),"over"==y?H=p.top:"above"!=y&&"near"!=y||(b=Math.max(W.wrapper.clientHeight,this.doc.height),S=Math.max(W.sizer.clientWidth,W.lineSpace.clientWidth),("above"==y||p.bottom+g.offsetHeight>b)&&p.top>g.offsetHeight?H=p.top-g.offsetHeight:p.bottom+g.offsetHeight<=b&&(H=p.bottom),z+g.offsetWidth>S&&(z=S-g.offsetWidth)),g.style.top=H+"px",g.style.left=g.style.right="","right"==v?(z=W.sizer.clientWidth-g.offsetWidth,g.style.right="0px"):("left"==v?z=0:"middle"==v&&(z=(W.sizer.clientWidth-g.offsetWidth)/2),g.style.left=z+"px"),m&&(null!=(g=yr(m=this,g={left:z,top:H,right:z+g.offsetWidth,bottom:H+g.offsetHeight})).scrollTop&&Lr(m,g.scrollTop),null!=g.scrollLeft&&Tr(m,g.scrollLeft))},triggerOnKeyDown:Ir(Yo),triggerOnKeyPress:Ir($o),triggerOnKeyUp:_o,triggerOnMouseDown:Ir(Jo),execCommand:function(p){if(sl.hasOwnProperty(p))return sl[p].call(null,this)},triggerElectric:Ir((function(p){vl(this,p)})),findPosH:function(p,g,m,y){var v,b,S=1;for(g<0&&(S=-1,g=-g),v=at(this.doc,p),b=0;b<g&&!(v=xl(this.doc,v,S,m,y)).hitSide;++b);return v},moveH:Ir((function(p,g){var m=this;this.extendSelectionsBy((function(y){return m.display.shift||m.doc.extend||y.empty()?xl(m.doc,y.head,p,g,m.options.rtlMoveVisually):p<0?y.from():y.to()}),ue)})),deleteH:Ir((function(p,g){var m=this.doc.sel,y=this.doc;m.somethingSelected()?y.replaceSelection("",null,"+delete"):Ho(this,(function(m){var v=xl(y,m.head,p,g,!1);return p<0?{from:v,to:m.head}:{from:m.head,to:v}}))})),findPosV:function(p,g,m,y){var v,b,S,W=1,H=y;for(g<0&&(W=-1,g=-g),v=at(this.doc,p),b=0;b<g&&(S=Rn(this,v,"div"),null==H?H=S.left:S.left=H,!(v=Cl(this,S,W,m)).hitSide);++b);return v},moveV:Ir((function(p,g){var m,y=this,v=this.doc,b=[],S=!this.display.shift&&!v.extend&&v.sel.somethingSelected();if(v.extendSelectionsBy((function(m){var W,H;return S?p<0?m.from():m.to():(W=Rn(y,m.head,"div"),null!=m.goalColumn&&(W.left=m.goalColumn),b.push(W.left),H=Cl(y,W,p,g),"page"==g&&m==v.sel.primary()&&br(y,In(y,H,"div").top-W.top),H)}),ue),b.length)for(m=0;m<v.sel.ranges.length;m++)v.sel.ranges[m].goalColumn=b[m]})),findWordAt:function(p){var g,m,y,v=Ye(this.doc,p.line).text,b=p.ch,S=p.ch;if(v){for(g=this.getHelper(p,"wordChars"),"before"!=p.sticky&&S!=v.length||!b?++S:--b,y=J(m=v.charAt(b),g)?function(p){return J(p,g)}:/\s/.test(m)?function(p){return/\s/.test(p)}:function(p){return!/\s/.test(p)&&!J(p)};0<b&&y(v.charAt(b-1));)--b;for(;S<v.length&&y(v.charAt(S));)++S}return new Co(tt(p.line,b),tt(p.line,S))},toggleOverwrite:function(p){null!=p&&p==this.state.overwrite||(((this.state.overwrite=!this.state.overwrite)?A:U)(this.display.cursorDiv,"CodeMirror-overwrite"),be(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==O()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Ir((function(p,g){xr(this,p,g)})),getScrollInfo:function(){var p=this.display.scroller;return{left:p.scrollLeft,top:p.scrollTop,height:p.scrollHeight-yn(this)-this.display.barHeight,width:p.scrollWidth-yn(this)-this.display.barWidth,clientHeight:wn(this),clientWidth:bn(this)}},scrollIntoView:Ir((function(p,g){var m;null==p?(p={from:this.doc.sel.primary().head,to:null},null==g&&(g=this.options.cursorScrollMargin)):"number"==typeof p?p={from:tt(p,0),to:null}:null==p.from&&(p={from:p,to:null}),p.to||(p.to=p.from),p.margin=g||0,null!=p.from.line?(m=p,Cr(g=this),g.curOp.scrollToPos=m):Sr(this,p.from,p.to,p.margin)})),setSize:Ir((function(p,g){function n(p){return"number"==typeof p||/^\d+$/.test(String(p))?p+"px":p}var m,y=this;null!=p&&(this.display.wrapper.style.width=n(p)),null!=g&&(this.display.wrapper.style.height=n(g)),this.options.lineWrapping&&An(this),m=this.display.viewFrom,this.doc.iter(m,this.display.viewTo,(function(p){if(p.widgets)for(var g=0;g<p.widgets.length;g++)if(p.widgets[g].noHScroll){nr(y,m,"widget");break}++m})),this.curOp.forceUpdate=!0,be(this,"refresh",this)})),operation:function(p){return Pr(this,p)},startOperation:function(){return Hr(this)},endOperation:function(){return Fr(this)},refresh:Ir((function(){var p=this.display.cachedTextHeight;tr(this),this.curOp.forceUpdate=!0,Dn(this),xr(this,this.doc.scrollLeft,this.doc.scrollTop),jr(this.display),(null==p||.5<Math.abs(p-Yn(this.display))||this.options.lineWrapping)&&Qn(this),be(this,"refresh",this)})),swapDoc:Ir((function(p){var g=this.doc;return g.cm=null,this.state.selectingText&&this.state.selectingText(),vi(this,p),Dn(this),this.display.input.reset(),xr(this,p.scrollLeft,p.scrollTop),this.curOp.forceScroll=!0,rn(this,"swapDoc",this,g),g})),phrase:function(p){var g=this.options.phrases;return g&&Object.prototype.hasOwnProperty.call(g,p)?g[p]:p},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Se(Rl),Rl.registerHelper=function(p,g,m){Il.hasOwnProperty(p)||(Il[p]=Rl[p]={_global:[]}),Il[p][g]=m},Rl.registerGlobalHelper=function(p,g,m,y){Rl.registerHelper(p,g,y),Il[p]._global.push({pred:m,val:y})},Bl="iter insert remove copy getEditor constructor".split(" "),ho.prototype)ho.prototype.hasOwnProperty(zl)&&R(Bl,zl)<0&&(cl.prototype[zl]=function(p){return function(){return p.apply(this.doc,arguments)}}(ho.prototype[zl]));return Se(ho),cl.inputStyles={textarea:Zl,contenteditable:Gl},cl.defineMode=function(p){cl.defaults.mode||"null"==p||(cl.defaults.mode=p),function(p,g){2<arguments.length&&(g.dependencies=Array.prototype.slice.call(arguments,2)),St[p]=g}.apply(this,arguments)},cl.defineMIME=function(p,g){Kt[p]=g},cl.defineMode("null",(function(){return{token:function(p){return p.skipToEnd()}}})),cl.defineMIME("text/plain","null"),cl.defineExtension=function(p,g){cl.prototype[p]=g},cl.defineDocExtension=function(p,g){ho.prototype[p]=g},cl.fromTextArea=function(p,g){function r(){p.value=S.getValue()}var m,y,v,b,S;if((g=g?P(g):{}).value=p.value,!g.tabindex&&p.tabIndex&&(g.tabindex=p.tabIndex),!g.placeholder&&p.placeholder&&(g.placeholder=p.placeholder),null==g.autofocus&&(m=O(),g.autofocus=m==p||null!=p.getAttribute("autofocus")&&m==document.body),p.form&&(Re(p.form,"submit",r),!g.leaveSubmitMethodAlone)){y=p.form,v=y.submit;try{b=y.submit=function(){r(),y.submit=v,y.submit(),y.submit=b}}catch(m){}}return g.finishInit=function(m){m.save=r,m.getTextArea=function(){return p},m.toTextArea=function(){m.toTextArea=isNaN,r(),p.parentNode.removeChild(m.getWrapperElement()),p.style.display="",p.form&&(ye(p.form,"submit",r),g.leaveSubmitMethodAlone||"function"!=typeof p.form.submit||(p.form.submit=v))}},p.style.display="none",S=cl((function(g){return p.parentNode.insertBefore(g,p.nextSibling)}),g),S},(Yl=cl).off=ye,Yl.on=Re,Yl.wheelEventPixels=ni,Yl.Doc=ho,Yl.splitLines=Xe,Yl.countColumn=E,Yl.findColumn=K,Yl.isWordChar=Q,Yl.Pass=oe,Yl.signal=be,Yl.Line=Ar,Yl.changeEnd=ai,Yl.scrollbarModel=lo,Yl.Pos=tt,Yl.cmpPos=nt,Yl.modes=St,Yl.mimeModes=Kt,Yl.resolveMode=ze,Yl.getMode=Be,Yl.modeExtensions=jt,Yl.extendMode=Ue,Yl.copyState=Ve,Yl.startState=je,Yl.innerMode=Ke,Yl.commands=sl,Yl.keyMap=ll,Yl.keyName=Do,Yl.isModifierKey=Oo,Yl.lookupKey=No,Yl.normalizeKeyMap=Mo,Yl.StringStream=Xt,Yl.SharedTextMarker=Lo,Yl.TextMarker=oo,Yl.LineWidget=ro,Yl.e_preventDefault=Le,Yl.e_stopPropagation=ke,Yl.e_stop=Me,Yl.addClass=A,Yl.contains=N,Yl.rmClass=U,Yl.keyNames=Zo,cl.version="5.63.1",cl},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).CodeMirror=t();